/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => QuickPluginSwitcher
});
module.exports = __toCommonJS(main_exports);

// node_modules/monkey-around/mjs/index.js
function around(obj, factories) {
  const removers = Object.keys(factories).map((key) => around1(obj, key, factories[key]));
  return removers.length === 1 ? removers[0] : function() {
    removers.forEach((r) => r());
  };
}
function around1(obj, method, createWrapper) {
  const original = obj[method], hadOwn = obj.hasOwnProperty(method);
  let current = createWrapper(original);
  if (original)
    Object.setPrototypeOf(current, original);
  Object.setPrototypeOf(wrapper, current);
  obj[method] = wrapper;
  return remove;
  function wrapper(...args) {
    if (current === original && obj[method] === wrapper)
      remove();
    return current.apply(this, args);
  }
  function remove() {
    if (obj[method] === wrapper) {
      if (hadOwn)
        obj[method] = original;
      else
        delete obj[method];
    }
    if (current === original)
      return;
    current = original;
    Object.setPrototypeOf(wrapper, original || Function);
  }
}

// src/main.ts
var import_obsidian7 = require("obsidian");

// src/main_modal.ts
var import_obsidian5 = require("obsidian");

// src/types.ts
var commPlugins = "https://raw.githubusercontent.com/obsidianmd/obsidian-releases/master/community-plugins.json";
var commPluginStats = "https://raw.githubusercontent.com/obsidianmd/obsidian-releases/master/community-plugin-stats.json";
var Filters = {
  All: "all",
  Enabled: "enabled",
  Disabled: "disabled",
  EnabledFirst: "enabledFirst",
  MostSwitched: "mostSwitched",
  ByGroup: "byGroup"
};
var CommFilters = {
  All: "all",
  NotInstalled: "not installed",
  Installed: "installed",
  ByGroup: "byGroup"
};
var Groups = {
  SelectGroup: "All"
};
var GroupsComm = {
  SelectGroup: "All"
};
var DEFAULT_SETTINGS = {
  lastFetchExe: 0,
  savedVersion: "0.0.0",
  allPluginsList: [],
  wasEnabled: [],
  filters: Filters.All,
  selectedGroup: "SelectGroup",
  search: "",
  numberOfGroups: 4,
  groups: {},
  showHotKeys: true,
  // commnunity plugins
  pluginStats: {},
  pluginsTagged: {},
  commPlugins: [],
  filtersComm: CommFilters.All,
  selectedGroupComm: "SelectGroup",
  numberOfGroupsComm: 4,
  groupsComm: {}
};

// src/utils.ts
function isEnabled(modal, name) {
  return modal.app.plugins.enabledPlugins.has(name);
}
function removeItem(arr, value) {
  const index = arr.indexOf(value);
  if (index > -1) {
    arr.splice(index, 1);
  }
  return arr;
}
function formatNumber(num, precision = 2) {
  const map = [
    { suffix: "T", threshold: 1e12 },
    { suffix: "B", threshold: 1e9 },
    { suffix: "M", threshold: 1e6 },
    { suffix: "K", threshold: 1e3 },
    { suffix: "", threshold: 1 }
  ];
  const found = map.find((x) => Math.abs(num) >= x.threshold);
  if (found) {
    const formatted = (num / found.threshold).toFixed(precision) + found.suffix;
    return formatted;
  }
  return num;
}
function calculateTimeElapsed(datePasted) {
  const delta = Math.abs(new Date().getTime() - datePasted.getTime()) / 1e3;
  const years = Math.floor(delta / (86400 * 365));
  if (years >= 2) {
    return `${years} years ago`;
  } else if (years === 1) {
    return "1 year ago";
  }
  const months = Math.floor(delta / (86400 * 30));
  if (months >= 2) {
    return `${months} months ago`;
  } else if (months === 1) {
    return "1 month ago";
  }
  const days = Math.floor(delta / 86400);
  if (days >= 2) {
    return `${days} days ago`;
  } else if (days === 1) {
    return "1 day ago";
  }
  const hours = Math.floor(delta / 3600) % 24;
  if (hours >= 2) {
    return `${hours} hours ago`;
  } else if (hours === 1) {
    return "1 hour ago";
  }
  const minutes = Math.floor(delta / 60) % 60;
  if (minutes >= 2) {
    return `${minutes} minutes ago`;
  } else if (minutes === 1) {
    return "1 minute ago";
  }
  return "seconds ago";
}

// src/secondary_modals.ts
var import_obsidian3 = require("obsidian");

// src/community-plugins_modal.ts
var import_fs = require("fs");
var import_obsidian2 = require("obsidian");

// src/modal_utils.ts
var import_obsidian = require("obsidian");
var reset = async (modal) => {
  const { plugin } = modal;
  const confirmed = await confirm("Reset most switched values?", 250);
  if (confirmed) {
    plugin.reset = true;
    plugin.getLength();
    await reOpenModal(modal);
    new import_obsidian.Notice("Done", 2500);
  } else {
    new import_obsidian.Notice("Operation cancelled", 2500);
  }
};
var sortByName = (listItems) => {
  listItems.sort((a, b) => a.name.localeCompare(b.name));
};
var sortSwitched = (listItems) => {
  listItems.sort((a, b) => b.switched - a.switched);
};
var setGroupTitle = (modal, plugin, Groups2, numberOfGroups) => {
  var _a, _b, _c, _d, _e, _f;
  const { settings } = plugin;
  const currentGroupKeys = Object.keys(Groups2);
  for (let i = 1; i < currentGroupKeys.length; i++) {
    const key = currentGroupKeys[i];
    delete Groups2[key];
  }
  for (let i = 1; i <= numberOfGroups; i++) {
    if (modal instanceof CPModal) {
      if (((_a = settings.groupsComm[i]) == null ? void 0 : _a.name) === void 0) {
        settings.groupsComm[i] = {
          name: ""
        };
      }
      const groupKey = ((_b = plugin.settings.groupsComm[i]) == null ? void 0 : _b.name) !== "" ? (_c = plugin.settings.groupsComm[i]) == null ? void 0 : _c.name : `Group${i}`;
      Groups2[`Group${i}`] = `${groupKey}`;
    } else {
      if (((_d = settings.groups[i]) == null ? void 0 : _d.name) === void 0) {
        settings.groups[i] = {
          name: "",
          delayed: false,
          time: 0,
          applied: false
        };
      }
      const groupKey = ((_e = plugin.settings.groups[i]) == null ? void 0 : _e.name) !== "" ? (_f = plugin.settings.groups[i]) == null ? void 0 : _f.name : `Group${i}`;
      Groups2[`Group${i}`] = `${groupKey}`;
    }
  }
};
var getEmojiForGroup = (groupNumber) => {
  const emojis = ["\u{1F7E1}", "\u{1F535}", "\u{1F534}", "\u26AA\uFE0F", "\u{1F7E4}", "\u{1F7E2}", "\u{1F7E3}"];
  const colors = [
    "#FFD700",
    "#0000FF",
    "#FF0000",
    "#FFFFFF",
    "#A52A2A",
    "#00FF00",
    "#800080"
  ];
  return { emoji: emojis[groupNumber - 1], color: colors[groupNumber - 1] };
};
var getCirclesItem = (indices) => {
  const len = indices.length;
  let background = "";
  if (len === 1) {
    const { color } = getEmojiForGroup(indices[len - 1]);
    background = `background: ${color};`;
  } else if (len === 2) {
    const { color: color1 } = getEmojiForGroup(indices[len - 2]);
    const { color: color2 } = getEmojiForGroup(indices[len - 1]);
    background = `background: linear-gradient(90deg, ${color1} 50%, ${color2} 50%);`;
  }
  const content = `<div
            style="${background}"
            class="qps-item-line-group"
            >
            &nbsp;
            </div>
            `;
  return content;
};
var togglePlugin = async (modal, pluginItem) => {
  const { plugin } = modal;
  pluginItem.enabled = !pluginItem.enabled;
  pluginItem.enabled ? await conditionalEnable(modal, pluginItem) : await modal.app.plugins.disablePluginAndSave(pluginItem.id);
  plugin.getLength();
  await plugin.saveSettings();
  await reOpenModal(modal);
};
async function openDirectoryInFileManager(modal, pluginItem) {
  let shell = window.electron.shell;
  const filePath = modal.app.vault.adapter.getFullPath(
    pluginItem.dir
  );
  try {
    await shell.openExternal(filePath);
  } catch (err) {
    const plugins = app.vault.adapter.getFullPath(
      ".obsidian/plugins"
    );
    await shell.openExternal(plugins);
  }
}
var delayedReEnable = async (_this, pluginItem) => {
  await _this.app.plugins.disablePluginAndSave(pluginItem.id);
  await _this.app.plugins.enablePlugin(pluginItem.id).then(pluginItem.enabled = true);
};
var conditionalEnable = async (modal, pluginItem) => {
  if (pluginItem.delayed && pluginItem.time > 0) {
    await modal.app.plugins.enablePlugin(pluginItem.id);
    await modal.plugin.saveSettings();
  } else {
    pluginItem.switched++;
    await modal.app.plugins.enablePluginAndSave(pluginItem.id);
  }
};
var selectValue = (input) => {
  input == null ? void 0 : input.setSelectionRange(0, input == null ? void 0 : input.value.length);
};
function groupNotEmpty(groupIndex, modal) {
  const { plugin } = modal;
  const { settings } = plugin;
  if (modal instanceof QPSModal) {
    return settings.allPluginsList.some(
      (plugin2) => {
        var _a;
        return ((_a = plugin2.groupInfo.groupIndices) == null ? void 0 : _a.indexOf(groupIndex)) !== -1;
      }
    );
  } else {
    for (const pluginKey in settings.pluginsTagged) {
      const plugin2 = settings.pluginsTagged[pluginKey];
      const groupIndices = plugin2.groupInfo.groupIndices || [];
      if (groupIndices.includes(groupIndex)) {
        return true;
      }
    }
    return false;
  }
}
var getPluginsInGroup = (modal, groupNumber) => {
  const { plugin } = modal;
  const { settings } = plugin;
  if (modal instanceof QPSModal)
    return settings.allPluginsList.filter(
      (i) => {
        var _a;
        return ((_a = i.groupInfo.groupIndices) == null ? void 0 : _a.indexOf(groupNumber)) !== -1;
      }
    );
  else {
    const pluginsWithGroup = [];
    Object.keys(settings.pluginsTagged).forEach((pluginKey) => {
      const plugin2 = settings.pluginsTagged[pluginKey];
      const groupIndices = plugin2.groupInfo.groupIndices || [];
      if (groupIndices.includes(groupNumber)) {
        const matchingPlugin = settings.commPlugins.find(
          (plugin3) => plugin3.id === pluginKey
        );
        if (matchingPlugin) {
          pluginsWithGroup.push(matchingPlugin);
        }
      }
    });
    return pluginsWithGroup;
  }
};
function getIndexFromSelectedGroup(str) {
  if (str === "SelectGroup")
    return 0;
  else
    return parseInt(str.slice(-1));
}
function groupNameFromIndex(groups, index) {
  for (let key in groups) {
    if (key.endsWith(index.toString())) {
      return key;
    }
  }
  return null;
}
async function rmvAllGroupsFromPlugin(modal, pluginItem) {
  const { plugin } = modal;
  const { settings } = plugin;
  if ("repo" in pluginItem) {
    const itemID = pluginItem.id;
    const { pluginsTagged } = settings;
    const taggedItem = pluginsTagged[itemID];
    if (!taggedItem)
      return;
    delete pluginsTagged[itemID];
    await plugin.saveSettings();
    if (modal instanceof CPModal) {
      await plugin.saveSettings();
      await reOpenModal(modal);
    }
  } else {
    if (pluginItem.groupInfo) {
      pluginItem.groupInfo.groupIndices = [];
      await plugin.saveSettings();
      await reOpenModal(modal);
    }
  }
}
function createInput(el, currentValue) {
  if (el) {
    const input = document.createElement("input");
    input.type = "text";
    input.value = currentValue;
    el.replaceWith(input);
    input.focus();
    selectValue(input);
    return input;
  } else {
    return void 0;
  }
}
var pressDelay = (modal) => {
  modal.pressed = true;
  setTimeout(() => {
    modal.pressed = false;
  }, 1);
};
function getInstalled() {
  return Object.keys(this.app.plugins.manifests);
}
function isInstalled(item) {
  return getInstalled().includes(item.id);
}
async function reOpenModal(modal) {
  modal.searchInit = false;
  await modal.onOpen();
}

// src/community-plugins_modal.ts
var path = __toESM(require("path"));
var CPModal = class extends import_obsidian2.Modal {
  constructor(app2, plugin) {
    super(app2);
    this.plugin = plugin;
    this.searchTyping = true;
    this.isDblClick = false;
    this.pressed = false;
    this.searchInit = true;
    this.addHeader = (contentEl) => {
      const { plugin } = this;
      const { settings } = plugin;
      new import_obsidian2.DropdownComponent(contentEl).addOptions({
        all: `All(${settings.commPlugins.length})`,
        installed: `Installed(${getInstalled().length})`,
        notInstalled: `Not Installed(${settings.commPlugins.length - getInstalled().length})`,
        byGroup: `By Group`
      }).setValue(settings.filtersComm).onChange(async (value) => {
        settings.filtersComm = value;
        await plugin.saveSettings();
        await reOpenModal(this);
      });
      byGroupDropdowns(this, contentEl);
    };
    this.plugin = plugin;
  }
  container() {
    const { contentEl } = this;
    this.modalEl.addClass("community-plugins-modal");
    this.header = contentEl.createEl("div", {
      cls: "qps-community-header"
    });
    this.search = contentEl.createEl("div", {
      cls: "qps-community-search"
    });
    this.groups = contentEl.createEl("div", {
      cls: ["qps-community-groups", "qps-comm-group"]
    });
    this.hotkeysDesc = contentEl.createEl("p", { cls: "qps-hk-desc" });
    this.items = contentEl.createEl("div", { cls: "qps-community-items" });
    this.modalEl.addEventListener("mousemove", (event) => {
      this.mousePosition = { x: event.clientX, y: event.clientY };
    });
    document.addEventListener("keydown", async (event) => {
      await handleKeyDown(event, this);
    });
    this.modalEl.addEventListener("contextmenu", (evt) => {
      if (this.isDblClick)
        return;
      handleContextMenu(evt, this);
    });
    this.modalEl.addEventListener("dblclick", (evt) => {
      if (this.isDblClick)
        return;
      handleDblClick(evt, this);
    });
  }
  async onOpen() {
    const { plugin, contentEl } = this;
    const { settings } = plugin;
    if (this.searchInit)
      settings.search = "";
    else
      this.searchInit = true;
    await plugin.saveSettings();
    contentEl.empty();
    this.container();
    setGroupTitle(this, plugin, GroupsComm, settings.numberOfGroupsComm);
    this.addHeader(this.header);
    await addSearch(this, this.search, "Search community plugins");
    if (import_obsidian2.Platform.isDesktopApp) {
      searchCommDivButton(this, this.search);
    }
    this.addGroups(this, this.groups);
    if (settings.showHotKeys)
      this.setHotKeysdesc();
    await this.addItems();
  }
  addGroups(modal, contentEl) {
    const groups = Object.values(GroupsComm);
    for (let i = 1; i < groups.length; i++) {
      const groupKey = groups[i];
      contentEl.createEl(
        "span",
        {
          cls: "qps-group-span-container"
        },
        (cont) => {
          const preSpan = cont.createEl(
            "span",
            {
              cls: "qps-circle-title-group"
            },
            (el) => {
              circleCSSModif(this, el, i);
            }
          );
          const span = cont.createEl("span", {
            cls: "qps-groups-name",
            text: `${groupKey}`
          });
          const groupNumberText = `(<span class="shortcut-number">${i}</span>)`;
          span.insertAdjacentHTML("beforeend", groupNumberText);
        }
      );
    }
  }
  setHotKeysdesc() {
    const numberOfGroups = this.plugin.settings.numberOfGroupsComm;
    this.hotkeysDesc.createSpan(
      {
        text: `(1-${numberOfGroups})\u2795 (0)\u274C `
      },
      (el) => {
        el.createSpan({ text: "(g)" }, (el2) => {
          let gitHubIcon = el2.createSpan({ cls: "git-hub-icon" });
          (0, import_obsidian2.setIcon)(gitHubIcon, "github");
        });
        el.createSpan({
          text: ` (i,\u{1F5B1}\uFE0Fx2)Readme`
        });
      }
    );
  }
  async addItems() {
    const { plugin } = this;
    const { settings } = plugin;
    const { commPlugins: commPlugins2, pluginStats } = settings;
    const value = settings.search;
    let listItems = CPMmodeSort(this, commPlugins2);
    sortItemsByDownloads(listItems, pluginStats);
    listItems = doSearch(this, value, listItems);
    for (const item of listItems) {
      const itemContainer = this.items.createEl("div", {
        cls: "qps-comm-block"
      });
      itemContainer.createDiv(
        {
          cls: "qps-community-item-name",
          text: item.name
        },
        (el) => {
          if (isInstalled(item))
            el.createSpan({
              cls: "installed-span",
              text: "installed"
            });
          if (isEnabled(this, item.id)) {
            const span = el.createSpan({
              cls: "enabled-span"
            });
            (0, import_obsidian2.setIcon)(span, "power");
          }
        }
      );
      itemContainer.createDiv({
        cls: "qps-community-item-author",
        text: `By ${item.author} `
      });
      const pluginInfo = pluginStats[item.id];
      if (pluginInfo) {
        itemContainer.createDiv(
          {
            cls: "qps-community-item-downloads"
          },
          (el) => {
            el.createSpan({ cls: "downloads-span" }, (el2) => {
              const preSpan = el2.createSpan();
              const span = el2.createSpan({
                text: formatNumber(
                  pluginInfo.downloads,
                  1
                ).toString(),
                cls: "downloads-text-span"
              });
              addGroupCircles(this, span, item);
              (0, import_obsidian2.setIcon)(preSpan, "download-cloud");
            });
          }
        );
        const lastUpdated = new Date(pluginInfo.updated);
        const timeSinceUpdate = calculateTimeElapsed(lastUpdated);
        itemContainer.createDiv({
          cls: "qps-community-item-updated",
          text: `Updated ${timeSinceUpdate}`
        });
      }
      itemContainer.createDiv({
        cls: "qps-community-item-desc",
        text: item.description
      });
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
    document.removeEventListener("mousemove", (event) => {
      this.mousePosition = { x: event.clientX, y: event.clientY };
    });
    document.removeEventListener("keydown", async (event) => {
      await handleKeyDown(event, this);
    });
    this.modalEl.removeEventListener("contextmenu", (evt) => {
      if (this.isDblClick)
        return;
      handleContextMenu(evt, this);
    });
    this.modalEl.removeEventListener("dblclick", (evt) => {
      if (this.isDblClick)
        return;
      handleDblClick(evt, this);
    });
    this.plugin.getPluginsInfo();
    this.plugin.getLength();
    new QPSModal(this.app, this.plugin).open();
  }
};
async function fetchData(url) {
  try {
    const response = await fetch(url);
    const data = await response.json();
    if (data)
      return data;
  } catch (error) {
    return null;
  }
}
async function getReadMe(item) {
  const repo = item.repo;
  const repoURL = `https://api.github.com/repos/${repo}/contents/README.md`;
  try {
    const response = await fetch(repoURL);
    return await response.json();
  } catch (error) {
    console.warn("Error fetching ReadMe");
  }
  return null;
}
async function getManifest(item) {
  const repo = item.repo;
  const repoURL = `https://raw.githubusercontent.com/${repo}/master/manifest.json`;
  try {
    const response = await fetch(repoURL);
    return await response.json();
  } catch (error) {
    console.warn("Error fetching manifest");
  }
  return null;
}
function sortItemsByDownloads(listItems, pluginStats) {
  listItems.sort((a, b) => {
    const pluginAStats = pluginStats[a.id];
    const pluginBStats = pluginStats[b.id];
    if (pluginAStats && pluginBStats) {
      return pluginBStats.downloads - pluginAStats.downloads;
    }
    return 0;
  });
}
function CPMmodeSort(modal, listItems) {
  const { settings } = modal.plugin;
  const { filtersComm } = settings;
  if (filtersComm === "installed") {
    const installedPlugins = getInstalled();
    return listItems.filter((item) => installedPlugins.includes(item.id));
  } else if (filtersComm === "notInstalled") {
    const installedPlugins = getInstalled();
    return listItems.filter((item) => !installedPlugins.includes(item.id));
  } else if (filtersComm === "byGroup") {
    const groupIndex = getIndexFromSelectedGroup(
      settings.selectedGroup
    );
    if (groupIndex !== 0) {
      const groupedItems = listItems.filter((i) => {
        const { pluginsTagged } = settings;
        const taggedItem = pluginsTagged[i.id];
        if (taggedItem) {
          const { groupInfo } = taggedItem;
          const { groupIndices } = groupInfo;
          return (groupIndices == null ? void 0 : groupIndices.indexOf(groupIndex)) !== -1;
        } else
          return false;
      });
      return groupedItems;
    } else
      return listItems;
  } else {
    return listItems;
  }
}
function circleCSSModif(modal, el, groupIndex) {
  const { settings } = modal.plugin;
  const { color } = getEmojiForGroup(groupIndex);
  el.style.backgroundColor = color;
}
var handleKeyDown = async (event, modal) => {
  const elementFromPoint = getElementFromMousePosition(event, modal);
  const targetBlock = elementFromPoint == null ? void 0 : elementFromPoint.closest(
    ".qps-comm-block"
  );
  if (targetBlock) {
    const matchingItem = findMatchingItem(modal, targetBlock);
    if (matchingItem) {
      modal.searchTyping = false;
      await handleHotkeysCPM(
        modal,
        event,
        matchingItem
      );
    }
  } else {
    modal.searchTyping = true;
  }
};
var handleHotkeysCPM = async (modal, evt, pluginItem) => {
  if (modal.pressed) {
    return;
  }
  pressDelay(modal);
  const { plugin } = modal;
  const { settings } = plugin;
  const numberOfGroups = settings.numberOfGroupsComm;
  const KeyToSettingsMap = {
    g: async () => await openGitHubRepo(pluginItem),
    i: () => new ReadMeModal(plugin.app, modal, pluginItem).open()
  };
  const { pluginsTagged } = settings;
  const keyPressed = evt.key;
  const itemID = pluginItem.id;
  let taggedItem = pluginsTagged[itemID];
  if (!taggedItem) {
    pluginsTagged[itemID] = {
      groupInfo: { groupIndices: [] }
    };
  }
  taggedItem = pluginsTagged[itemID];
  const { groupInfo } = taggedItem;
  const { groupIndices } = groupInfo;
  const key = parseInt(keyPressed);
  if (key > 0 && key <= numberOfGroups) {
    if (groupIndices.length === 6)
      return;
    const index = groupIndices.indexOf(key);
    if (index === -1) {
      groupIndices.push(key);
      await plugin.saveSettings();
      await reOpenModal(modal);
    }
  } else if (keyPressed in KeyToSettingsMap) {
    KeyToSettingsMap[keyPressed]();
  } else if (keyPressed === "Delete" || keyPressed === "Backspace" || keyPressed === "0") {
    if (groupIndices.length === 1) {
      delete pluginsTagged[itemID];
      await plugin.saveSettings();
      await reOpenModal(modal);
    } else if (groupIndices.length > 1) {
      const menu = new import_obsidian2.Menu();
      menu.addItem(
        (item) => item.setTitle("Remove item group(s)").setDisabled(true).setDisabled(true)
      );
      menu.addSeparator();
      menu.addItem(
        (item) => item.setTitle("All").onClick(async () => {
          await rmvAllGroupsFromPlugin(modal, pluginItem);
        })
      );
      for (const groupIndex of groupIndices) {
        const { emoji } = getEmojiForGroup(groupIndex);
        menu.addItem(
          (item) => item.setTitle(`${emoji} group ${groupIndex}`).onClick(async () => {
            if (groupInfo) {
              groupInfo.groupIndices = removeItem(
                groupIndices,
                groupIndex
              );
              await plugin.saveSettings();
              await reOpenModal(modal);
            }
          })
        );
      }
      menu.showAtPosition(modal.mousePosition);
    }
  }
};
var addGroupCircles = (modal, el, item) => {
  const { settings } = modal.plugin;
  const key = item.id;
  const taggedItem = settings.pluginsTagged[key];
  if (!taggedItem)
    return;
  const indices = taggedItem.groupInfo.groupIndices;
  if (indices == null ? void 0 : indices.length) {
    if (indices.length < 3) {
      const content = getCirclesItem(indices);
      el.insertAdjacentHTML("afterend", content);
    }
    if (indices.length >= 3 && indices.length < 5) {
      const [valeur0, valeur1, ...part2] = indices;
      const part1 = [valeur0, valeur1];
      const content1 = getCirclesItem(part1);
      el.insertAdjacentHTML("afterend", content1);
      const content2 = getCirclesItem(part2);
      el.insertAdjacentHTML("afterend", content2);
    } else if (indices.length >= 5) {
      const [valeur0, valeur1, valeur2, valeur3, ...part3] = indices;
      const part1 = [valeur0, valeur1];
      const part2 = [valeur2, valeur3];
      const content1 = getCirclesItem(part1);
      el.insertAdjacentHTML("afterend", content1);
      const content2 = getCirclesItem(part2);
      el.insertAdjacentHTML("afterend", content2);
      const content3 = getCirclesItem(part3);
      el.insertAdjacentHTML("afterend", content3);
    }
  }
};
async function installFromList(modal, enable = false) {
  let properties = ["openFile"];
  let filePaths = window.electron.remote.dialog.showOpenDialogSync({
    title: "Pick json list file of plugins to install",
    properties,
    filters: ["JsonList", "json"]
  });
  if (filePaths && filePaths.length) {
    const contenu = (0, import_fs.readFileSync)(filePaths[0], "utf-8");
    try {
      const pluginList = JSON.parse(contenu);
      if (Array.isArray(pluginList)) {
        const plugins = modal.plugin.settings.commPlugins.filter(
          (plugin) => {
            return pluginList.includes(plugin.id);
          }
        );
        await installAllPluginsInGroup(modal, plugins, enable);
      } else {
        console.error("this file is not a JSON list.");
      }
    } catch (erreur) {
      console.error("Error reading JSON file: ", erreur);
    }
  }
}
async function getPluginsList(modal, enable = false) {
  const installed = getInstalled();
  let filePath = window.electron.remote.dialog.showSaveDialogSync({
    title: "Save installed plugins list as JSON",
    filters: [{ name: "JSON Files", extensions: ["json"] }]
  });
  if (filePath && filePath.length) {
    try {
      const jsonContent = JSON.stringify(installed, null, 2);
      (0, import_fs.writeFileSync)(filePath, jsonContent);
      new import_obsidian2.Notice(`${filePath} created`, 2500);
    } catch (error) {
      console.error("Error saving JSON file:", error);
    }
  }
}
async function installPluginFromOtherVault(modal, enable = false) {
  let dirPath = window.electron.remote.dialog.showOpenDialogSync({
    title: "Select your vault directory, you want plugins list from",
    properties: ["openDirectory"]
  });
  if (dirPath && dirPath.length) {
    const vaultPath = dirPath[0];
    const obsidianPath = path.join(vaultPath, ".obsidian");
    if (!(0, import_fs.existsSync)(obsidianPath)) {
      new import_obsidian2.Notice("Select a vault folder!", 2500);
      return;
    }
    const selectedVaultName = path.basename(vaultPath);
    const currentVaultName = modal.app.vault.getName();
    if (selectedVaultName === currentVaultName) {
      new import_obsidian2.Notice("You have selected the current vault!", 2500);
      return;
    }
    const pluginsPath = path.join(obsidianPath, "plugins");
    if (!(0, import_fs.existsSync)(pluginsPath)) {
      new import_obsidian2.Notice(
        "This vault doesn't contain any installed plugin!",
        2500
      );
      return;
    }
    const installedPlugins = [];
    const pluginFolders = (0, import_fs.readdirSync)(pluginsPath);
    for (const pluginFolder of pluginFolders) {
      const pluginFolderPath = path.join(pluginsPath, pluginFolder);
      const packageJsonPath = path.join(pluginFolderPath, "package.json");
      const manifestJsonPath = path.join(
        pluginFolderPath,
        "manifest.json"
      );
      const mainJsPath = path.join(pluginFolderPath, "main.js");
      if ((0, import_fs.existsSync)(packageJsonPath)) {
        continue;
      }
      if ((0, import_fs.existsSync)(manifestJsonPath) && (0, import_fs.existsSync)(mainJsPath)) {
        const manifestContent = (0, import_fs.readFileSync)(manifestJsonPath, "utf-8");
        const manifestData = JSON.parse(manifestContent);
        const pluginId = manifestData.id;
        installedPlugins.push(pluginId);
      }
    }
    if (!installedPlugins.length) {
      new import_obsidian2.Notice("Found no plugin to install", 2500);
      return;
    }
    const plugins = modal.plugin.settings.commPlugins.filter((plugin) => {
      return installedPlugins.includes(plugin.id);
    });
    await installAllPluginsInGroup(modal, plugins, enable);
  }
}

// src/secondary_modals.ts
var DescriptionModal = class extends import_obsidian3.Modal {
  constructor(app2, plugin, pluginItem) {
    super(app2);
    this.plugin = plugin;
    this.pluginItem = pluginItem;
    this.plugin = plugin;
    this.pluginItem = pluginItem;
  }
  onOpen() {
    const { contentEl, pluginItem } = this;
    contentEl.empty();
    contentEl.createEl("p", {
      text: pluginItem.name + " - v" + pluginItem.version
    }).createEl("p", {
      text: "author: " + pluginItem.author + ", url: " + (pluginItem.authorUrl ? "" : "null")
    }).createEl("a", {
      text: pluginItem.authorUrl,
      href: pluginItem.authorUrl
    });
    contentEl.createEl("p", { text: pluginItem.desc });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var ConfirmModal = class extends import_obsidian3.Modal {
  constructor(app2, message, callback, width, height) {
    super(app2);
    this.message = message;
    this.callback = callback;
    this.width = width;
    this.height = height;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    if (this.width) {
      this.modalEl.style.width = `${this.width}px`;
    }
    if (this.height) {
      this.modalEl.style.height = `${this.height}px`;
    }
    contentEl.createEl("p").setText(this.message);
    new import_obsidian3.Setting(this.contentEl).addButton((b) => {
      b.setIcon("checkmark").setCta().onClick(() => {
        this.callback(true);
        this.close();
      });
    }).addExtraButton(
      (b) => b.setIcon("cross").onClick(() => {
        this.callback(false);
        this.close();
      })
    );
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
async function openConfirmModal(app2, message, width, height) {
  return await new Promise((resolve) => {
    new ConfirmModal(
      app2,
      message,
      (confirmed) => {
        resolve(confirmed);
      },
      width != null ? width : void 0,
      height != null ? height : void 0
    ).open();
  });
}
async function confirm(message, width, height) {
  return await openConfirmModal(
    this.app,
    message,
    width != null ? width : void 0,
    height != null ? height : void 0
  );
}
var ReadMeModal = class extends import_obsidian3.Modal {
  constructor(app2, modal, pluginItem) {
    super(app2);
    this.modal = modal;
    this.pluginItem = pluginItem;
    this.scope = new import_obsidian3.Scope(this.app.scope);
    this.modal = modal;
    this.pluginItem = pluginItem;
    this.modalEl.addClass("read-me-modal");
    this.comp = new import_obsidian3.Component();
    this.comp.load();
  }
  async onOpen() {
    const { contentEl, pluginItem } = this;
    contentEl.empty();
    contentEl.createEl("p", {
      text: pluginItem.name,
      cls: "readme-title"
    }).createEl("p", {
      text: "By: " + pluginItem.author
    });
    const openRepo = contentEl.createDiv();
    new import_obsidian3.ButtonComponent(openRepo).setButtonText("GitHub Repo").onClick(async () => {
      await openGitHubRepo(pluginItem);
    });
    const divButtons = contentEl.createDiv({ cls: "read-me-buttons" });
    if (!isInstalled(pluginItem)) {
      new import_obsidian3.ButtonComponent(divButtons).setButtonText("Install").setCta().onClick(async () => {
        await installLatestPluginVersion(this.modal, pluginItem);
        new import_obsidian3.Notice(`${pluginItem.name} installed`, 2500);
        await this.onOpen();
      });
    } else {
      const manifests = this.app.plugins.manifests || {};
      let condition;
      if (!isEnabled(this.modal, manifests[pluginItem.id].id)) {
        new import_obsidian3.ButtonComponent(divButtons).setButtonText("Enable").onClick(async () => {
          await this.modal.app.plugins.enablePluginAndSave(pluginItem.id);
          await this.onOpen();
          condition = await getCommandCondition(
            this.modal,
            pluginItem
          );
          if (condition)
            await this.onOpen();
          new import_obsidian3.Notice(`${pluginItem.name} enabled`, 2500);
        });
      } else {
        const pluginSettings = await this.modal.app.setting.openTabById(pluginItem.id);
        if (pluginSettings) {
          new import_obsidian3.ButtonComponent(divButtons).setButtonText("Options").onClick(async () => {
            await openPluginSettings(
              this.modal,
              pluginItem
            );
          });
        }
        condition = await getHkeyCondition(this.modal, pluginItem);
        if (condition) {
          new import_obsidian3.ButtonComponent(divButtons).setButtonText("Hotkeys").onClick(async () => {
            await showHotkeysFor(this.modal, pluginItem);
          });
        }
        new import_obsidian3.ButtonComponent(divButtons).setButtonText("Disable").onClick(async () => {
          await this.modal.app.plugins.disablePluginAndSave(pluginItem.id);
          await this.onOpen();
          new import_obsidian3.Notice(`${pluginItem.name} disabled`, 2500);
        });
      }
      new import_obsidian3.ButtonComponent(divButtons).setButtonText("Uninstall").onClick(async () => {
        await this.modal.app.plugins.uninstallPlugin(
          pluginItem.id
        );
        await this.onOpen();
        new import_obsidian3.Notice(`${pluginItem.name} uninstalled`, 2500);
      });
    }
    const div = contentEl.createDiv({ cls: "qps-read-me" });
    const data = await getReadMe(pluginItem);
    const content = Buffer.from(data.content, "base64").toString("utf-8");
    const updatedContent = modifyGitHubLinks(content, pluginItem);
    import_obsidian3.MarkdownRenderer.render(this.app, updatedContent, div, "/", this.comp);
    this.modalEl.addEventListener("mousemove", (event) => {
      this.mousePosition = { x: event.clientX, y: event.clientY };
    });
    this.scope.register(["Ctrl"], "t", async () => {
      const selectedContent = getSelectedContent();
      if (!selectedContent) {
        new import_obsidian3.Notice("no selection", 4e3);
        return;
      }
      await translation(selectedContent);
    });
    this.modalEl.addEventListener("contextmenu", (event) => {
      event.preventDefault();
      const selectedContent = getSelectedContent();
      if (selectedContent) {
        const menu = new import_obsidian3.Menu();
        menu.addItem(
          (item) => item.setTitle("Copy Ctrl+C").onClick(async () => {
            await navigator.clipboard.writeText(selectedContent);
          })
        );
        menu.addItem(
          (item) => item.setTitle("translate").onClick(async () => {
            await translation(selectedContent);
          })
        );
        menu.showAtPosition(this.mousePosition);
      }
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
    this.comp.unload();
  }
};
function getSelectedContent() {
  const selection = window.getSelection();
  return selection == null ? void 0 : selection.toString();
}
function canTranslate() {
  return this.plugin.translator && this.plugin.translator.valid;
}
async function translate(text, from) {
  let to = "";
  const plugin = this.app.plugins.plugins.translate;
  if (!plugin) {
    new import_obsidian3.Notice(
      "install obsidian-translate and select a translator"
    );
    return;
  }
  if (!canTranslate) {
    new import_obsidian3.Notice("translator not valid. check your settings", 4e3);
    return;
  }
  const loaded_settings = await plugin.loadData();
  if (loaded_settings.target_language_preference === "last") {
    to = loaded_settings.last_used_target_languages[0];
  } else if (loaded_settings.target_language_preference === "specific") {
    to = loaded_settings.default_target_language;
  } else if (loaded_settings.target_language_preference === "display") {
    to = plugin.current_language;
  }
  return plugin.translator.translate(text, from, to);
}
async function translation(selectedContent) {
  const translated = await translate(selectedContent, "en");
  if (!translated)
    return;
  const translation2 = translated.translation;
  if (!translation2) {
    new import_obsidian3.Notice("translator not valid. check your settings", 4e3);
    return;
  }
  new TranslateModal(this.app, translation2).open();
}
var TranslateModal = class extends import_obsidian3.Modal {
  constructor(app2, message) {
    super(app2);
    this.message = message;
    this.modalEl.addClass("translate-modal");
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    const lines = this.message.split("\n");
    lines.forEach((line) => contentEl.createEl("p").setText(line));
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
function modifyGitHubLinks(content, pluginItem) {
  const regex = /!\[([^\]]*)\]\(([^)]*)\)/g;
  return content.replace(/\/blob\//g, "/raw/").replace(regex, (match, alt, url) => {
    if (!url.startsWith("http")) {
      if (url.startsWith(".")) {
        url = `https://github.com/${pluginItem.repo}/raw/HEAD${url.substr(1)}`;
      } else {
        url = `https://github.com/${pluginItem.repo}/raw/HEAD/${url}`;
      }
    }
    return `![${alt}](${url})`;
  });
}

// src/modal_components.ts
var import_obsidian4 = require("obsidian");
var mostSwitchedResetButton = (modal, contentEl) => {
  const { settings } = modal.plugin;
  if (settings.filters === Filters.MostSwitched && settings.allPluginsList.some((plugin) => plugin.switched !== 0)) {
    new import_obsidian4.ExtraButtonComponent(contentEl).setIcon("reset").setTooltip("Reset mostSwitched values").onClick(async () => {
      reset(modal);
      await reOpenModal(modal);
    });
  }
};
var byGroupDropdowns = (modal, contentEl) => {
  const { plugin } = modal;
  const { settings } = plugin;
  if (modal instanceof QPSModal && settings.filters === Filters.ByGroup) {
    getDropdownOptions(Groups, plugin.lengthAll);
  } else if (modal instanceof CPModal && settings.filtersComm === CommFilters.ByGroup) {
    getDropdownOptions(GroupsComm, settings.commPlugins.length);
  }
  function getDropdownOptions(groups, length) {
    const dropdownOptions = {};
    for (const groupKey in groups) {
      const groupIndex = getIndexFromSelectedGroup(groupKey);
      if (groupKey === "SelectGroup") {
        dropdownOptions[groupKey] = groups[groupKey] + `(${length})`;
      } else if (groupNotEmpty(groupIndex, modal)) {
        dropdownOptions[groupKey] = getEmojiForGroup(groupIndex).emoji + groups[groupKey];
      }
    }
    new import_obsidian4.DropdownComponent(contentEl).addOptions(dropdownOptions).setValue(settings.selectedGroup).onChange(async (value) => {
      settings.selectedGroup = value;
      await plugin.saveSettings();
      await reOpenModal(modal);
    });
  }
};
async function addSearch(modal, contentEl, placeholder) {
  const { plugin } = modal;
  const { settings } = plugin;
  new import_obsidian4.Setting(contentEl).addSearch(async (search) => {
    const actualValue = search.getValue();
    search.setValue(settings.search).setPlaceholder(placeholder).onChange(async (value) => {
      if (modal.searchTyping) {
        settings.search = value;
        modal.items.empty();
        modal.addItems();
      } else {
        value = actualValue;
      }
    });
  }).setClass("qps-search-component");
}
function doSearch(modal, value, pluginsList) {
  const lowerCaseValue = value.toLowerCase();
  return pluginsList.filter(
    (item) => [
      item.name,
      modal instanceof QPSModal ? "" : item.description,
      item.author
    ].some((prop) => prop.toLowerCase().includes(lowerCaseValue))
  );
}
var commButton = (modal, el) => {
  const { plugin } = modal;
  new import_obsidian4.ButtonComponent(el).setIcon("download-cloud").setCta().setTooltip(
    "community plugins: you can to tag plugins with groups, install by group..."
  ).buttonEl.addEventListener("click", (evt) => {
    modal.close();
    new CPModal(modal.app, plugin).open();
  });
};
var commOptionButton = (modal, el) => {
  const { plugin } = modal;
  new import_obsidian4.ButtonComponent(el).setIcon("list-end").setCta().setTooltip(
    "Install & enable plugins based on another Vault content or from a JSON list"
  ).buttonEl.addEventListener("click", (evt) => {
    const menu = new import_obsidian4.Menu();
    menu.addItem(
      (item) => item.setTitle("Install plugins based on another Vault").setIcon("book-copy").onClick(async () => {
        await installPluginFromOtherVault(modal);
      })
    );
    menu.addItem(
      (item) => item.setTitle("Install & enable plugins based on another Vault").setIcon("book-copy").onClick(async () => {
        await installPluginFromOtherVault(modal, true);
      })
    );
    menu.addSeparator();
    menu.addItem(
      (item) => item.setTitle("Save installed plugins list").setIcon("pen-square").onClick(async () => {
        await getPluginsList(modal, true);
      })
    );
    menu.addItem(
      (item) => item.setTitle("Install & enable plugins from json list").setIcon("list").onClick(async () => {
        await installFromList(modal, true);
      })
    );
    menu.addItem(
      (item) => item.setTitle("Install plugins from json list").setIcon("list").onClick(async () => {
        await installFromList(modal);
      })
    );
    menu.showAtMouseEvent(evt);
  });
};
var powerButton = (modal, el) => {
  const { plugin } = modal;
  const { settings } = plugin;
  new import_obsidian4.ButtonComponent(el).setIcon("power").setCta().setTooltip(
    "toggle plugins: you can disable some plugins and enable them later"
  ).buttonEl.addEventListener("click", (evt) => {
    const menu = new import_obsidian4.Menu();
    if (plugin.lengthEnabled === 1 && settings.wasEnabled.length === 0) {
      menu.addItem((item) => item.setTitle("No enabled plugins"));
    } else {
      menu.addItem(
        (item) => item.setTitle(
          settings.wasEnabled.length > 0 ? "Enable previous disabled plugins" : "Disable all plugins"
        ).setIcon(
          settings.wasEnabled.length > 0 ? "power" : "power-off"
        ).onClick(async () => {
          if (plugin.lengthEnabled > 1) {
            for (const i of settings.allPluginsList) {
              if (i.id === "quick-plugin-switcher")
                continue;
              if (i.enabled)
                settings.wasEnabled.push(i.id);
              await modal.app.plugins.disablePluginAndSave(i.id);
              i.enabled = false;
            }
            plugin.getLength();
            await reOpenModal(modal);
            await plugin.saveSettings();
            new import_obsidian4.Notice("All plugins disabled", 2500);
          } else if (settings.wasEnabled.length > 0) {
            for (const i of settings.wasEnabled) {
              const pluginToUpdate = settings.allPluginsList.find(
                (plugin2) => plugin2.id === i
              );
              if (pluginToUpdate) {
                await conditionalEnable(
                  modal,
                  pluginToUpdate
                );
                pluginToUpdate.enabled = true;
              }
            }
            plugin.getLength();
            await reOpenModal(modal);
            settings.wasEnabled = [];
            new import_obsidian4.Notice("All plugins re-enabled", 2500);
            await modal.plugin.saveSettings();
          }
        })
      );
      if (settings.wasEnabled.length > 0) {
        menu.addItem(
          (item) => item.setTitle("Skip re-enable").setIcon("reset").onClick(async () => {
            const confirmReset = await confirm(
              "reset to disable",
              300
            );
            if (confirmReset) {
              settings.wasEnabled = [];
              await modal.plugin.saveSettings();
              new import_obsidian4.Notice("Done", 2500);
            } else {
              new import_obsidian4.Notice("Operation cancelled", 2500);
            }
          })
        );
      }
      menu.addSeparator();
      menu.addItem(
        (item) => item.setTitle("Toggle enabled-plugins by group").setDisabled(true)
      );
      Object.keys(Groups).forEach((groupKey) => {
        if (groupKey === "SelectGroup")
          return;
        const groupValue = Groups[groupKey];
        const groupIndex = getIndexFromSelectedGroup(groupKey);
        const inGroup = settings.allPluginsList.filter((plugin2) => {
          var _a;
          return ((_a = plugin2.groupInfo.groupIndices) == null ? void 0 : _a.indexOf(
            groupIndex
          )) !== -1;
        });
        let previousWasEnabled = inGroup.filter(
          (i) => i.groupInfo.groupWasEnabled === true
        );
        if (inGroup.length > 0 && (inGroup.some((i) => i.enabled === true) || previousWasEnabled.length > 0)) {
          menu.addItem(
            (item) => item.setTitle(
              previousWasEnabled.length > 0 ? `Re-enable ${groupValue}` : groupValue
            ).setIcon(
              previousWasEnabled.length > 0 ? "power" : "power-off"
            ).onClick(async () => {
              if (previousWasEnabled.length === 0) {
                const toDisable = inGroup.filter((i) => i.enabled === true).map(async (i) => {
                  i.groupInfo.groupWasEnabled = true;
                  await modal.app.plugins.disablePluginAndSave(
                    i.id
                  );
                  i.enabled = false;
                });
                await Promise.all(toDisable);
                if (toDisable) {
                  plugin.getLength();
                  await reOpenModal(modal);
                  new import_obsidian4.Notice(
                    "All plugins disabled",
                    2500
                  );
                  await modal.plugin.saveSettings();
                }
              } else {
                for (const i of previousWasEnabled) {
                  await conditionalEnable(modal, i);
                  i.enabled = true;
                  i.switched++;
                }
                previousWasEnabled.map((plugin2) => {
                  plugin2.groupInfo.groupWasEnabled = false;
                });
                plugin.getLength();
                await reOpenModal(modal);
                new import_obsidian4.Notice(
                  "All plugins re-enabled",
                  2500
                );
              }
            })
          );
          if (previousWasEnabled.length > 0) {
            menu.addItem(
              (item) => item.setTitle("Skip re-enable").setIcon("reset").onClick(async () => {
                const confirmReset = await confirm(
                  "skip re-enable ?",
                  200
                );
                if (confirmReset) {
                  previousWasEnabled.map((plugin2) => {
                    plugin2.groupInfo.groupWasEnabled = false;
                  });
                  await modal.plugin.saveSettings();
                  new import_obsidian4.Notice("Done", 2500);
                } else {
                  new import_obsidian4.Notice(
                    "Operation cancelled",
                    2500
                  );
                }
              })
            );
          }
        }
      });
    }
    menu.showAtMouseEvent(evt);
  });
};
var modeSort = (plugin, listItems) => {
  const { settings } = plugin;
  if (plugin.reset) {
    const allPluginsList = settings.allPluginsList;
    allPluginsList.forEach((i) => {
      i.switched = 0;
    });
    plugin.reset = false;
  }
  if (settings.filters === Filters.EnabledFirst) {
    const enabledItems = listItems.filter((i) => i.enabled);
    const disabledItems = listItems.filter((i) => !i.enabled);
    sortByName(enabledItems);
    sortByName(disabledItems);
    listItems = [...enabledItems, ...disabledItems];
  } else if (settings.filters === Filters.ByGroup) {
    const groupIndex = getIndexFromSelectedGroup(
      settings.selectedGroup
    );
    if (groupIndex !== 0) {
      const groupedItems = listItems.filter((i) => {
        var _a;
        return ((_a = i.groupInfo.groupIndices) == null ? void 0 : _a.indexOf(groupIndex)) !== -1;
      });
      listItems = groupedItems;
      sortByName(listItems);
    } else {
      sortByName(listItems);
    }
  } else if (settings.filters === Filters.MostSwitched) {
    sortByName(listItems);
    sortSwitched(listItems);
  } else {
    sortByName(listItems);
  }
  return listItems;
};
var editGroupName = (modal, span, groupNumber) => {
  var _a, _b;
  const { plugin } = modal;
  const { settings } = plugin;
  const currentValue = (modal instanceof CPModal ? ((_a = settings.groupsComm[groupNumber]) == null ? void 0 : _a.name) || "" : (_b = settings.groups[groupNumber]) == null ? void 0 : _b.name) || "";
  const updateGroupName = (value) => {
    if (modal instanceof CPModal) {
      settings.groupsComm[groupNumber].name = value || GroupsComm[groupNumber];
      span.textContent = settings.groupsComm[groupNumber].name;
    } else {
      settings.groups[groupNumber].name = value || Groups[groupNumber];
      span.textContent = settings.groups[groupNumber].name;
    }
  };
  const handleBlurOrEnter = () => {
    setTimeout(async () => {
      if (!modal.isDblClick && input) {
        updateGroupName(input.value);
        if (modal instanceof CPModal) {
          await reOpenModal(modal);
        } else {
          await reOpenModal(modal);
        }
      }
    }, 200);
  };
  const input = createInput(span, currentValue);
  if (input) {
    input.addEventListener("blur", handleBlurOrEnter);
    input.addEventListener("keydown", (event) => {
      if (event.key === "Enter") {
        handleBlurOrEnter();
      }
    });
  }
};
var itemToggleClass = (modal, pluginItem, itemContainer) => {
  const { settings } = modal.plugin;
  if (pluginItem.id === "quick-plugin-switcher") {
    itemContainer.toggleClass("qps-quick-plugin-switcher", true);
  }
  if (pluginItem.desktopOnly === true) {
    itemContainer.addClass("qps-desktop-only");
  }
  if (settings.filters === Filters.MostSwitched && pluginItem.switched !== 0) {
    itemContainer.toggleClass("qps-most-switched", true);
  }
  if (pluginItem.delayed) {
    itemContainer.toggleClass("toggle-bullet-color", true);
    itemContainer.style.setProperty(
      "--bullet-content",
      `"${pluginItem.time}"`
    );
  }
};
function hasKeyStartingWith(obj, prefix) {
  for (const key in obj) {
    if (key.startsWith(prefix)) {
      return true;
    }
  }
  return false;
}
var itemTextComponent = (pluginItem, itemContainer) => {
  let customValue = pluginItem.name;
  if (pluginItem.desktopOnly) {
    customValue = "\u1D30" + customValue;
  }
  const text = new import_obsidian4.TextComponent(itemContainer).setValue(customValue).inputEl;
  return text;
};
function addRemoveItemGroupMenuItems(modal, submenu, plugin, pluginItem) {
  const { settings } = plugin;
  Object.keys(Groups).forEach((groupKey) => {
    var _a;
    const { lengthGroup, groupIndex, groupValue } = getGroupIndexLength(
      modal,
      groupKey
    );
    const getGroup = ((_a = pluginItem.groupInfo.groupIndices) == null ? void 0 : _a.indexOf(groupIndex)) !== -1;
    if (groupKey !== "SelectGroup" && lengthGroup && getGroup) {
      submenu.addItem((subitem) => {
        subitem.setTitle(`${groupValue}`).onClick(async () => {
          for (const index of pluginItem.groupInfo.groupIndices) {
            if (index === groupIndex) {
              removeItem(
                pluginItem.groupInfo.groupIndices,
                index
              );
              await plugin.saveSettings();
              if (!groupNotEmpty(groupIndex, modal)) {
                settings.selectedGroup = "SelectGroup";
              }
              break;
            }
          }
          await reOpenModal(modal);
        });
      });
    }
  });
}
var getGroupIndexLength = (modal, groupKey) => {
  const groupIndex = getIndexFromSelectedGroup(groupKey);
  const { settings } = modal.plugin;
  let lengthGroup, groupValue;
  if (modal instanceof QPSModal) {
    lengthGroup = settings.allPluginsList.filter(
      (i) => {
        var _a;
        return ((_a = i.groupInfo.groupIndices) == null ? void 0 : _a.indexOf(groupIndex)) !== -1;
      }
    ).length;
    groupValue = Groups[groupKey];
  } else {
    lengthGroup = Object.keys(settings.pluginsTagged).filter((id) => {
      const plugin = settings.pluginsTagged[id];
      const groupIndices = plugin.groupInfo.groupIndices;
      return (groupIndices == null ? void 0 : groupIndices.indexOf(groupIndex)) !== -1;
    }).length;
    groupValue = GroupsComm[groupKey];
  }
  return { groupIndex, lengthGroup, groupValue };
};
function addRemoveGroupMenuItems(modal, submenu, groupNumber) {
  const { plugin } = modal;
  const { settings } = plugin;
  let groupName;
  if (modal instanceof QPSModal) {
    groupName = groupNameFromIndex(Groups, groupNumber);
  } else {
    groupName = groupNameFromIndex(GroupsComm, groupNumber);
  }
  const { lengthGroup, groupValue } = getGroupIndexLength(modal, groupName);
  if (groupName !== "SelectGroup" && lengthGroup) {
    submenu.addItem((subitem) => {
      subitem.setTitle(`${groupValue}`).onClick(async () => {
        var _a, _b;
        let pluginsRemoved = false;
        if (modal instanceof QPSModal) {
          for (const i of settings.allPluginsList) {
            const index = (_a = i.groupInfo.groupIndices) == null ? void 0 : _a.indexOf(groupNumber);
            if (index !== -1) {
              (_b = i.groupInfo.groupIndices) == null ? void 0 : _b.splice(index, 1);
              pluginsRemoved = true;
            }
          }
        } else {
          const taggedItem = settings.pluginsTagged;
          Object.keys(taggedItem).forEach((id) => {
            const plugin2 = taggedItem[id];
            const groupIndices = plugin2.groupInfo.groupIndices;
            plugin2.groupInfo.groupIndices = groupIndices.filter(
              (index) => index !== groupNumber
            );
            pluginsRemoved = true;
          });
        }
        await plugin.saveSettings();
        await reOpenModal(modal);
        if (pluginsRemoved) {
          new import_obsidian4.Notice(`All plugins removed from ${groupValue}`, 2500);
        } else {
          new import_obsidian4.Notice(`No plugins found in ${groupValue} group`, 2500);
        }
      });
    });
  }
}
var addToGroupSubMenu = (submenu, pluginItem, modal) => {
  Object.entries(Groups).forEach(([key, value]) => {
    const groupIndices = pluginItem.groupInfo.groupIndices;
    const groupIndex = getIndexFromSelectedGroup(key);
    if (key !== "SelectGroup") {
      submenu.addItem(
        (item) => item.setTitle(value).setDisabled(groupIndices.indexOf(groupIndex) !== -1).onClick(async () => {
          if (groupIndices.length === 6)
            return;
          groupIndices == null ? void 0 : groupIndices.push(groupIndex);
          await reOpenModal(modal);
        })
      );
    }
  });
};
var pluginFeatureSubmenu = async (submenu, pluginItem, modal) => {
  submenu.addItem(
    (item) => item.setTitle("Plugin infos (i)").setIcon("text").onClick(() => {
      new DescriptionModal(
        modal.plugin.app,
        modal.plugin,
        pluginItem
      ).open();
    })
  );
  submenu.addItem(
    (item) => item.setTitle("Plugin github (g)").setIcon("github").onClick(async () => {
      await openGitHubRepo(pluginItem);
    })
  );
  const pluginSettings = modal.app.setting.openTabById(
    pluginItem.id
  );
  submenu.addSeparator();
  submenu.addItem(
    (item) => item.setTitle("Plugin settings (s)").setIcon("settings").setDisabled(!pluginSettings).onClick(async () => {
      await openPluginSettings(modal, pluginSettings);
    })
  );
  const condition = await getHkeyCondition(modal, pluginItem);
  submenu.addItem(
    (item) => item.setTitle("Modify hotkeys (h)").setIcon("plus-circle").setDisabled(!condition).onClick(async () => {
      await showHotkeysFor(modal, pluginItem);
    })
  );
};
async function openPluginSettings(modal, pluginItem) {
  const pluginSettings = modal.app.setting.openTabById(
    pluginItem.id
  );
  if (!pluginSettings) {
    new import_obsidian4.Notice("No settings on this plugin", 2500);
    return;
  }
  await modal.app.setting.open();
  await (pluginSettings == null ? void 0 : pluginSettings.display());
}
var showHotkeysFor = async function(modal, pluginItem) {
  const condition = await getHkeyCondition(modal, pluginItem);
  if (!condition) {
    new import_obsidian4.Notice("No HotKeys on this plugin", 2500);
    return;
  }
  await this.app.setting.open();
  await this.app.setting.openTabById("hotkeys");
  const tab = await this.app.setting.activeTab;
  tab.searchComponent.inputEl.value = pluginItem.name + ":";
  tab.updateHotkeyVisibility();
  tab.searchComponent.inputEl.blur();
};
var getCommandCondition = async function(modal, pluginItem) {
  var _a, _b;
  const pluginCommands = await ((_b = (_a = modal.app.setting.openTabById(
    pluginItem.id
  )) == null ? void 0 : _a.app) == null ? void 0 : _b.commands.commands);
  return pluginCommands;
};
var getHkeyCondition = async function(modal, pluginItem) {
  var _a, _b;
  const pluginCommands = await ((_b = (_a = modal.app.setting.openTabById(
    "command-palette"
  )) == null ? void 0 : _a.app) == null ? void 0 : _b.commands.commands);
  return hasKeyStartingWith(pluginCommands, pluginItem.id);
};
async function openGitHubRepo(plugin) {
  if ("repo" in plugin) {
    const repoURL = `https://github.com/${plugin.repo}`;
    window.open(repoURL, "_blank");
  } else {
    try {
      const response = await fetch(
        "https://raw.githubusercontent.com/obsidianmd/obsidian-releases/master/community-plugins.json"
      );
      const pluginsData = await response.json();
      const pluginData = pluginsData.find(
        (item) => item.id === plugin.id
      );
      if (pluginData && pluginData.repo) {
        const repoURL = `https://github.com/${pluginData.repo}`;
        window.open(repoURL, "_blank");
      } else {
        console.debug("Repo not found for the plugin.");
        try {
          const repoURL = `https://github.com/${plugin.author}/${plugin.id}`;
          window.open(repoURL, "_blank");
        } catch (e) {
          const repoURL = `https://github.com/${plugin.author}`;
          window.open(repoURL, "_blank");
          console.debug("Repo not found for the plugin.");
        }
      }
    } catch (error) {
      console.error("Error fetching plugin data:", error);
    }
  }
}
var searchDivButtons = (modal, contentEl) => {
  const span = contentEl.createEl(
    "span",
    {
      cls: "qps-toggle-plugins"
    },
    (el) => {
      commButton(modal, el);
      powerButton(modal, el);
    }
  );
};
var searchCommDivButton = (modal, contentEl) => {
  const span = contentEl.createEl(
    "span",
    {
      cls: "qps-toggle-plugins"
    },
    (el) => {
      commOptionButton(modal, el);
    }
  );
};
function handleDblClick(evt, modal) {
  var _a;
  const elementFromPoint = getElementFromMousePosition(evt, modal);
  const targetGroup = elementFromPoint == null ? void 0 : elementFromPoint.closest(
    ".qps-groups-name"
  );
  const targetBlock = elementFromPoint == null ? void 0 : elementFromPoint.closest(
    ".qps-comm-block"
  );
  if (targetGroup) {
    const groupName = targetGroup.textContent;
    const groupNumber = parseInt(
      (_a = groupName == null ? void 0 : groupName.match(/\((\d+)\)$/)) == null ? void 0 : _a[1]
    );
    editGroupName(modal, targetGroup, groupNumber);
  }
  if (targetBlock) {
    const matchingItem = findMatchingItem(modal, targetBlock);
    if (matchingItem) {
      new ReadMeModal(
        modal.plugin.app,
        modal,
        matchingItem
      ).open();
    }
  }
}
function handleContextMenu(evt, modal) {
  var _a;
  const elementFromPoint = getElementFromMousePosition(evt, modal);
  let targetBlock, targetGroup;
  targetGroup = elementFromPoint == null ? void 0 : elementFromPoint.closest(".qps-groups-name");
  if (!targetGroup) {
    if (modal instanceof QPSModal) {
      targetBlock = elementFromPoint == null ? void 0 : elementFromPoint.closest(
        ".qps-item-line"
      );
    } else {
      targetBlock = elementFromPoint == null ? void 0 : elementFromPoint.closest(
        ".qps-comm-block"
      );
    }
  }
  const groupName = targetGroup == null ? void 0 : targetGroup.textContent;
  const groupNumber = parseInt((_a = groupName == null ? void 0 : groupName.match(/\((\d+)\)$/)) == null ? void 0 : _a[1]);
  if (targetGroup) {
    groupMenu(evt, modal, groupNumber, targetGroup);
  }
  if (targetBlock) {
    if (modal instanceof QPSModal) {
      const matchingItem = findMatchingItem(modal, targetBlock);
      if (matchingItem) {
        contextMenuQPS(evt, modal, matchingItem);
      }
    } else {
      const matchingItem = findMatchingItem(modal, targetBlock);
      if (matchingItem) {
        contextMenuCPM(evt, modal, matchingItem);
      }
    }
  }
}
function contextMenuCPM(evt, modal, matchingItem) {
  evt.preventDefault();
  const menu = new import_obsidian4.Menu();
  menu.addItem((item) => {
    item.setTitle("Install plugin").setDisabled(isInstalled(matchingItem)).setIcon("log-in").onClick(async () => {
      await installLatestPluginVersion(modal, matchingItem);
      await reOpenModal(modal);
    });
  });
  menu.addItem((item) => {
    const isenabled = isEnabled(modal, matchingItem.id);
    item.setTitle(isenabled ? "Disable plugin" : "Enable plugin").setDisabled(!isInstalled(matchingItem)).setIcon(isenabled ? "poweroff" : "power").onClick(async () => {
      isEnabled(modal, matchingItem.id) ? await modal.app.plugins.disablePluginAndSave(
        matchingItem.id
      ) : await modal.app.plugins.enablePluginAndSave(
        matchingItem.id
      );
      const msg = isenabled ? "disabled" : "enabled";
      new import_obsidian4.Notice(`${matchingItem.name} ${msg}`, 2500);
    });
  });
  menu.addItem((item) => {
    item.setTitle("Uninstall plugin").setDisabled(!isInstalled(matchingItem)).setIcon("log-out").onClick(async () => {
      await this.app.plugins.uninstallPlugin(matchingItem.id);
      new import_obsidian4.Notice(`${matchingItem.name} uninstalled`, 2500);
      await reOpenModal(modal);
    });
  });
  menu.showAtMouseEvent(evt);
}
function contextMenuQPS(evt, modal, matchingItem) {
  const { plugin } = modal;
  const menu = new import_obsidian4.Menu();
  if (import_obsidian4.Platform.isDesktopApp) {
    menu.addItem(
      (item) => item.setTitle("Plugin folder (f)").setIcon("folder-open").onClick(async () => {
        await openDirectoryInFileManager(modal, matchingItem);
      })
    );
  }
  menu.addItem(async (item) => {
    item.setTitle("Plugin features").setIcon("package-plus");
    const submenu = item.setSubmenu();
    await pluginFeatureSubmenu(submenu, matchingItem, modal);
  });
  if (isInstalled(matchingItem)) {
    menu.addItem((item) => {
      item.setTitle("Uninstall plugin").setIcon("log-out").onClick(async () => {
        await this.app.plugins.uninstallPlugin(matchingItem.id);
        new import_obsidian4.Notice(`${matchingItem.name} uninstalled`, 2500);
        modal.plugin.getPluginsInfo();
        modal.plugin.getLength();
        await reOpenModal(modal);
      });
    });
  }
  if (matchingItem.id !== "quick-plugin-switcher") {
    menu.addSeparator();
    menu.addItem((item) => {
      item.setTitle("Add to group").setIcon("user");
      const submenu = item.setSubmenu();
      addToGroupSubMenu(submenu, matchingItem, modal);
    });
    menu.addItem((item) => {
      item.setTitle("Remove from group").setIcon("user-minus");
      const submenu = item.setSubmenu();
      submenu.addItem((subitem) => {
        subitem.setTitle("All groups").setDisabled(
          matchingItem.groupInfo.groupIndices.length === 0
        ).onClick(async () => {
          matchingItem.groupInfo.groupIndices;
          await rmvAllGroupsFromPlugin(modal, matchingItem);
        });
      });
      addRemoveItemGroupMenuItems(modal, submenu, plugin, matchingItem);
    });
  }
  menu.showAtMouseEvent(evt);
}
function getElementFromMousePosition(evt, modal) {
  if (modal.mousePosition) {
    const elementFromPoint = document.elementFromPoint(
      modal.mousePosition.x,
      modal.mousePosition.y
    );
    return elementFromPoint;
  }
  return null;
}
var groupMenu = (evt, modal, groupNumber, span) => {
  if (modal instanceof QPSModal && span) {
    groupMenuQPS(evt, modal, groupNumber, span);
  } else {
    groupMenuCPM(evt, modal, groupNumber);
  }
};
var groupMenuQPS = (evt, modal, groupNumber, span) => {
  const { plugin } = modal;
  const { settings } = plugin;
  const inGroup = getPluginsInGroup(modal, groupNumber);
  const menu = new import_obsidian4.Menu();
  menu.addItem(
    (item) => item.setTitle("Delay group").onClick(() => {
      const currentValue = (settings.groups[groupNumber].time || 0).toString();
      const input = createInput(span, currentValue);
      if (!input)
        return;
      const handleBlurOrEnter = () => {
        setTimeout(async () => {
          if (!modal.isDblClick) {
            const value = parseInt(input.value) || 0;
            settings.groups[groupNumber].time = value;
            span.textContent = `${value}`;
            if (modal instanceof CPModal) {
              await reOpenModal(modal);
            } else if (modal instanceof QPSModal) {
              await reOpenModal(modal);
            }
          }
        }, 100);
      };
      input.addEventListener("blur", handleBlurOrEnter);
      input.addEventListener("keydown", (event) => {
        if (event.key === "Enter") {
          handleBlurOrEnter();
        }
      });
    })
  );
  menu.addItem(
    (item) => item.setTitle("Apply").setDisabled(
      !inGroup.length || settings.groups[groupNumber].time === 0
    ).onClick(async () => {
      for (const plugin2 of inGroup) {
        plugin2.time = settings.groups[groupNumber].time;
        plugin2.delayed = true;
        settings.groups[groupNumber].applied = true;
        if (plugin2.enabled) {
          await modal.app.plugins.disablePluginAndSave(
            plugin2.id
          );
          await modal.app.plugins.enablePlugin(
            plugin2.id
          );
        }
        modal.plugin.saveSettings();
        await reOpenModal(modal);
      }
    })
  );
  menu.addItem(
    (item) => item.setTitle("Reset").setDisabled(
      !inGroup.length || settings.groups[groupNumber].time === 0
    ).onClick(async () => {
      for (const plugin2 of inGroup) {
        plugin2.time = 0;
        plugin2.delayed = false;
        settings.groups[groupNumber].applied = false;
        if (plugin2.enabled) {
          await modal.app.plugins.enablePluginAndSave(
            plugin2.id
          );
        }
        await reOpenModal(modal);
      }
      plugin.saveSettings();
    })
  );
  menu.addSeparator();
  const toEnable = inGroup.filter((i) => i.enabled === false);
  menu.addItem(
    (item) => item.setTitle("Enable all plugins in group").setDisabled(!inGroup.length || !toEnable.length).onClick(async () => {
      if (toEnable) {
        await Promise.all(
          toEnable.map(async (i) => {
            conditionalEnable(modal, i);
            i.enabled = true;
            modal.plugin.saveSettings();
          })
        );
        plugin.getLength();
        new import_obsidian4.Notice("All plugins enabled.", 2500);
        await modal.plugin.saveSettings();
        await reOpenModal(modal);
      }
    })
  );
  const toDisable = inGroup.filter((i) => i.enabled === true);
  menu.addItem(
    (item) => item.setTitle("Disable all plugins in group").setDisabled(!inGroup.length || !toDisable.length).onClick(async () => {
      if (toDisable) {
        await Promise.all(
          toDisable.map(async (i) => {
            modal.app.plugins.disablePluginAndSave(
              i.id
            );
            i.enabled = false;
          })
        );
        plugin.getLength();
        new import_obsidian4.Notice("All plugins disabled.", 2500);
        await modal.plugin.saveSettings();
        await reOpenModal(modal);
      }
    })
  );
  menu.addSeparator();
  createClearGroupsMenuItem(modal, menu, groupNumber);
  menu.showAtMouseEvent(evt);
};
var groupMenuCPM = (evt, modal, groupNumber) => {
  const menu = new import_obsidian4.Menu();
  menu.addItem((item) => {
    item.setTitle("Install & enable in group");
    item.onClick(async () => {
      const inGroup = getPluginsInGroup(
        modal,
        groupNumber
      );
      if (!inGroup.length)
        return;
      await installAllPluginsInGroup(modal, inGroup, true);
    });
  });
  menu.addItem((item) => {
    item.setTitle("Install plugins in group");
    item.onClick(async () => {
      const inGroup = getPluginsInGroup(
        modal,
        groupNumber
      );
      if (!inGroup.length)
        return;
      await installAllPluginsInGroup(modal, inGroup);
    });
  });
  menu.addItem((item) => {
    item.setTitle("Uninstall plugins in group");
    item.onClick(async () => {
      await uninstallAllPluginsInGroup(modal, groupNumber);
    });
  });
  menu.addSeparator();
  createClearGroupsMenuItem(modal, menu, groupNumber);
  menu.showAtMouseEvent(evt);
};
async function uninstallAllPluginsInGroup(modal, groupNumber) {
  const inGroup = getPluginsInGroup(modal, groupNumber);
  if (!inGroup.length)
    return;
  for (const plugin of inGroup) {
    if (!isInstalled(plugin))
      continue;
    await this.app.plugins.uninstallPlugin(plugin.id);
    new import_obsidian4.Notice(`${plugin.name} uninstalled`, 2500);
  }
  await reOpenModal(modal);
}
async function installAllPluginsInGroup(modal, pluginList, enable = false) {
  for (const plugin of pluginList) {
    if (isInstalled(plugin)) {
      new import_obsidian4.Notice(`${plugin.name} already installed`, 2500);
      continue;
    }
    await installLatestPluginVersion(modal, plugin);
    if (enable) {
      await modal.app.plugins.enablePluginAndSave(plugin.id);
      new import_obsidian4.Notice(`${plugin.name} enabled`, 2500);
    }
  }
  await reOpenModal(modal);
}
var findMatchingItem = (modal, targetBlock) => {
  var _a;
  if (modal instanceof QPSModal) {
    let itemName = targetBlock.children[1].value;
    if (itemName.startsWith("\u1D30")) {
      itemName = itemName.substring(1);
    }
    const matchingItem = modal.plugin.settings.allPluginsList.find(
      (item) => item.name === itemName
    );
    return matchingItem;
  } else {
    const itemName = (_a = targetBlock.firstChild) == null ? void 0 : _a.textContent;
    const cleanItemName = itemName == null ? void 0 : itemName.replace(/installed$/, "").trim();
    const matchingItem = modal.plugin.settings.commPlugins.find(
      (item) => item.name === cleanItemName
    );
    return matchingItem;
  }
};
var createClearGroupsMenuItem = (modal, menu, groupNumber) => {
  menu.addItem((item) => {
    const { plugin } = modal;
    item.setTitle("Clear group(s)").setIcon("user-minus");
    const submenu = item.setSubmenu();
    addRemoveGroupMenuItems(modal, submenu, groupNumber);
    submenu.addSeparator();
    submenu.addItem((subitem) => {
      subitem.setTitle("All groups").onClick(async () => {
        const confirmReset = await confirm(
          "Detach all groups from all plugins?",
          300
        );
        if (confirmReset) {
          if (modal instanceof QPSModal) {
            for (const i of plugin.settings.allPluginsList) {
              i.groupInfo.groupIndices = [];
            }
            await plugin.saveSettings();
            await reOpenModal(modal);
            new import_obsidian4.Notice(`All groups empty`, 2500);
          } else {
            const { settings } = modal.plugin;
            let { pluginsTagged, commPlugins: commPlugins2 } = settings;
            for (const item2 of commPlugins2) {
              delete pluginsTagged[item2.id];
            }
            await modal.plugin.saveSettings();
            await reOpenModal(modal);
            new import_obsidian4.Notice(`All groups empty`, 2500);
          }
        } else {
          new import_obsidian4.Notice("Operation cancelled", 2500);
        }
      });
    });
  });
};
async function installLatestPluginVersion(modal, plugin) {
  const pluginInfo = modal.plugin.settings.pluginStats[plugin.id];
  let latestVersion = null;
  for (const version in pluginInfo) {
    if (/^(v?\d+\.\d+\.\d+)$/.test(version)) {
      if (!latestVersion || version > latestVersion) {
        latestVersion = version;
      }
    }
  }
  if (!latestVersion) {
    console.debug("no last version?");
    return;
  }
  const manifest = await getManifest(plugin);
  await this.app.plugins.installPlugin(plugin.repo, latestVersion, manifest);
}

// src/main_modal.ts
var QPSModal = class extends import_obsidian5.Modal {
  constructor(app2, plugin) {
    super(app2);
    this.plugin = plugin;
    this.searchTyping = true;
    this.isDblClick = false;
    this.pressed = false;
    this.searchInit = true;
    this.addHeader = (contentEl) => {
      const { plugin } = this;
      const { settings } = plugin;
      new import_obsidian5.DropdownComponent(contentEl).addOptions({
        all: `All(${plugin.lengthAll})`,
        enabled: `Enabled(${plugin.lengthEnabled})`,
        disabled: `Disabled(${plugin.lengthDisabled})`,
        enabledFirst: `Enabled First(${plugin.lengthAll})`,
        mostSwitched: `Most Switched(${plugin.lengthAll})`,
        byGroup: `By Group`
      }).setValue(settings.filters).onChange(async (value) => {
        settings.filters = value;
        await plugin.saveSettings();
        await reOpenModal(this);
      });
      mostSwitchedResetButton(this, contentEl);
      byGroupDropdowns(this, contentEl);
    };
    this.addDelay = async (pluginItem, input) => {
      pluginItem.delayed = true;
      pluginItem.time = parseInt(input.value) || 0;
      if (pluginItem.time === 0) {
        pluginItem.delayed = false;
      }
      if (pluginItem.delayed && pluginItem.enabled) {
        delayedReEnable(this, pluginItem);
      }
      await this.plugin.saveSettings();
      await reOpenModal(this);
    };
    this.plugin = plugin;
  }
  container() {
    const { contentEl } = this;
    this.modalEl.addClass("qps-modal");
    this.header = contentEl.createEl("div", {
      cls: "qps-header"
    });
    this.search = contentEl.createEl("div", { cls: "qps-search" });
    this.groups = contentEl.createEl("div", { cls: "qps-groups" });
    this.hotkeysDesc = contentEl.createEl("p", { cls: "qps-hk-desc" });
    this.items = contentEl.createEl("div", { cls: "qps-items" });
    this.modalEl.addEventListener("mousemove", (event) => {
      this.mousePosition = { x: event.clientX, y: event.clientY };
    });
    document.addEventListener("keydown", (event) => {
      handleKeyDown2(event, this);
    });
    this.modalEl.addEventListener("contextmenu", (evt) => {
      if (this.isDblClick)
        return;
      handleContextMenu(evt, this);
    });
    this.modalEl.addEventListener("dblclick", (evt) => {
      if (this.isDblClick)
        return;
      handleDblClick(evt, this);
    });
  }
  async onOpen() {
    const { plugin, contentEl } = this;
    const { settings } = plugin;
    if (this.searchInit)
      settings.search = "";
    else
      this.searchInit = true;
    contentEl.empty();
    this.container();
    setGroupTitle(this, plugin, Groups, settings.numberOfGroups);
    this.addHeader(this.header);
    await addSearch(this, this.search, "Search plugins");
    searchDivButtons(this, this.search);
    this.addGroups(this, this.groups);
    if (settings.showHotKeys)
      this.setHotKeysdesc();
    await this.addItems();
  }
  addGroups(modal, contentEl) {
    const groups = Object.values(Groups);
    for (let i = 1; i < groups.length; i++) {
      const groupKey = groups[i];
      contentEl.createEl(
        "span",
        {
          cls: "qps-group-span-container"
        },
        (cont) => {
          cont.createEl(
            "span",
            {
              cls: "qps-circle-title-group"
            },
            (el) => {
              circleCSSModif2(this, el, i);
            }
          );
          const span = cont.createEl("span", {
            cls: "qps-groups-name",
            text: `${groupKey}`
          });
          const groupNumberText = `(<span class="shortcut-number">${i}</span>)`;
          span.insertAdjacentHTML("beforeend", groupNumberText);
        }
      );
    }
  }
  setHotKeysdesc() {
    const numberOfGroups = this.plugin.settings.numberOfGroups;
    this.hotkeysDesc.createSpan(
      {
        text: `(1-${numberOfGroups})\u2795 (0)\u274C (f)\u{1F4C1} `
      },
      (el) => {
        el.createSpan({ text: "(g)" }, (el2) => {
          let gitHubIcon = el2.createSpan({ cls: "git-hub-icon" });
          (0, import_obsidian5.setIcon)(gitHubIcon, "github");
        });
        el.createSpan({
          text: ` (i)\u2139\uFE0F (s)\u2699\uFE0F (h)\u2328\uFE0F `
        });
        el.createSpan({
          cls: "qps-hk-desc-last-part",
          text: `(\u{1F5B1}\uFE0Fx2)delay`
        });
      }
    );
  }
  async addItems() {
    const { plugin } = this;
    const { settings } = plugin;
    const { allPluginsList } = settings;
    const value = settings.search;
    let listItems = doSearch(this, value, allPluginsList);
    listItems = modeSort(plugin, listItems);
    for (const pluginItem of listItems) {
      if (settings.filters === "enabled" && !pluginItem.enabled || settings.filters === "disabled" && pluginItem.enabled) {
        continue;
      }
      let itemContainer = this.items.createEl("div", {
        cls: "qps-item-line"
      });
      itemTogglePluginButton(this, pluginItem, itemContainer);
      const input = itemTextComponent(pluginItem, itemContainer);
      itemToggleClass(this, pluginItem, itemContainer);
      input.readOnly = true;
      addGroupCircles2(input, pluginItem);
      itemContainer.addEventListener("dblclick", async (evt) => {
        if (pluginItem.id === "quick-plugin-switcher")
          return;
        const { plugin: plugin2 } = this;
        const currentValue = pluginItem.time.toString();
        this.isDblClick = true;
        if (!itemContainer) {
          return;
        }
        const input2 = createInput(itemContainer, currentValue);
        if (!pluginItem.delayed) {
          input2 == null ? void 0 : input2.addEventListener("keydown", async (event) => {
            if (event.key === "Enter") {
              setTimeout(async () => {
                this.addDelay(pluginItem, input2);
                this.isDblClick = false;
              }, 100);
            }
          });
          input2 == null ? void 0 : input2.addEventListener("blur", () => {
            setTimeout(async () => {
              this.addDelay(pluginItem, input2);
              this.isDblClick = false;
            }, 100);
          });
        } else {
          pluginItem.delayed = false;
          await this.app.plugins.enablePluginAndSave(
            pluginItem.id
          );
          this.isDblClick = false;
          await plugin2.saveSettings();
          await reOpenModal(this);
        }
      });
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
    document.removeEventListener("mousemove", (event) => {
      this.mousePosition = { x: event.clientX, y: event.clientY };
    });
    document.removeEventListener("keydown", (event) => {
      handleKeyDown2(event, this);
    });
    this.modalEl.removeEventListener("contextmenu", (evt) => {
      if (this.isDblClick)
        return;
      handleContextMenu(evt, this);
    });
    this.modalEl.removeEventListener("dblclick", (evt) => {
      if (this.isDblClick)
        return;
      handleDblClick(evt, this);
    });
  }
};
function circleCSSModif2(modal, el, groupIndex) {
  const { settings } = modal.plugin;
  const { color } = getEmojiForGroup(groupIndex);
  el.style.backgroundColor = color;
  el.textContent = (settings.groups[groupIndex].time ? settings.groups[groupIndex].time : "").toString();
}
var itemTogglePluginButton = (modal, pluginItem, itemContainer) => {
  let disable = pluginItem.id === "quick-plugin-switcher";
  const toggleButton = new import_obsidian5.ToggleComponent(itemContainer).setValue(pluginItem.enabled).setDisabled(disable).onChange(async () => {
    modal.searchInit = false;
    await togglePlugin(modal, pluginItem);
  });
};
var addGroupCircles2 = (input, item) => {
  const indices = item.groupInfo.groupIndices;
  if (!indices.length)
    return;
  if (indices.length < 3) {
    const content = getCirclesItem(indices);
    input.insertAdjacentHTML("afterend", content);
  }
  if (indices.length >= 3 && indices.length < 5) {
    const [valeur0, valeur1, ...part2] = indices;
    const part1 = [valeur0, valeur1];
    const content1 = getCirclesItem(part1);
    input.insertAdjacentHTML("afterend", content1);
    const content2 = getCirclesItem(part2);
    input.insertAdjacentHTML("afterend", content2);
  } else if (indices.length >= 5) {
    const [valeur0, valeur1, valeur2, valeur3, ...part3] = indices;
    const part1 = [valeur0, valeur1];
    const part2 = [valeur2, valeur3];
    const content1 = getCirclesItem(part1);
    input.insertAdjacentHTML("afterend", content1);
    const content2 = getCirclesItem(part2);
    input.insertAdjacentHTML("afterend", content2);
    const content3 = getCirclesItem(part3);
    input.insertAdjacentHTML("afterend", content3);
  }
};
function handleKeyDown2(event, modal) {
  const elementFromPoint = getElementFromMousePosition(event, modal);
  const pluginItemBlock = elementFromPoint == null ? void 0 : elementFromPoint.closest(
    ".qps-item-line"
  );
  if (pluginItemBlock) {
    modal.searchTyping = false;
    const matchingItem = findMatchingItem(modal, pluginItemBlock);
    if (matchingItem) {
      handleHotkeysQPS(modal, event, matchingItem);
    }
  } else {
    modal.searchTyping = true;
  }
}
var handleHotkeysQPS = async (modal, evt, pluginItem) => {
  const { plugin } = modal;
  const { settings } = plugin;
  const numberOfGroups = settings.numberOfGroups;
  const KeyToSettingsMap = {
    g: async () => await openGitHubRepo(pluginItem),
    s: async () => await openPluginSettings(modal, pluginItem),
    h: async () => await showHotkeysFor(modal, pluginItem),
    i: () => new DescriptionModal(plugin.app, plugin, pluginItem).open()
  };
  if (import_obsidian5.Platform.isDesktopApp)
    KeyToSettingsMap["f"] = async () => await openDirectoryInFileManager(modal, pluginItem);
  const keyPressed = evt.key;
  const itemID = pluginItem.id;
  const taggedItem = settings.pluginsTagged[itemID];
  if (!taggedItem) {
    settings.pluginsTagged[itemID] = {
      groupInfo: { groupIndices: [] }
    };
    await modal.plugin.saveSettings();
    await reOpenModal(modal);
  }
  if (!taggedItem || modal.pressed) {
    return;
  }
  pressDelay(modal);
  if (modal.isDblClick)
    return;
  const groupIndices = pluginItem.groupInfo.groupIndices;
  const key = parseInt(keyPressed);
  if (key > 0 && key <= numberOfGroups && !(pluginItem.id === "quick-plugin-switcher")) {
    if (groupIndices.length === 6)
      return;
    const index = groupIndices.indexOf(key);
    if (index === -1) {
      groupIndices == null ? void 0 : groupIndices.push(key);
      await plugin.saveSettings();
      await reOpenModal(modal);
    }
  } else if (keyPressed in KeyToSettingsMap) {
    KeyToSettingsMap[keyPressed]();
  } else if ((keyPressed === "Delete" || keyPressed === "Backspace" || keyPressed === "0") && !(pluginItem.id === "quick-plugin-switcher")) {
    if (!groupIndices.length)
      return;
    if (groupIndices.length === 1) {
      const groupIndex = groupIndices[0];
      pluginItem.groupInfo.groupIndices = [];
      if (!groupNotEmpty(groupIndex, modal)) {
        settings.selectedGroup = "SelectGroup";
      }
      await plugin.saveSettings();
      await reOpenModal(modal);
    } else {
      const menu = new import_obsidian5.Menu();
      menu.addItem(
        (item) => item.setTitle("Remove item group(s)").setDisabled(true).setDisabled(true)
      );
      menu.addSeparator();
      menu.addItem(
        (item) => item.setTitle("All").onClick(async () => {
          await rmvAllGroupsFromPlugin(modal, pluginItem);
        })
      );
      for (const groupIndex of groupIndices) {
        const { emoji } = getEmojiForGroup(groupIndex);
        menu.addItem(
          (item) => item.setTitle(`${emoji} group ${groupIndex}`).onClick(async () => {
            pluginItem.groupInfo.groupIndices = removeItem(
              pluginItem.groupInfo.groupIndices,
              groupIndex
            );
            await plugin.saveSettings();
            await reOpenModal(modal);
          })
        );
      }
      menu.showAtPosition(modal.mousePosition);
    }
  }
};

// src/settings.ts
var import_obsidian6 = require("obsidian");
var QPSSettingTab = class extends import_obsidian6.PluginSettingTab {
  constructor(app2, plugin) {
    super(app2, plugin);
    this.plugin = plugin;
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    const { plugin } = this;
    const { settings } = plugin;
    containerEl.empty();
    containerEl.createEl("h4", { text: "Quick Plugin Switcher" });
    let saveSettingsTimeout;
    const { numberOfGroups, numberOfGroupsComm } = settings;
    new import_obsidian6.Setting(containerEl).setName("Number of plugins groups").setDesc("To treat plugins by groups").addSlider((slider) => {
      slider.setLimits(1, 6, 1).setValue(numberOfGroups).setDynamicTooltip().onChange(async (value) => {
        if (value < numberOfGroups) {
          clearTimeout(saveSettingsTimeout);
          saveSettingsTimeout = setTimeout(async () => {
            const confirmReset = await confirm(
              "reducing number of groups, higher groups info will be lost",
              350
            );
            if (confirmReset) {
              settings.allPluginsList.forEach(
                (plugin2) => {
                  let hasValueGreaterThanValue = false;
                  for (const groupIndex of plugin2.groupInfo.groupIndices) {
                    if (groupIndex > value) {
                      hasValueGreaterThanValue = true;
                      break;
                    }
                  }
                  if (hasValueGreaterThanValue) {
                    plugin2.groupInfo.groupIndices = [];
                  }
                }
              );
              settings.numberOfGroups = value;
              await plugin.saveSettings();
            } else {
              slider.setValue(numberOfGroups);
            }
          }, 700);
        } else {
          clearTimeout(saveSettingsTimeout);
          settings.numberOfGroups = value;
          await plugin.saveSettings();
        }
      });
    });
    new import_obsidian6.Setting(containerEl).setName("Number of community plugins groups").setDesc("To treat plugins by groups").addSlider((slider) => {
      slider.setLimits(1, 6, 1).setValue(numberOfGroupsComm).setDynamicTooltip().onChange(async (value) => {
        if (value < numberOfGroupsComm) {
          clearTimeout(saveSettingsTimeout);
          saveSettingsTimeout = setTimeout(async () => {
            const confirmReset = await confirm(
              "reducing number of groups, higher groups info will be lost",
              350
            );
            if (confirmReset) {
              const { commPlugins: commPlugins2, pluginsTagged } = settings;
              commPlugins2.forEach((plugin2) => {
                let hasValueGreaterThanValue = false;
                const taggedItem = pluginsTagged[plugin2.id];
                if (!taggedItem)
                  return;
                const { groupInfo } = taggedItem;
                let { groupIndices } = groupInfo;
                for (const groupIndex of groupIndices) {
                  if (groupIndex > value) {
                    hasValueGreaterThanValue = true;
                    break;
                  }
                }
                if (hasValueGreaterThanValue) {
                  groupIndices = [];
                }
              });
              settings.numberOfGroupsComm = value;
              await plugin.saveSettings();
            } else {
              slider.setValue(numberOfGroupsComm);
            }
          }, 700);
        } else {
          clearTimeout(saveSettingsTimeout);
          settings.numberOfGroupsComm = value;
          await plugin.saveSettings();
        }
      });
    });
    new import_obsidian6.Setting(containerEl).setName("Reset all values").setDesc("Don't do this, unless you really need to").addButton((btn) => {
      btn.setIcon("alert-octagon").setTooltip("Reset all values").onClick(async () => {
        const confirmReset = await confirm(
          "Do you want to reset all values?",
          300
        );
        if (confirmReset) {
          if (plugin.settings.hasOwnProperty("allPluginsList")) {
            plugin.settings.allPluginsList = [];
          }
          if (plugin.settings.hasOwnProperty("groups")) {
            plugin.settings.groups = {};
          }
          await plugin.saveSettings();
          new import_obsidian6.Notice("Reset done", 2500);
        } else {
          new import_obsidian6.Notice("Operation cancelled", 2500);
        }
      });
    });
    new import_obsidian6.Setting(containerEl).setName("Show hotkeys line reminder").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showHotKeys).onChange((value) => {
        this.plugin.settings.showHotKeys = value;
        this.plugin.saveSettings();
      });
    });
  }
};

// src/main.ts
var QuickPluginSwitcher = class extends import_obsidian7.Plugin {
  constructor() {
    super(...arguments);
    this.reset = false;
    this.lengthAll = 0;
    this.lengthDisabled = 0;
    this.lengthEnabled = 0;
  }
  async onload() {
    await this.loadSettings();
    this.app.workspace.onLayoutReady(async () => {
      const { settings } = this;
      const allPluginsList = settings.allPluginsList || [];
      const manifests = this.app.plugins.manifests || {};
      let stillInstalled = [];
      for (const plugin of allPluginsList) {
        if (Object.keys(manifests).includes(plugin.id))
          stillInstalled.push(plugin);
      }
      const { wrapper1, wrapper2 } = this.wrapDisableEnablePluginAndSave(
        stillInstalled,
        async () => {
          await this.saveSettings();
        }
      );
      this.register(wrapper1);
      this.register(wrapper2);
      for (const plugin of stillInstalled) {
        if (isEnabled(this, plugin.id) !== plugin.enabled && !plugin.delayed) {
          plugin.enabled = !plugin.enabled;
        }
      }
      await this.saveSettings();
      for (const pluginItem of stillInstalled) {
        if (pluginItem.delayed && pluginItem.enabled) {
          const time = pluginItem.time * 1e3 || 0;
          setTimeout(
            async () => await this.app.plugins.enablePlugin(
              pluginItem.id
            ),
            time
          );
        }
      }
    });
    this.addSettingTab(new QPSSettingTab(this.app, this));
    this.addRibbonIcon(
      "toggle-right",
      "Quick Plugin Switcher",
      async (evt) => {
        this.getPluginsInfo();
        this.getLength();
        new QPSModal(this.app, this).open();
        await exeAfterDelay(this, this.commPluginsInfo.bind(this));
      }
    );
    this.addCommand({
      id: "quick-plugin-switcher-modal",
      name: "open modal",
      callback: async () => {
        this.getPluginsInfo();
        this.getLength();
        new QPSModal(this.app, this).open();
        await exeAfterDelay(this, this.commPluginsInfo.bind(this));
      }
    });
  }
  wrapDisableEnablePluginAndSave(stillInstalled, cb) {
    const manifests = this.app.plugins.manifests || {};
    const wrapper1 = around(this.app.plugins, {
      disablePluginAndSave(oldMethod) {
        return async function(pluginId) {
          if (stillInstalled) {
            const plugin = stillInstalled.find(
              (plugin2) => plugin2.id === pluginId && !isEnabled(this, manifests[pluginId].id)
            );
            if (plugin && plugin.delayed && plugin.time > 0) {
              plugin.enabled = false;
              cb();
            }
          }
          return oldMethod.call(this, pluginId);
        };
      }
    });
    const wrapper2 = around(this.app.plugins, {
      enablePluginAndSave(oldMethod) {
        return async function(pluginId) {
          let altReturn = false;
          if (stillInstalled) {
            const plugin = stillInstalled.find(
              (plugin2) => plugin2.id === pluginId && isEnabled(this, manifests[pluginId].id)
            );
            if (plugin && plugin.delayed && plugin.time > 0) {
              plugin.enabled = true;
              altReturn = true;
              cb();
            }
          }
          if (altReturn)
            return this.app.plugins.enablePlugin.call(
              this,
              pluginId
            );
          return oldMethod.call(this, pluginId);
        };
      }
    });
    return { wrapper1, wrapper2 };
  }
  async getPluginsInfo() {
    const { settings } = this;
    const allPluginsList = settings.allPluginsList || [];
    const manifests = this.app.plugins.manifests || {};
    let stillInstalled = [];
    let uninstalled = [];
    for (const plugin of allPluginsList) {
      if (Object.keys(manifests).includes(plugin.id))
        stillInstalled.push(plugin);
      else {
        uninstalled.push(plugin);
      }
    }
    for (const key of Object.keys(manifests)) {
      const pluginInList = stillInstalled.find(
        (plugin) => plugin.id === manifests[key].id
      );
      if (pluginInList) {
        if (isEnabled(this, manifests[key].id) !== pluginInList.enabled && !pluginInList.delayed) {
          pluginInList.enabled = !pluginInList.enabled;
        } else if (pluginInList.delayed && isEnabled(this, manifests[key].id) !== pluginInList.enabled) {
          if (isEnabled(this, manifests[key].id)) {
            pluginInList.enabled = true;
            await this.app.plugins.disablePluginAndSave(
              pluginInList.id
            );
            await this.app.plugins.enablePlugin(
              pluginInList.id
            );
            pluginInList.switched++;
          }
        }
        if (pluginInList.desktopOnly === void 0) {
          pluginInList.desktopOnly = manifests[key].isDesktopOnly || false;
        }
        continue;
      } else {
        const notInListInfo = {
          name: manifests[key].name || "",
          id: manifests[key].id || "",
          desc: manifests[key].description || "",
          dir: manifests[key].dir || "",
          version: manifests[key].version || "",
          author: manifests[key].author || "",
          authorUrl: manifests[key].authorUrl || "",
          desktopOnly: manifests[key].isDesktopOnly || false,
          enabled: isEnabled(this, manifests[key].id) || false,
          switched: 0,
          groupInfo: {
            groupIndices: [],
            groupWasEnabled: false
          },
          delayed: false,
          time: 0
        };
        stillInstalled.push(notInListInfo);
      }
    }
    settings.allPluginsList = stillInstalled;
    await this.saveSettings();
    this.getLength();
  }
  getLength() {
    const { settings } = this;
    const allPluginsList = settings.allPluginsList || [];
    this.lengthAll = allPluginsList.length;
    this.lengthEnabled = settings.allPluginsList.filter(
      (plugin) => plugin.enabled
    ).length;
    this.lengthDisabled = settings.allPluginsList.filter(
      (plugin) => !plugin.enabled
    ).length;
  }
  async commPluginsInfo() {
    console.debug("fetching'''''''''''''''''''''''''");
    let plugins, stats;
    try {
      plugins = await fetchData(commPlugins);
      stats = await fetchData(commPluginStats);
    } catch (e) {
      return false;
    }
    if (plugins || stats) {
      this.settings.commPlugins = plugins;
      this.settings.pluginStats = stats;
      await this.saveSettings();
      console.debug("fetched");
      return true;
    }
    return false;
  }
  async loadSettings() {
    const previousSettings = { ...await this.loadData() };
    if ("mobileSettings" in previousSettings) {
      delete previousSettings.mobileSettings;
    }
    this.settings = { ...DEFAULT_SETTINGS, ...previousSettings };
    this.settings.savedVersion = this.manifest.version;
    await this.saveSettings();
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
var exeAfterDelay = async (_this, func) => {
  const { settings } = _this;
  const currentTime = Date.now();
  if (currentTime - settings.lastFetchExe >= 18e4) {
    const ret = await func();
    if (ret === true) {
      settings.lastFetchExe = currentTime;
      await _this.saveSettings();
    } else {
      console.log("community plugins udpate failed, check your connexion");
    }
  } else {
    console.log(
      "fetched less than 3 min, community plugins not updated"
    );
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAibm9kZV9tb2R1bGVzL21vbmtleS1hcm91bmQvbWpzL2luZGV4LmpzIiwgInNyYy9tYWluX21vZGFsLnRzIiwgInNyYy90eXBlcy50cyIsICJzcmMvdXRpbHMudHMiLCAic3JjL3NlY29uZGFyeV9tb2RhbHMudHMiLCAic3JjL2NvbW11bml0eS1wbHVnaW5zX21vZGFsLnRzIiwgInNyYy9tb2RhbF91dGlscy50cyIsICJzcmMvbW9kYWxfY29tcG9uZW50cy50cyIsICJzcmMvc2V0dGluZ3MudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIi8vIHN3aXRjaCB0aW1lciB0byBmaXggZXJyb3IgZGlzYWJsaW5nIHBsdWdpblxyXG5pbXBvcnQgeyBhcm91bmQgfSBmcm9tIFwibW9ua2V5LWFyb3VuZFwiO1xyXG5pbXBvcnQgeyBQbHVnaW4gfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IHsgUVBTTW9kYWwgfSBmcm9tIFwiLi9tYWluX21vZGFsXCI7XHJcbmltcG9ydCB7IGlzRW5hYmxlZCB9IGZyb20gXCIuL3V0aWxzXCI7XHJcbmltcG9ydCB7XHJcblx0REVGQVVMVF9TRVRUSU5HUyxcclxuXHRQYWNrYWdlSW5mb0RhdGEsXHJcblx0UGx1Z2luQ29tbUluZm8sXHJcblx0UGx1Z2luSW5mbyxcclxuXHRRUFNTZXR0aW5ncyxcclxuXHRjb21tUGx1Z2luU3RhdHMsXHJcblx0Y29tbVBsdWdpbnMsXHJcbn0gZnJvbSBcIi4vdHlwZXNcIjtcclxuaW1wb3J0IFFQU1NldHRpbmdUYWIgZnJvbSBcIi4vc2V0dGluZ3NcIjtcclxuaW1wb3J0IHsgZmV0Y2hEYXRhIH0gZnJvbSBcIi4vY29tbXVuaXR5LXBsdWdpbnNfbW9kYWxcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFF1aWNrUGx1Z2luU3dpdGNoZXIgZXh0ZW5kcyBQbHVnaW4ge1xyXG5cdHNldHRpbmdzOiBRUFNTZXR0aW5ncztcclxuXHRyZXNldCA9IGZhbHNlO1xyXG5cdGxlbmd0aEFsbCA9IDA7XHJcblx0bGVuZ3RoRGlzYWJsZWQgPSAwO1xyXG5cdGxlbmd0aEVuYWJsZWQgPSAwO1xyXG5cdGNvbW1QbHVnaW5zOiBQbHVnaW5Db21tSW5mb1tdO1xyXG5cdHBsdWdpblN0YXRzOiBQYWNrYWdlSW5mb0RhdGE7XHJcblxyXG5cdGFzeW5jIG9ubG9hZCgpIHtcclxuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XHJcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeShhc3luYyAoKSA9PiB7XHJcblx0XHRcdGNvbnN0IHsgc2V0dGluZ3MgfSA9IHRoaXM7XHJcblx0XHRcdGNvbnN0IGFsbFBsdWdpbnNMaXN0ID0gc2V0dGluZ3MuYWxsUGx1Z2luc0xpc3QgfHwgW107XHJcblx0XHRcdGNvbnN0IG1hbmlmZXN0cyA9ICh0aGlzLmFwcCBhcyBhbnkpLnBsdWdpbnMubWFuaWZlc3RzIHx8IHt9O1xyXG5cdFx0XHQvLyBwbHVnaW4gaGF2ZSBiZWVuIGRlbGV0ZWQgZnJvbSBvYnNpZGlhbiBVSSA/XHJcblx0XHRcdGxldCBzdGlsbEluc3RhbGxlZDogUGx1Z2luSW5mb1tdID0gW107XHJcblxyXG5cdFx0XHRmb3IgKGNvbnN0IHBsdWdpbiBvZiBhbGxQbHVnaW5zTGlzdCkge1xyXG5cdFx0XHRcdGlmIChPYmplY3Qua2V5cyhtYW5pZmVzdHMpLmluY2x1ZGVzKHBsdWdpbi5pZCkpXHJcblx0XHRcdFx0XHRzdGlsbEluc3RhbGxlZC5wdXNoKHBsdWdpbik7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGNvbnN0IHsgd3JhcHBlcjEsIHdyYXBwZXIyIH0gPSB0aGlzLndyYXBEaXNhYmxlRW5hYmxlUGx1Z2luQW5kU2F2ZShcclxuXHRcdFx0XHRzdGlsbEluc3RhbGxlZCxcclxuXHRcdFx0XHRhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0KTtcclxuXHJcblx0XHRcdHRoaXMucmVnaXN0ZXIod3JhcHBlcjEpO1xyXG5cdFx0XHR0aGlzLnJlZ2lzdGVyKHdyYXBwZXIyKTtcclxuXHJcblx0XHRcdC8vIHBsdWdpbiBoYXMgYmVlbiB0b2dnbGVkIGZyb20gb2JzaWRpYW4gVUkgPyBvciBpZiBpcyBkZWxheWVkIHVuYWJsZWRcclxuXHRcdFx0Zm9yIChjb25zdCBwbHVnaW4gb2Ygc3RpbGxJbnN0YWxsZWQpIHtcclxuXHRcdFx0XHRpZiAoXHJcblx0XHRcdFx0XHRpc0VuYWJsZWQodGhpcywgcGx1Z2luLmlkKSAhPT0gcGx1Z2luLmVuYWJsZWQgJiZcclxuXHRcdFx0XHRcdCFwbHVnaW4uZGVsYXllZCAvL2JlY2F1c2UgaWYgZGVsYXllZCBpc0VuYWJsZWQgZmFsc2VcclxuXHRcdFx0XHQpIHtcclxuXHRcdFx0XHRcdHBsdWdpbi5lbmFibGVkID0gIXBsdWdpbi5lbmFibGVkO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cclxuXHRcdFx0Ly9kZWxheSBhdCBzdGFydFxyXG5cdFx0XHRmb3IgKGNvbnN0IHBsdWdpbkl0ZW0gb2Ygc3RpbGxJbnN0YWxsZWQpIHtcclxuXHRcdFx0XHRpZiAocGx1Z2luSXRlbS5kZWxheWVkICYmIHBsdWdpbkl0ZW0uZW5hYmxlZCkge1xyXG5cdFx0XHRcdFx0Y29uc3QgdGltZSA9IHBsdWdpbkl0ZW0udGltZSAqIDEwMDAgfHwgMDtcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQoXHJcblx0XHRcdFx0XHRcdGFzeW5jICgpID0+XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgKHRoaXMuYXBwIGFzIGFueSkucGx1Z2lucy5lbmFibGVQbHVnaW4oXHJcblx0XHRcdFx0XHRcdFx0XHRwbHVnaW5JdGVtLmlkXHJcblx0XHRcdFx0XHRcdFx0KSxcclxuXHRcdFx0XHRcdFx0dGltZVxyXG5cdFx0XHRcdFx0KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBRUFNTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XHJcblxyXG5cdFx0dGhpcy5hZGRSaWJib25JY29uKFxyXG5cdFx0XHRcInRvZ2dsZS1yaWdodFwiLFxyXG5cdFx0XHRcIlF1aWNrIFBsdWdpbiBTd2l0Y2hlclwiLFxyXG5cdFx0XHRhc3luYyAoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XHJcblx0XHRcdFx0dGhpcy5nZXRQbHVnaW5zSW5mbygpO1xyXG5cdFx0XHRcdHRoaXMuZ2V0TGVuZ3RoKCk7XHJcblx0XHRcdFx0bmV3IFFQU01vZGFsKHRoaXMuYXBwLCB0aGlzKS5vcGVuKCk7XHJcblx0XHRcdFx0YXdhaXQgZXhlQWZ0ZXJEZWxheSh0aGlzLCB0aGlzLmNvbW1QbHVnaW5zSW5mby5iaW5kKHRoaXMpKTtcclxuXHRcdFx0fVxyXG5cdFx0KTtcclxuXHJcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRpZDogXCJxdWljay1wbHVnaW4tc3dpdGNoZXItbW9kYWxcIixcclxuXHRcdFx0bmFtZTogXCJvcGVuIG1vZGFsXCIsXHJcblx0XHRcdGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0dGhpcy5nZXRQbHVnaW5zSW5mbygpO1xyXG5cdFx0XHRcdHRoaXMuZ2V0TGVuZ3RoKCk7XHJcblx0XHRcdFx0bmV3IFFQU01vZGFsKHRoaXMuYXBwLCB0aGlzKS5vcGVuKCk7XHJcblx0XHRcdFx0YXdhaXQgZXhlQWZ0ZXJEZWxheSh0aGlzLCB0aGlzLmNvbW1QbHVnaW5zSW5mby5iaW5kKHRoaXMpKTtcclxuXHRcdFx0fSxcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0d3JhcERpc2FibGVFbmFibGVQbHVnaW5BbmRTYXZlKHN0aWxsSW5zdGFsbGVkOiBQbHVnaW5JbmZvW10sIGNiOiAoKSA9PiB7fSkge1xyXG5cdFx0Y29uc3QgbWFuaWZlc3RzID0gKHRoaXMuYXBwIGFzIGFueSkucGx1Z2lucy5tYW5pZmVzdHMgfHwge307XHJcblx0XHRjb25zdCB3cmFwcGVyMSA9IGFyb3VuZCgodGhpcy5hcHAgYXMgYW55KS5wbHVnaW5zLCB7XHJcblx0XHRcdGRpc2FibGVQbHVnaW5BbmRTYXZlKG9sZE1ldGhvZCkge1xyXG5cdFx0XHRcdHJldHVybiBhc3luYyBmdW5jdGlvbiAocGx1Z2luSWQ6IHN0cmluZykge1xyXG5cdFx0XHRcdFx0aWYgKHN0aWxsSW5zdGFsbGVkKSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IHBsdWdpbiA9IHN0aWxsSW5zdGFsbGVkLmZpbmQoXHJcblx0XHRcdFx0XHRcdFx0KHBsdWdpbikgPT5cclxuXHRcdFx0XHRcdFx0XHRcdHBsdWdpbi5pZCA9PT0gcGx1Z2luSWQgJiZcclxuXHRcdFx0XHRcdFx0XHRcdCFpc0VuYWJsZWQodGhpcywgbWFuaWZlc3RzW3BsdWdpbklkXS5pZClcclxuXHRcdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdFx0aWYgKHBsdWdpbiAmJiBwbHVnaW4uZGVsYXllZCAmJiBwbHVnaW4udGltZSA+IDApIHtcclxuXHRcdFx0XHRcdFx0XHRwbHVnaW4uZW5hYmxlZCA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0XHRcdGNiKCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHJldHVybiBvbGRNZXRob2QuY2FsbCh0aGlzLCBwbHVnaW5JZCk7XHJcblx0XHRcdFx0fTtcclxuXHRcdFx0fSxcclxuXHRcdH0pO1xyXG5cdFx0Y29uc3Qgd3JhcHBlcjIgPSBhcm91bmQoKHRoaXMuYXBwIGFzIGFueSkucGx1Z2lucywge1xyXG5cdFx0XHRlbmFibGVQbHVnaW5BbmRTYXZlKG9sZE1ldGhvZCkge1xyXG5cdFx0XHRcdHJldHVybiBhc3luYyBmdW5jdGlvbiAocGx1Z2luSWQ6IHN0cmluZykge1xyXG5cdFx0XHRcdFx0bGV0IGFsdFJldHVybiA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0aWYgKHN0aWxsSW5zdGFsbGVkKSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IHBsdWdpbiA9IHN0aWxsSW5zdGFsbGVkLmZpbmQoXHJcblx0XHRcdFx0XHRcdFx0KHBsdWdpbikgPT5cclxuXHRcdFx0XHRcdFx0XHRcdHBsdWdpbi5pZCA9PT0gcGx1Z2luSWQgJiZcclxuXHRcdFx0XHRcdFx0XHRcdGlzRW5hYmxlZCh0aGlzLCBtYW5pZmVzdHNbcGx1Z2luSWRdLmlkKVxyXG5cdFx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdFx0XHRpZiAocGx1Z2luICYmIHBsdWdpbi5kZWxheWVkICYmIHBsdWdpbi50aW1lID4gMCkge1xyXG5cdFx0XHRcdFx0XHRcdHBsdWdpbi5lbmFibGVkID0gdHJ1ZTtcclxuXHRcdFx0XHRcdFx0XHRhbHRSZXR1cm4gPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRcdGNiKCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmIChhbHRSZXR1cm4pXHJcblx0XHRcdFx0XHRcdHJldHVybiAodGhpcy5hcHAgYXMgYW55KS5wbHVnaW5zLmVuYWJsZVBsdWdpbi5jYWxsKFxyXG5cdFx0XHRcdFx0XHRcdHRoaXMsXHJcblx0XHRcdFx0XHRcdFx0cGx1Z2luSWRcclxuXHRcdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdHJldHVybiBvbGRNZXRob2QuY2FsbCh0aGlzLCBwbHVnaW5JZCk7XHJcblx0XHRcdFx0fTtcclxuXHRcdFx0fSxcclxuXHRcdH0pO1xyXG5cclxuXHRcdHJldHVybiB7IHdyYXBwZXIxLCB3cmFwcGVyMiB9O1xyXG5cdH1cclxuXHJcblx0YXN5bmMgZ2V0UGx1Z2luc0luZm8oKSB7XHJcblx0XHRjb25zdCB7IHNldHRpbmdzIH0gPSB0aGlzO1xyXG5cclxuXHRcdGNvbnN0IGFsbFBsdWdpbnNMaXN0ID0gc2V0dGluZ3MuYWxsUGx1Z2luc0xpc3QgfHwgW107XHJcblx0XHRjb25zdCBtYW5pZmVzdHMgPSAodGhpcy5hcHAgYXMgYW55KS5wbHVnaW5zLm1hbmlmZXN0cyB8fCB7fTtcclxuXHJcblx0XHQvLyBwbHVnaW4gaGF2ZSBiZWVuIGRlbGV0ZWQgZnJvbSBvYnNpZGlhbiBVSSA/XHJcblx0XHRsZXQgc3RpbGxJbnN0YWxsZWQ6IFBsdWdpbkluZm9bXSA9IFtdO1xyXG5cdFx0bGV0IHVuaW5zdGFsbGVkOiBQbHVnaW5JbmZvW10gPSBbXTtcclxuXHJcblx0XHRmb3IgKGNvbnN0IHBsdWdpbiBvZiBhbGxQbHVnaW5zTGlzdCkge1xyXG5cdFx0XHRpZiAoT2JqZWN0LmtleXMobWFuaWZlc3RzKS5pbmNsdWRlcyhwbHVnaW4uaWQpKVxyXG5cdFx0XHRcdHN0aWxsSW5zdGFsbGVkLnB1c2gocGx1Z2luKTtcclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0dW5pbnN0YWxsZWQucHVzaChwbHVnaW4pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Zm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMobWFuaWZlc3RzKSkge1xyXG5cdFx0XHQvLyBwbHVnaW4gaGFzIGJlZW4gdG9nZ2xlZCBmcm9tIG9ic2lkaWFuIFVJID8gb3IgaWYgaXMgZGVsYXllZCB1bmFibGVkXHJcblx0XHRcdGNvbnN0IHBsdWdpbkluTGlzdCA9IHN0aWxsSW5zdGFsbGVkLmZpbmQoXHJcblx0XHRcdFx0KHBsdWdpbikgPT4gcGx1Z2luLmlkID09PSBtYW5pZmVzdHNba2V5XS5pZFxyXG5cdFx0XHQpO1xyXG5cclxuXHRcdFx0aWYgKHBsdWdpbkluTGlzdCkge1xyXG5cdFx0XHRcdGlmIChcclxuXHRcdFx0XHRcdGlzRW5hYmxlZCh0aGlzLCBtYW5pZmVzdHNba2V5XS5pZCkgIT09XHJcblx0XHRcdFx0XHRcdHBsdWdpbkluTGlzdC5lbmFibGVkICYmXHJcblx0XHRcdFx0XHQhcGx1Z2luSW5MaXN0LmRlbGF5ZWRcclxuXHRcdFx0XHQpIHtcclxuXHRcdFx0XHRcdHBsdWdpbkluTGlzdC5lbmFibGVkID0gIXBsdWdpbkluTGlzdC5lbmFibGVkO1xyXG5cdFx0XHRcdH0gZWxzZSBpZiAoXHJcblx0XHRcdFx0XHRwbHVnaW5Jbkxpc3QuZGVsYXllZCAmJlxyXG5cdFx0XHRcdFx0aXNFbmFibGVkKHRoaXMsIG1hbmlmZXN0c1trZXldLmlkKSAhPT0gcGx1Z2luSW5MaXN0LmVuYWJsZWRcclxuXHRcdFx0XHQpIHtcclxuXHRcdFx0XHRcdGlmIChpc0VuYWJsZWQodGhpcywgbWFuaWZlc3RzW2tleV0uaWQpKSB7XHJcblx0XHRcdFx0XHRcdHBsdWdpbkluTGlzdC5lbmFibGVkID0gdHJ1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgKHRoaXMuYXBwIGFzIGFueSkucGx1Z2lucy5kaXNhYmxlUGx1Z2luQW5kU2F2ZShcclxuXHRcdFx0XHRcdFx0XHRwbHVnaW5Jbkxpc3QuaWRcclxuXHRcdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgKHRoaXMuYXBwIGFzIGFueSkucGx1Z2lucy5lbmFibGVQbHVnaW4oXHJcblx0XHRcdFx0XHRcdFx0cGx1Z2luSW5MaXN0LmlkXHJcblx0XHRcdFx0XHRcdCk7XHJcblx0XHRcdFx0XHRcdHBsdWdpbkluTGlzdC5zd2l0Y2hlZCsrO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvLyBjb21wYXRpYmlsaXR5IHdpdGggcHJldmlvdXMgdmVyc2lvbnNcclxuXHRcdFx0XHRpZiAocGx1Z2luSW5MaXN0LmRlc2t0b3BPbmx5ID09PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0XHRcdHBsdWdpbkluTGlzdC5kZXNrdG9wT25seSA9XHJcblx0XHRcdFx0XHRcdG1hbmlmZXN0c1trZXldLmlzRGVza3RvcE9ubHkgfHwgZmFsc2U7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGNvbnN0IG5vdEluTGlzdEluZm86IFBsdWdpbkluZm8gPSB7XHJcblx0XHRcdFx0XHRuYW1lOiBtYW5pZmVzdHNba2V5XS5uYW1lIHx8IFwiXCIsXHJcblx0XHRcdFx0XHRpZDogbWFuaWZlc3RzW2tleV0uaWQgfHwgXCJcIixcclxuXHRcdFx0XHRcdGRlc2M6IG1hbmlmZXN0c1trZXldLmRlc2NyaXB0aW9uIHx8IFwiXCIsXHJcblx0XHRcdFx0XHRkaXI6IG1hbmlmZXN0c1trZXldLmRpciB8fCBcIlwiLFxyXG5cdFx0XHRcdFx0dmVyc2lvbjogbWFuaWZlc3RzW2tleV0udmVyc2lvbiB8fCBcIlwiLFxyXG5cdFx0XHRcdFx0YXV0aG9yOiBtYW5pZmVzdHNba2V5XS5hdXRob3IgfHwgXCJcIixcclxuXHRcdFx0XHRcdGF1dGhvclVybDogbWFuaWZlc3RzW2tleV0uYXV0aG9yVXJsIHx8IFwiXCIsXHJcblx0XHRcdFx0XHRkZXNrdG9wT25seTogbWFuaWZlc3RzW2tleV0uaXNEZXNrdG9wT25seSB8fCBmYWxzZSxcclxuXHRcdFx0XHRcdGVuYWJsZWQ6IGlzRW5hYmxlZCh0aGlzLCBtYW5pZmVzdHNba2V5XS5pZCkgfHwgZmFsc2UsXHJcblx0XHRcdFx0XHRzd2l0Y2hlZDogMCxcclxuXHRcdFx0XHRcdGdyb3VwSW5mbzoge1xyXG5cdFx0XHRcdFx0XHRncm91cEluZGljZXM6IFtdLFxyXG5cdFx0XHRcdFx0XHRncm91cFdhc0VuYWJsZWQ6IGZhbHNlLFxyXG5cdFx0XHRcdFx0fSxcclxuXHRcdFx0XHRcdGRlbGF5ZWQ6IGZhbHNlLFxyXG5cdFx0XHRcdFx0dGltZTogMCxcclxuXHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0XHRzdGlsbEluc3RhbGxlZC5wdXNoKG5vdEluTGlzdEluZm8pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRzZXR0aW5ncy5hbGxQbHVnaW5zTGlzdCA9IHN0aWxsSW5zdGFsbGVkO1xyXG5cdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdHRoaXMuZ2V0TGVuZ3RoKCk7XHJcblx0fVxyXG5cclxuXHRnZXRMZW5ndGgoKSB7XHJcblx0XHRjb25zdCB7IHNldHRpbmdzIH0gPSB0aGlzO1xyXG5cdFx0Y29uc3QgYWxsUGx1Z2luc0xpc3QgPSBzZXR0aW5ncy5hbGxQbHVnaW5zTGlzdCB8fCBbXTtcclxuXHRcdHRoaXMubGVuZ3RoQWxsID0gYWxsUGx1Z2luc0xpc3QubGVuZ3RoO1xyXG5cdFx0dGhpcy5sZW5ndGhFbmFibGVkID0gc2V0dGluZ3MuYWxsUGx1Z2luc0xpc3QuZmlsdGVyKFxyXG5cdFx0XHQocGx1Z2luKSA9PiBwbHVnaW4uZW5hYmxlZFxyXG5cdFx0KS5sZW5ndGg7XHJcblx0XHR0aGlzLmxlbmd0aERpc2FibGVkID0gc2V0dGluZ3MuYWxsUGx1Z2luc0xpc3QuZmlsdGVyKFxyXG5cdFx0XHQocGx1Z2luKSA9PiAhcGx1Z2luLmVuYWJsZWRcclxuXHRcdCkubGVuZ3RoO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgY29tbVBsdWdpbnNJbmZvKCkge1xyXG5cdFx0Y29uc29sZS5kZWJ1ZyhcImZldGNoaW5nJycnJycnJycnJycnJycnJycnJycnJycnJ1wiKTtcclxuXHRcdGxldCBwbHVnaW5zLCBzdGF0cztcclxuXHRcdHRyeSB7XHJcblx0XHRcdHBsdWdpbnMgPSBhd2FpdCBmZXRjaERhdGEoY29tbVBsdWdpbnMpO1xyXG5cdFx0XHRzdGF0cyA9IGF3YWl0IGZldGNoRGF0YShjb21tUGx1Z2luU3RhdHMpO1xyXG5cdFx0fSBjYXRjaCB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHRcdGlmIChwbHVnaW5zIHx8IHN0YXRzKSB7XHJcblx0XHRcdHRoaXMuc2V0dGluZ3MuY29tbVBsdWdpbnMgPSBwbHVnaW5zO1xyXG5cdFx0XHR0aGlzLnNldHRpbmdzLnBsdWdpblN0YXRzID0gc3RhdHM7XHJcblx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdGNvbnNvbGUuZGVidWcoXCJmZXRjaGVkXCIpO1xyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcclxuXHRcdGNvbnN0IHByZXZpb3VzU2V0dGluZ3MgPSB7IC4uLihhd2FpdCB0aGlzLmxvYWREYXRhKCkpIH07XHJcblx0XHRpZiAoXCJtb2JpbGVTZXR0aW5nc1wiIGluIHByZXZpb3VzU2V0dGluZ3MpIHtcclxuXHRcdFx0ZGVsZXRlIHByZXZpb3VzU2V0dGluZ3MubW9iaWxlU2V0dGluZ3M7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IHsgLi4uREVGQVVMVF9TRVRUSU5HUywgLi4ucHJldmlvdXNTZXR0aW5ncyB9O1xyXG5cdFx0dGhpcy5zZXR0aW5ncy5zYXZlZFZlcnNpb24gPSB0aGlzLm1hbmlmZXN0LnZlcnNpb247XHJcblx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xyXG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcclxuXHR9XHJcbn1cclxuXHJcbmNvbnN0IGV4ZUFmdGVyRGVsYXkgPSBhc3luYyAoXHJcblx0X3RoaXM6IFF1aWNrUGx1Z2luU3dpdGNoZXIsXHJcblx0ZnVuYzogKCkgPT4gUHJvbWlzZTxib29sZWFuPlxyXG4pID0+IHtcclxuXHRjb25zdCB7IHNldHRpbmdzIH0gPSBfdGhpcztcclxuXHRjb25zdCBjdXJyZW50VGltZTogbnVtYmVyID0gRGF0ZS5ub3coKTtcclxuXHQvLyBkZWxheSAzbWluXHJcblx0aWYgKGN1cnJlbnRUaW1lIC0gc2V0dGluZ3MubGFzdEZldGNoRXhlID49IDE4MDAwMCkge1xyXG5cdFx0Y29uc3QgcmV0ID0gYXdhaXQgZnVuYygpO1xyXG5cdFx0aWYgKHJldCA9PT0gdHJ1ZSkge1xyXG5cdFx0XHRzZXR0aW5ncy5sYXN0RmV0Y2hFeGUgPSBjdXJyZW50VGltZTtcclxuXHRcdFx0YXdhaXQgX3RoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRjb25zb2xlLmxvZyhcImNvbW11bml0eSBwbHVnaW5zIHVkcGF0ZSBmYWlsZWQsIGNoZWNrIHlvdXIgY29ubmV4aW9uXCIpO1xyXG5cdFx0fVxyXG5cdH0gZWxzZSB7XHJcblx0XHRjb25zb2xlLmxvZyhcclxuXHRcdFx0XCJmZXRjaGVkIGxlc3MgdGhhbiAzIG1pbiwgY29tbXVuaXR5IHBsdWdpbnMgbm90IHVwZGF0ZWRcIlxyXG5cdFx0KTtcclxuXHR9XHJcbn07XHJcbiIsICJleHBvcnQgZnVuY3Rpb24gYXJvdW5kKG9iaiwgZmFjdG9yaWVzKSB7XG4gICAgY29uc3QgcmVtb3ZlcnMgPSBPYmplY3Qua2V5cyhmYWN0b3JpZXMpLm1hcChrZXkgPT4gYXJvdW5kMShvYmosIGtleSwgZmFjdG9yaWVzW2tleV0pKTtcbiAgICByZXR1cm4gcmVtb3ZlcnMubGVuZ3RoID09PSAxID8gcmVtb3ZlcnNbMF0gOiBmdW5jdGlvbiAoKSB7IHJlbW92ZXJzLmZvckVhY2gociA9PiByKCkpOyB9O1xufVxuZnVuY3Rpb24gYXJvdW5kMShvYmosIG1ldGhvZCwgY3JlYXRlV3JhcHBlcikge1xuICAgIGNvbnN0IG9yaWdpbmFsID0gb2JqW21ldGhvZF0sIGhhZE93biA9IG9iai5oYXNPd25Qcm9wZXJ0eShtZXRob2QpO1xuICAgIGxldCBjdXJyZW50ID0gY3JlYXRlV3JhcHBlcihvcmlnaW5hbCk7XG4gICAgLy8gTGV0IG91ciB3cmFwcGVyIGluaGVyaXQgc3RhdGljIHByb3BzIGZyb20gdGhlIHdyYXBwaW5nIG1ldGhvZCxcbiAgICAvLyBhbmQgdGhlIHdyYXBwaW5nIG1ldGhvZCwgcHJvcHMgZnJvbSB0aGUgb3JpZ2luYWwgbWV0aG9kXG4gICAgaWYgKG9yaWdpbmFsKVxuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YoY3VycmVudCwgb3JpZ2luYWwpO1xuICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih3cmFwcGVyLCBjdXJyZW50KTtcbiAgICBvYmpbbWV0aG9kXSA9IHdyYXBwZXI7XG4gICAgLy8gUmV0dXJuIGEgY2FsbGJhY2sgdG8gYWxsb3cgc2FmZSByZW1vdmFsXG4gICAgcmV0dXJuIHJlbW92ZTtcbiAgICBmdW5jdGlvbiB3cmFwcGVyKC4uLmFyZ3MpIHtcbiAgICAgICAgLy8gSWYgd2UgaGF2ZSBiZWVuIGRlYWN0aXZhdGVkIGFuZCBhcmUgbm8gbG9uZ2VyIHdyYXBwZWQsIHJlbW92ZSBvdXJzZWx2ZXNcbiAgICAgICAgaWYgKGN1cnJlbnQgPT09IG9yaWdpbmFsICYmIG9ialttZXRob2RdID09PSB3cmFwcGVyKVxuICAgICAgICAgICAgcmVtb3ZlKCk7XG4gICAgICAgIHJldHVybiBjdXJyZW50LmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH1cbiAgICBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgICAgIC8vIElmIG5vIG90aGVyIHBhdGNoZXMsIGp1c3QgZG8gYSBkaXJlY3QgcmVtb3ZhbFxuICAgICAgICBpZiAob2JqW21ldGhvZF0gPT09IHdyYXBwZXIpIHtcbiAgICAgICAgICAgIGlmIChoYWRPd24pXG4gICAgICAgICAgICAgICAgb2JqW21ldGhvZF0gPSBvcmlnaW5hbDtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBkZWxldGUgb2JqW21ldGhvZF07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN1cnJlbnQgPT09IG9yaWdpbmFsKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAvLyBFbHNlIHBhc3MgZnV0dXJlIGNhbGxzIHRocm91Z2gsIGFuZCByZW1vdmUgd3JhcHBlciBmcm9tIHRoZSBwcm90b3R5cGUgY2hhaW5cbiAgICAgICAgY3VycmVudCA9IG9yaWdpbmFsO1xuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2Yod3JhcHBlciwgb3JpZ2luYWwgfHwgRnVuY3Rpb24pO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBkZWR1cGUoa2V5LCBvbGRGbiwgbmV3Rm4pIHtcbiAgICBjaGVja1trZXldID0ga2V5O1xuICAgIHJldHVybiBjaGVjaztcbiAgICBmdW5jdGlvbiBjaGVjayguLi5hcmdzKSB7XG4gICAgICAgIHJldHVybiAob2xkRm5ba2V5XSA9PT0ga2V5ID8gb2xkRm4gOiBuZXdGbikuYXBwbHkodGhpcywgYXJncyk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGFmdGVyKHByb21pc2UsIGNiKSB7XG4gICAgcmV0dXJuIHByb21pc2UudGhlbihjYiwgY2IpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNlcmlhbGl6ZShhc3luY0Z1bmN0aW9uKSB7XG4gICAgbGV0IGxhc3RSdW4gPSBQcm9taXNlLnJlc29sdmUoKTtcbiAgICBmdW5jdGlvbiB3cmFwcGVyKC4uLmFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIGxhc3RSdW4gPSBuZXcgUHJvbWlzZSgocmVzLCByZWopID0+IHtcbiAgICAgICAgICAgIGFmdGVyKGxhc3RSdW4sICgpID0+IHtcbiAgICAgICAgICAgICAgICBhc3luY0Z1bmN0aW9uLmFwcGx5KHRoaXMsIGFyZ3MpLnRoZW4ocmVzLCByZWopO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB3cmFwcGVyLmFmdGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbGFzdFJ1biA9IG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4geyBhZnRlcihsYXN0UnVuLCByZXMpOyB9KTtcbiAgICB9O1xuICAgIHJldHVybiB3cmFwcGVyO1xufVxuIiwgImltcG9ydCB7XHJcblx0QXBwLFxyXG5cdERyb3Bkb3duQ29tcG9uZW50LFxyXG5cdE1lbnUsXHJcblx0TW9kYWwsXHJcblx0UGxhdGZvcm0sXHJcblx0VG9nZ2xlQ29tcG9uZW50LFxyXG5cdHNldEljb24sXHJcbn0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7IEdyb3VwcywgS2V5VG9TZXR0aW5nc01hcFR5cGUsIFBsdWdpbkluZm8sIFFQU1NldHRpbmdzIH0gZnJvbSBcIi4vdHlwZXNcIjtcclxuaW1wb3J0IHsgcmVtb3ZlSXRlbSB9IGZyb20gXCIuL3V0aWxzXCI7XHJcbmltcG9ydCBRdWlja1BsdWdpblN3aXRjaGVyIGZyb20gXCIuL21haW5cIjtcclxuaW1wb3J0IHtcclxuXHRtb2RlU29ydCxcclxuXHRtb3N0U3dpdGNoZWRSZXNldEJ1dHRvbixcclxuXHRpdGVtVG9nZ2xlQ2xhc3MsXHJcblx0aXRlbVRleHRDb21wb25lbnQsXHJcblx0b3BlbkdpdEh1YlJlcG8sXHJcblx0b3BlblBsdWdpblNldHRpbmdzLFxyXG5cdHNob3dIb3RrZXlzRm9yLFxyXG5cdHNlYXJjaERpdkJ1dHRvbnMsXHJcblx0aGFuZGxlQ29udGV4dE1lbnUsXHJcblx0ZG9TZWFyY2gsXHJcblx0YWRkU2VhcmNoLFxyXG5cdGhhbmRsZURibENsaWNrLFxyXG5cdGdldEVsZW1lbnRGcm9tTW91c2VQb3NpdGlvbixcclxuXHRmaW5kTWF0Y2hpbmdJdGVtLFxyXG5cdGJ5R3JvdXBEcm9wZG93bnMsXHJcblx0Z2V0SGtleUNvbmRpdGlvbixcclxufSBmcm9tIFwiLi9tb2RhbF9jb21wb25lbnRzXCI7XHJcbmltcG9ydCB7XHJcblx0Y3JlYXRlSW5wdXQsXHJcblx0ZGVsYXllZFJlRW5hYmxlLFxyXG5cdGdldENpcmNsZXNJdGVtLFxyXG5cdGdldEVtb2ppRm9yR3JvdXAsXHJcblx0c2V0R3JvdXBUaXRsZSxcclxuXHRncm91cE5vdEVtcHR5LFxyXG5cdG9wZW5EaXJlY3RvcnlJbkZpbGVNYW5hZ2VyLFxyXG5cdHByZXNzRGVsYXksXHJcblx0cm12QWxsR3JvdXBzRnJvbVBsdWdpbixcclxuXHR0b2dnbGVQbHVnaW4sXHJcblx0cmVPcGVuTW9kYWwsXHJcbn0gZnJvbSBcIi4vbW9kYWxfdXRpbHNcIjtcclxuaW1wb3J0IHsgRGVzY3JpcHRpb25Nb2RhbCB9IGZyb20gXCIuL3NlY29uZGFyeV9tb2RhbHNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBRUFNNb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuXHRoZWFkZXI6IEhUTUxFbGVtZW50O1xyXG5cdGl0ZW1zOiBIVE1MRWxlbWVudDtcclxuXHRzZWFyY2g6IEhUTUxFbGVtZW50O1xyXG5cdHNlYXJjaFR5cGluZz0gdHJ1ZTtcclxuXHRncm91cHM6IEhUTUxFbGVtZW50O1xyXG5cdGhvdGtleXNEZXNjOiBIVE1MRWxlbWVudDtcclxuXHRpc0RibENsaWNrID0gZmFsc2U7XHJcblx0bW91c2VQb3NpdGlvbjogYW55O1xyXG5cdHByZXNzZWQgPSBmYWxzZTtcclxuXHRzZWFyY2hJbml0ID0gdHJ1ZTtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHB1YmxpYyBwbHVnaW46IFF1aWNrUGx1Z2luU3dpdGNoZXIpIHtcclxuXHRcdHN1cGVyKGFwcCk7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHR9XHJcblxyXG5cdGNvbnRhaW5lcigpIHtcclxuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG5cdFx0dGhpcy5tb2RhbEVsLmFkZENsYXNzKFwicXBzLW1vZGFsXCIpO1xyXG5cdFx0dGhpcy5oZWFkZXIgPSBjb250ZW50RWwuY3JlYXRlRWwoXCJkaXZcIiwge1xyXG5cdFx0XHRjbHM6IFwicXBzLWhlYWRlclwiLFxyXG5cdFx0fSk7XHJcblx0XHR0aGlzLnNlYXJjaCA9IGNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiLCB7IGNsczogXCJxcHMtc2VhcmNoXCIgfSk7XHJcblx0XHR0aGlzLmdyb3VwcyA9IGNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiLCB7IGNsczogXCJxcHMtZ3JvdXBzXCIgfSk7XHJcblx0XHR0aGlzLmhvdGtleXNEZXNjID0gY29udGVudEVsLmNyZWF0ZUVsKFwicFwiLCB7IGNsczogXCJxcHMtaGstZGVzY1wiIH0pO1xyXG5cdFx0dGhpcy5pdGVtcyA9IGNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiLCB7IGNsczogXCJxcHMtaXRlbXNcIiB9KTtcclxuXHJcblx0XHR0aGlzLm1vZGFsRWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCAoZXZlbnQpID0+IHtcclxuXHRcdFx0dGhpcy5tb3VzZVBvc2l0aW9uID0geyB4OiBldmVudC5jbGllbnRYLCB5OiBldmVudC5jbGllbnRZIH07XHJcblx0XHR9KTtcclxuXHJcblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZXZlbnQpID0+IHtcclxuXHRcdFx0aGFuZGxlS2V5RG93bihldmVudCwgdGhpcyk7XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLm1vZGFsRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNvbnRleHRtZW51XCIsIChldnQpID0+IHtcclxuXHRcdFx0aWYgKHRoaXMuaXNEYmxDbGljaykgcmV0dXJuO1xyXG5cdFx0XHRoYW5kbGVDb250ZXh0TWVudShldnQsIHRoaXMpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5tb2RhbEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJkYmxjbGlja1wiLCAoZXZ0KSA9PiB7XHJcblx0XHRcdGlmICh0aGlzLmlzRGJsQ2xpY2spIHJldHVybjtcclxuXHRcdFx0aGFuZGxlRGJsQ2xpY2soZXZ0LCB0aGlzKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgb25PcGVuKCkge1xyXG5cdFx0Y29uc3QgeyBwbHVnaW4sIGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHRcdGNvbnN0IHsgc2V0dGluZ3MgfSA9IHBsdWdpbjtcclxuXHRcdGlmICh0aGlzLnNlYXJjaEluaXQpIHNldHRpbmdzLnNlYXJjaCA9IFwiXCI7XHJcblx0XHRlbHNlIHRoaXMuc2VhcmNoSW5pdCA9IHRydWU7XHJcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcclxuXHRcdHRoaXMuY29udGFpbmVyKCk7XHJcblx0XHRzZXRHcm91cFRpdGxlKHRoaXMsIHBsdWdpbiwgR3JvdXBzLCBzZXR0aW5ncy5udW1iZXJPZkdyb3Vwcyk7XHJcblx0XHR0aGlzLmFkZEhlYWRlcih0aGlzLmhlYWRlcik7XHJcblx0XHRhd2FpdCBhZGRTZWFyY2godGhpcywgdGhpcy5zZWFyY2gsIFwiU2VhcmNoIHBsdWdpbnNcIik7XHJcblx0XHRzZWFyY2hEaXZCdXR0b25zKHRoaXMsIHRoaXMuc2VhcmNoKTtcclxuXHRcdHRoaXMuYWRkR3JvdXBzKHRoaXMsIHRoaXMuZ3JvdXBzKTtcclxuXHRcdGlmIChzZXR0aW5ncy5zaG93SG90S2V5cykgdGhpcy5zZXRIb3RLZXlzZGVzYygpO1xyXG5cdFx0YXdhaXQgdGhpcy5hZGRJdGVtcygpO1xyXG5cdH1cclxuXHJcblx0YWRkSGVhZGVyID0gKGNvbnRlbnRFbDogSFRNTEVsZW1lbnQpOiB2b2lkID0+IHtcclxuXHRcdGNvbnN0IHsgcGx1Z2luIH0gPSB0aGlzO1xyXG5cdFx0Y29uc3QgeyBzZXR0aW5ncyB9ID0gcGx1Z2luO1xyXG5cdFx0bmV3IERyb3Bkb3duQ29tcG9uZW50KGNvbnRlbnRFbClcclxuXHRcdFx0LmFkZE9wdGlvbnMoe1xyXG5cdFx0XHRcdGFsbDogYEFsbCgke3BsdWdpbi5sZW5ndGhBbGx9KWAsXHJcblx0XHRcdFx0ZW5hYmxlZDogYEVuYWJsZWQoJHtwbHVnaW4ubGVuZ3RoRW5hYmxlZH0pYCxcclxuXHRcdFx0XHRkaXNhYmxlZDogYERpc2FibGVkKCR7cGx1Z2luLmxlbmd0aERpc2FibGVkfSlgLFxyXG5cdFx0XHRcdGVuYWJsZWRGaXJzdDogYEVuYWJsZWQgRmlyc3QoJHtwbHVnaW4ubGVuZ3RoQWxsfSlgLFxyXG5cdFx0XHRcdG1vc3RTd2l0Y2hlZDogYE1vc3QgU3dpdGNoZWQoJHtwbHVnaW4ubGVuZ3RoQWxsfSlgLFxyXG5cdFx0XHRcdGJ5R3JvdXA6IGBCeSBHcm91cGAsXHJcblx0XHRcdH0pXHJcblx0XHRcdC5zZXRWYWx1ZShzZXR0aW5ncy5maWx0ZXJzIGFzIHN0cmluZylcclxuXHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdHNldHRpbmdzLmZpbHRlcnMgPSB2YWx1ZTtcclxuXHRcdFx0XHRhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0YXdhaXQgcmVPcGVuTW9kYWwodGhpcyk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdG1vc3RTd2l0Y2hlZFJlc2V0QnV0dG9uKHRoaXMsIGNvbnRlbnRFbCk7XHJcblxyXG5cdFx0YnlHcm91cERyb3Bkb3ducyh0aGlzLCBjb250ZW50RWwpO1xyXG5cdH07XHJcblxyXG5cdGFkZEdyb3Vwcyhtb2RhbDogUVBTTW9kYWwsIGNvbnRlbnRFbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuXHRcdGNvbnN0IGdyb3VwcyA9IE9iamVjdC52YWx1ZXMoR3JvdXBzKTtcclxuXHJcblx0XHRmb3IgKGxldCBpID0gMTsgaSA8IGdyb3Vwcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRjb25zdCBncm91cEtleSA9IGdyb3Vwc1tpXTtcclxuXHJcblx0XHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcclxuXHRcdFx0XHRcInNwYW5cIixcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRjbHM6IFwicXBzLWdyb3VwLXNwYW4tY29udGFpbmVyXCIsXHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHQoY29udCkgPT4ge1xyXG5cdFx0XHRcdFx0Y29udC5jcmVhdGVFbChcclxuXHRcdFx0XHRcdFx0XCJzcGFuXCIsXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRjbHM6IFwicXBzLWNpcmNsZS10aXRsZS1ncm91cFwiLFxyXG5cdFx0XHRcdFx0XHR9LFxyXG5cdFx0XHRcdFx0XHQoZWwpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRjaXJjbGVDU1NNb2RpZih0aGlzLCBlbCwgaSk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdCk7XHJcblxyXG5cdFx0XHRcdFx0Y29uc3Qgc3BhbiA9IGNvbnQuY3JlYXRlRWwoXCJzcGFuXCIsIHtcclxuXHRcdFx0XHRcdFx0Y2xzOiBcInFwcy1ncm91cHMtbmFtZVwiLFxyXG5cdFx0XHRcdFx0XHR0ZXh0OiBgJHtncm91cEtleX1gLFxyXG5cdFx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdFx0Y29uc3QgZ3JvdXBOdW1iZXJUZXh0ID0gYCg8c3BhbiBjbGFzcz1cInNob3J0Y3V0LW51bWJlclwiPiR7aX08L3NwYW4+KWA7XHJcblx0XHRcdFx0XHRzcGFuLmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCBncm91cE51bWJlclRleHQpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHNldEhvdEtleXNkZXNjKCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgbnVtYmVyT2ZHcm91cHMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5udW1iZXJPZkdyb3VwcztcclxuXHRcdHRoaXMuaG90a2V5c0Rlc2MuY3JlYXRlU3BhbihcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHRleHQ6IGAoMS0ke251bWJlck9mR3JvdXBzfSlcdTI3OTUgKDApXHUyNzRDIChmKVx1RDgzRFx1RENDMSBgLFxyXG5cdFx0XHR9LFxyXG5cdFx0XHQoZWwpID0+IHtcclxuXHRcdFx0XHRlbC5jcmVhdGVTcGFuKHsgdGV4dDogXCIoZylcIiB9LCAoZWwpID0+IHtcclxuXHRcdFx0XHRcdGxldCBnaXRIdWJJY29uID0gZWwuY3JlYXRlU3Bhbih7IGNsczogXCJnaXQtaHViLWljb25cIiB9KTtcclxuXHRcdFx0XHRcdHNldEljb24oZ2l0SHViSWNvbiwgXCJnaXRodWJcIik7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0ZWwuY3JlYXRlU3Bhbih7XHJcblx0XHRcdFx0XHR0ZXh0OiBgIChpKVx1MjEzOVx1RkUwRiAocylcdTI2OTlcdUZFMEYgKGgpXHUyMzI4XHVGRTBGIGAsXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0ZWwuY3JlYXRlU3Bhbih7XHJcblx0XHRcdFx0XHRjbHM6IFwicXBzLWhrLWRlc2MtbGFzdC1wYXJ0XCIsXHJcblx0XHRcdFx0XHR0ZXh0OiBgKFx1RDgzRFx1RERCMVx1RkUwRngyKWRlbGF5YCxcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0KTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGFkZEl0ZW1zKCkge1xyXG5cdFx0Y29uc3QgeyBwbHVnaW4gfSA9IHRoaXM7XHJcblx0XHRjb25zdCB7IHNldHRpbmdzIH0gPSBwbHVnaW47XHJcblx0XHRjb25zdCB7IGFsbFBsdWdpbnNMaXN0IH0gPSBzZXR0aW5ncztcclxuXHRcdGNvbnN0IHZhbHVlID0gc2V0dGluZ3Muc2VhcmNoO1xyXG5cdFx0bGV0IGxpc3RJdGVtcyA9IGRvU2VhcmNoKHRoaXMsIHZhbHVlLCBhbGxQbHVnaW5zTGlzdCkgYXMgUGx1Z2luSW5mb1tdO1xyXG5cdFx0Ly8gU29ydCBmb3IgY2hvc2VuIG1vZGVcclxuXHRcdGxpc3RJdGVtcyA9IG1vZGVTb3J0KHBsdWdpbiwgbGlzdEl0ZW1zKTtcclxuXHJcblx0XHQvLyB0b2dnbGUgcGx1Z2luXHJcblx0XHRmb3IgKGNvbnN0IHBsdWdpbkl0ZW0gb2YgbGlzdEl0ZW1zKSB7XHJcblx0XHRcdGlmIChcclxuXHRcdFx0XHQoc2V0dGluZ3MuZmlsdGVycyA9PT0gXCJlbmFibGVkXCIgJiYgIXBsdWdpbkl0ZW0uZW5hYmxlZCkgfHxcclxuXHRcdFx0XHQoc2V0dGluZ3MuZmlsdGVycyA9PT0gXCJkaXNhYmxlZFwiICYmIHBsdWdpbkl0ZW0uZW5hYmxlZClcclxuXHRcdFx0KSB7XHJcblx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIGNyZWF0ZSBpdGVtc1xyXG5cdFx0XHRsZXQgaXRlbUNvbnRhaW5lciA9IHRoaXMuaXRlbXMuY3JlYXRlRWwoXCJkaXZcIiwge1xyXG5cdFx0XHRcdGNsczogXCJxcHMtaXRlbS1saW5lXCIsXHJcblx0XHRcdH0pO1xyXG5cdFx0XHRpdGVtVG9nZ2xlUGx1Z2luQnV0dG9uKHRoaXMsIHBsdWdpbkl0ZW0sIGl0ZW1Db250YWluZXIpO1xyXG5cdFx0XHRjb25zdCBpbnB1dCA9IGl0ZW1UZXh0Q29tcG9uZW50KHBsdWdpbkl0ZW0sIGl0ZW1Db250YWluZXIpO1xyXG5cdFx0XHRpdGVtVG9nZ2xlQ2xhc3ModGhpcywgcGx1Z2luSXRlbSwgaXRlbUNvbnRhaW5lcik7XHJcblx0XHRcdGlucHV0LnJlYWRPbmx5ID0gdHJ1ZTtcclxuXHRcdFx0Ly8gY3JlYXRlIGdyb3VwcyBjaXJjbGVzXHJcblx0XHRcdGFkZEdyb3VwQ2lyY2xlcyhpbnB1dCwgcGx1Z2luSXRlbSk7XHJcblxyXG5cdFx0XHQvLyBjcmVhdGUgdGVtcCBpbnB1dCBpbiBpbnB1dCB0byBtb2RpZnkgZGVsYXllZCBlbnRlcmluZyB0aW1lXHJcblx0XHRcdGl0ZW1Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImRibGNsaWNrXCIsIGFzeW5jIChldnQpID0+IHtcclxuXHRcdFx0XHRpZiAocGx1Z2luSXRlbS5pZCA9PT0gXCJxdWljay1wbHVnaW4tc3dpdGNoZXJcIikgcmV0dXJuO1xyXG5cdFx0XHRcdGNvbnN0IHsgcGx1Z2luIH0gPSB0aGlzO1xyXG5cdFx0XHRcdGNvbnN0IGN1cnJlbnRWYWx1ZSA9IHBsdWdpbkl0ZW0udGltZS50b1N0cmluZygpO1xyXG5cdFx0XHRcdHRoaXMuaXNEYmxDbGljayA9IHRydWU7XHJcblx0XHRcdFx0aWYgKCFpdGVtQ29udGFpbmVyKSB7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGNvbnN0IGlucHV0ID0gY3JlYXRlSW5wdXQoaXRlbUNvbnRhaW5lciwgY3VycmVudFZhbHVlKTtcclxuXHJcblx0XHRcdFx0aWYgKCFwbHVnaW5JdGVtLmRlbGF5ZWQpIHtcclxuXHRcdFx0XHRcdGlucHV0Py5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBhc3luYyAoZXZlbnQpID0+IHtcclxuXHRcdFx0XHRcdFx0aWYgKGV2ZW50LmtleSA9PT0gXCJFbnRlclwiKSB7XHJcblx0XHRcdFx0XHRcdFx0c2V0VGltZW91dChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmFkZERlbGF5KHBsdWdpbkl0ZW0sIGlucHV0KTtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMuaXNEYmxDbGljayA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0XHRcdH0sIDEwMCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0aW5wdXQ/LmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsICgpID0+IHtcclxuXHRcdFx0XHRcdFx0c2V0VGltZW91dChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5hZGREZWxheShwbHVnaW5JdGVtLCBpbnB1dCk7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5pc0RibENsaWNrID0gZmFsc2U7XHJcblx0XHRcdFx0XHRcdH0sIDEwMCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0cGx1Z2luSXRlbS5kZWxheWVkID0gZmFsc2U7XHJcblx0XHRcdFx0XHRhd2FpdCAodGhpcy5hcHAgYXMgYW55KS5wbHVnaW5zLmVuYWJsZVBsdWdpbkFuZFNhdmUoXHJcblx0XHRcdFx0XHRcdHBsdWdpbkl0ZW0uaWRcclxuXHRcdFx0XHRcdCk7XHJcblx0XHRcdFx0XHR0aGlzLmlzRGJsQ2xpY2sgPSBmYWxzZTtcclxuXHRcdFx0XHRcdGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdGF3YWl0IHJlT3Blbk1vZGFsKHRoaXMpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRhZGREZWxheSA9IGFzeW5jIChwbHVnaW5JdGVtOiBQbHVnaW5JbmZvLCBpbnB1dDogSFRNTElucHV0RWxlbWVudCkgPT4ge1xyXG5cdFx0cGx1Z2luSXRlbS5kZWxheWVkID0gdHJ1ZTtcclxuXHRcdHBsdWdpbkl0ZW0udGltZSA9IHBhcnNlSW50KGlucHV0LnZhbHVlKSB8fCAwO1xyXG5cclxuXHRcdGlmIChwbHVnaW5JdGVtLnRpbWUgPT09IDApIHtcclxuXHRcdFx0cGx1Z2luSXRlbS5kZWxheWVkID0gZmFsc2U7XHJcblx0XHR9XHJcblx0XHRpZiAocGx1Z2luSXRlbS5kZWxheWVkICYmIHBsdWdpbkl0ZW0uZW5hYmxlZCkge1xyXG5cdFx0XHRkZWxheWVkUmVFbmFibGUodGhpcywgcGx1Z2luSXRlbSk7XHJcblx0XHR9XHJcblx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdGF3YWl0IHJlT3Blbk1vZGFsKHRoaXMpO1xyXG5cdH07XHJcblxyXG5cdG9uQ2xvc2UoKSB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cdFx0ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCAoZXZlbnQpID0+IHtcclxuXHRcdFx0dGhpcy5tb3VzZVBvc2l0aW9uID0geyB4OiBldmVudC5jbGllbnRYLCB5OiBldmVudC5jbGllbnRZIH07XHJcblx0XHR9KTtcclxuXHJcblx0XHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZXZlbnQpID0+IHtcclxuXHRcdFx0aGFuZGxlS2V5RG93bihldmVudCwgdGhpcyk7XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLm1vZGFsRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNvbnRleHRtZW51XCIsIChldnQpID0+IHtcclxuXHRcdFx0aWYgKHRoaXMuaXNEYmxDbGljaykgcmV0dXJuO1xyXG5cdFx0XHRoYW5kbGVDb250ZXh0TWVudShldnQsIHRoaXMpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5tb2RhbEVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkYmxjbGlja1wiLCAoZXZ0KSA9PiB7XHJcblx0XHRcdGlmICh0aGlzLmlzRGJsQ2xpY2spIHJldHVybjtcclxuXHRcdFx0aGFuZGxlRGJsQ2xpY2soZXZ0LCB0aGlzKTtcclxuXHRcdH0pO1xyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gY2lyY2xlQ1NTTW9kaWYoXHJcblx0bW9kYWw6IFFQU01vZGFsLFxyXG5cdGVsOiBIVE1MU3BhbkVsZW1lbnQsXHJcblx0Z3JvdXBJbmRleDogbnVtYmVyXHJcbikge1xyXG5cdGNvbnN0IHsgc2V0dGluZ3MgfSA9IG1vZGFsLnBsdWdpbjtcclxuXHRjb25zdCB7IGNvbG9yIH0gPSBnZXRFbW9qaUZvckdyb3VwKGdyb3VwSW5kZXgpO1xyXG5cdGVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGNvbG9yO1xyXG5cdGVsLnRleHRDb250ZW50ID0gKFxyXG5cdFx0c2V0dGluZ3MuZ3JvdXBzW2dyb3VwSW5kZXhdLnRpbWUgPyBzZXR0aW5ncy5ncm91cHNbZ3JvdXBJbmRleF0udGltZSA6IFwiXCJcclxuXHQpLnRvU3RyaW5nKCk7XHJcbn1cclxuXHJcbmNvbnN0IGl0ZW1Ub2dnbGVQbHVnaW5CdXR0b24gPSAoXHJcblx0bW9kYWw6IFFQU01vZGFsLFxyXG5cdHBsdWdpbkl0ZW06IFBsdWdpbkluZm8sXHJcblx0aXRlbUNvbnRhaW5lcjogSFRNTERpdkVsZW1lbnRcclxuKSA9PiB7XHJcblx0bGV0IGRpc2FibGUgPSBwbHVnaW5JdGVtLmlkID09PSBcInF1aWNrLXBsdWdpbi1zd2l0Y2hlclwiO1xyXG5cdGNvbnN0IHRvZ2dsZUJ1dHRvbiA9IG5ldyBUb2dnbGVDb21wb25lbnQoaXRlbUNvbnRhaW5lcilcclxuXHRcdC5zZXRWYWx1ZShwbHVnaW5JdGVtLmVuYWJsZWQpXHJcblx0XHQuc2V0RGlzYWJsZWQoZGlzYWJsZSkgLy9xdWljay1wbHVnaW4tc3dpdGNoZXIgZGlzYWJsZWRcclxuXHRcdC5vbkNoYW5nZShhc3luYyAoKSA9PiB7XHJcblx0XHRcdG1vZGFsLnNlYXJjaEluaXQgPSBmYWxzZTtcclxuXHRcdFx0YXdhaXQgdG9nZ2xlUGx1Z2luKG1vZGFsLCBwbHVnaW5JdGVtKTtcclxuXHRcdH0pO1xyXG59O1xyXG5cclxuY29uc3QgYWRkR3JvdXBDaXJjbGVzID0gKGlucHV0OiBIVE1MRWxlbWVudCwgaXRlbTogUGx1Z2luSW5mbykgPT4ge1xyXG5cdGNvbnN0IGluZGljZXMgPSBpdGVtLmdyb3VwSW5mby5ncm91cEluZGljZXM7XHJcblx0aWYgKCFpbmRpY2VzLmxlbmd0aCkgcmV0dXJuO1xyXG5cdGlmIChpbmRpY2VzLmxlbmd0aCA8IDMpIHtcclxuXHRcdGNvbnN0IGNvbnRlbnQgPSBnZXRDaXJjbGVzSXRlbShpbmRpY2VzKTtcclxuXHRcdGlucHV0Lmluc2VydEFkamFjZW50SFRNTChcImFmdGVyZW5kXCIsIGNvbnRlbnQpO1xyXG5cdH1cclxuXHJcblx0aWYgKGluZGljZXMubGVuZ3RoID49IDMgJiYgaW5kaWNlcy5sZW5ndGggPCA1KSB7XHJcblx0XHQvLyAyIGNpcmNsZXNcclxuXHRcdGNvbnN0IFt2YWxldXIwLCB2YWxldXIxLCAuLi5wYXJ0Ml0gPSBpbmRpY2VzO1xyXG5cdFx0Y29uc3QgcGFydDEgPSBbdmFsZXVyMCwgdmFsZXVyMV07XHJcblxyXG5cdFx0Y29uc3QgY29udGVudDEgPSBnZXRDaXJjbGVzSXRlbShwYXJ0MSk7XHJcblx0XHRpbnB1dC5pbnNlcnRBZGphY2VudEhUTUwoXCJhZnRlcmVuZFwiLCBjb250ZW50MSk7XHJcblxyXG5cdFx0Y29uc3QgY29udGVudDIgPSBnZXRDaXJjbGVzSXRlbShwYXJ0Mik7XHJcblx0XHRpbnB1dC5pbnNlcnRBZGphY2VudEhUTUwoXCJhZnRlcmVuZFwiLCBjb250ZW50Mik7XHJcblx0fSBlbHNlIGlmIChpbmRpY2VzLmxlbmd0aCA+PSA1KSB7XHJcblx0XHQvLyAzIGNpcmNsZXNcclxuXHRcdGNvbnN0IFt2YWxldXIwLCB2YWxldXIxLCB2YWxldXIyLCB2YWxldXIzLCAuLi5wYXJ0M10gPSBpbmRpY2VzO1xyXG5cdFx0Y29uc3QgcGFydDEgPSBbdmFsZXVyMCwgdmFsZXVyMV07XHJcblx0XHRjb25zdCBwYXJ0MiA9IFt2YWxldXIyLCB2YWxldXIzXTtcclxuXHJcblx0XHRjb25zdCBjb250ZW50MSA9IGdldENpcmNsZXNJdGVtKHBhcnQxKTtcclxuXHRcdGlucHV0Lmluc2VydEFkamFjZW50SFRNTChcImFmdGVyZW5kXCIsIGNvbnRlbnQxKTtcclxuXHJcblx0XHRjb25zdCBjb250ZW50MiA9IGdldENpcmNsZXNJdGVtKHBhcnQyKTtcclxuXHRcdGlucHV0Lmluc2VydEFkamFjZW50SFRNTChcImFmdGVyZW5kXCIsIGNvbnRlbnQyKTtcclxuXHJcblx0XHRjb25zdCBjb250ZW50MyA9IGdldENpcmNsZXNJdGVtKHBhcnQzKTtcclxuXHRcdGlucHV0Lmluc2VydEFkamFjZW50SFRNTChcImFmdGVyZW5kXCIsIGNvbnRlbnQzKTtcclxuXHR9XHJcbn07XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVLZXlEb3duKGV2ZW50OiBLZXlib2FyZEV2ZW50LCBtb2RhbDogUVBTTW9kYWwpIHtcclxuXHQvLyBjb25zdCBrZXkgPSBldmVudC5rZXk7XHJcblx0Y29uc3QgZWxlbWVudEZyb21Qb2ludCA9IGdldEVsZW1lbnRGcm9tTW91c2VQb3NpdGlvbihldmVudCwgbW9kYWwpO1xyXG5cdGNvbnN0IHBsdWdpbkl0ZW1CbG9jayA9IGVsZW1lbnRGcm9tUG9pbnQ/LmNsb3Nlc3QoXHJcblx0XHRcIi5xcHMtaXRlbS1saW5lXCJcclxuXHQpIGFzIEhUTUxFbGVtZW50O1xyXG5cclxuXHRpZiAocGx1Z2luSXRlbUJsb2NrKSB7XHJcblx0XHRtb2RhbC5zZWFyY2hUeXBpbmcgPSBmYWxzZTtcclxuXHRcdGNvbnN0IG1hdGNoaW5nSXRlbSA9IGZpbmRNYXRjaGluZ0l0ZW0obW9kYWwsIHBsdWdpbkl0ZW1CbG9jayk7XHJcblx0XHRpZiAobWF0Y2hpbmdJdGVtKSB7XHJcblx0XHRcdGhhbmRsZUhvdGtleXNRUFMobW9kYWwsIGV2ZW50LCBtYXRjaGluZ0l0ZW0gYXMgUGx1Z2luSW5mbyk7XHJcblx0XHR9XHJcblx0fWVsc2V7XHJcblx0XHRtb2RhbC5zZWFyY2hUeXBpbmcgPSB0cnVlO1xyXG5cdH1cclxufVxyXG5cclxuY29uc3QgaGFuZGxlSG90a2V5c1FQUyA9IGFzeW5jIChcclxuXHRtb2RhbDogUVBTTW9kYWwsXHJcblx0ZXZ0OiBLZXlib2FyZEV2ZW50LFxyXG5cdHBsdWdpbkl0ZW06IFBsdWdpbkluZm9cclxuKSA9PiB7XHJcblx0Y29uc3QgeyBwbHVnaW4gfSA9IG1vZGFsO1xyXG5cdGNvbnN0IHsgc2V0dGluZ3MgfSA9IHBsdWdpbjtcclxuXHRjb25zdCBudW1iZXJPZkdyb3VwcyA9IHNldHRpbmdzLm51bWJlck9mR3JvdXBzO1xyXG5cdC8vIGNvbnN0IHBsdWdpblNldHRpbmdzID0gKG1vZGFsLmFwcCBhcyBhbnkpLnNldHRpbmcub3BlblRhYkJ5SWQoXHJcblx0Ly8gXHRwbHVnaW5JdGVtLmlkXHJcblx0Ly8gKTtcclxuXHQvLyBjb25zdCBjb25kaXRpb24gPSBhd2FpdCBnZXRIa2V5Q29uZGl0aW9uKG1vZGFsLCBwbHVnaW5JdGVtKTtcdFxyXG5cclxuXHRjb25zdCBLZXlUb1NldHRpbmdzTWFwOiBLZXlUb1NldHRpbmdzTWFwVHlwZSA9IHtcclxuXHRcdGc6IGFzeW5jICgpID0+IGF3YWl0IG9wZW5HaXRIdWJSZXBvKHBsdWdpbkl0ZW0pLFxyXG5cdFx0czogYXN5bmMgKCkgPT4gYXdhaXQgb3BlblBsdWdpblNldHRpbmdzKG1vZGFsLCBwbHVnaW5JdGVtKSxcclxuXHRcdGg6IGFzeW5jICgpID0+IGF3YWl0IHNob3dIb3RrZXlzRm9yKG1vZGFsLCBwbHVnaW5JdGVtKSxcclxuXHRcdGk6ICgpID0+IG5ldyBEZXNjcmlwdGlvbk1vZGFsKHBsdWdpbi5hcHAsIHBsdWdpbiwgcGx1Z2luSXRlbSkub3BlbigpLFxyXG5cdH07XHJcblx0aWYgKFBsYXRmb3JtLmlzRGVza3RvcEFwcClcclxuXHRcdEtleVRvU2V0dGluZ3NNYXBbXCJmXCJdID0gYXN5bmMgKCkgPT5cclxuXHRcdFx0YXdhaXQgb3BlbkRpcmVjdG9yeUluRmlsZU1hbmFnZXIobW9kYWwsIHBsdWdpbkl0ZW0pO1xyXG5cclxuXHRjb25zdCBrZXlQcmVzc2VkID0gZXZ0LmtleTtcclxuXHRjb25zdCBpdGVtSUQgPSBwbHVnaW5JdGVtLmlkO1xyXG5cdGNvbnN0IHRhZ2dlZEl0ZW0gPSBzZXR0aW5ncy5wbHVnaW5zVGFnZ2VkW2l0ZW1JRF07XHJcblx0aWYgKCF0YWdnZWRJdGVtKSB7XHJcblx0XHRzZXR0aW5ncy5wbHVnaW5zVGFnZ2VkW2l0ZW1JRF0gPSB7XHJcblx0XHRcdGdyb3VwSW5mbzogeyBncm91cEluZGljZXM6IFtdIH0sXHJcblx0XHR9O1xyXG5cdFx0YXdhaXQgbW9kYWwucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0YXdhaXQgcmVPcGVuTW9kYWwobW9kYWwpO1xyXG5cdH1cclxuXHRpZiAoIXRhZ2dlZEl0ZW0gfHwgbW9kYWwucHJlc3NlZCkge1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHRwcmVzc0RlbGF5KG1vZGFsKTtcclxuXHJcblx0aWYgKG1vZGFsLmlzRGJsQ2xpY2spIHJldHVybjtcclxuXHRjb25zdCBncm91cEluZGljZXMgPSBwbHVnaW5JdGVtLmdyb3VwSW5mby5ncm91cEluZGljZXM7XHJcblx0Y29uc3Qga2V5ID0gcGFyc2VJbnQoa2V5UHJlc3NlZCk7XHJcblx0aWYgKFxyXG5cdFx0a2V5ID4gMCAmJlxyXG5cdFx0a2V5IDw9IG51bWJlck9mR3JvdXBzICYmXHJcblx0XHQhKHBsdWdpbkl0ZW0uaWQgPT09IFwicXVpY2stcGx1Z2luLXN3aXRjaGVyXCIpXHJcblx0KSB7XHJcblx0XHRpZiAoZ3JvdXBJbmRpY2VzLmxlbmd0aCA9PT0gNikgcmV0dXJuO1xyXG5cdFx0Y29uc3QgaW5kZXggPSBncm91cEluZGljZXMuaW5kZXhPZihrZXkpO1xyXG5cdFx0aWYgKGluZGV4ID09PSAtMSkge1xyXG5cdFx0XHRncm91cEluZGljZXM/LnB1c2goa2V5KTtcclxuXHRcdFx0YXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRhd2FpdCByZU9wZW5Nb2RhbChtb2RhbCk7XHJcblx0XHR9XHJcblx0fSBlbHNlIGlmIChrZXlQcmVzc2VkIGluIEtleVRvU2V0dGluZ3NNYXApIHtcclxuXHRcdEtleVRvU2V0dGluZ3NNYXBba2V5UHJlc3NlZF0oKTtcclxuXHR9IGVsc2UgaWYgKFxyXG5cdFx0KGtleVByZXNzZWQgPT09IFwiRGVsZXRlXCIgfHxcclxuXHRcdFx0a2V5UHJlc3NlZCA9PT0gXCJCYWNrc3BhY2VcIiB8fFxyXG5cdFx0XHRrZXlQcmVzc2VkID09PSBcIjBcIikgJiZcclxuXHRcdCEocGx1Z2luSXRlbS5pZCA9PT0gXCJxdWljay1wbHVnaW4tc3dpdGNoZXJcIilcclxuXHQpIHtcclxuXHRcdGlmICghZ3JvdXBJbmRpY2VzLmxlbmd0aCkgcmV0dXJuO1xyXG5cdFx0aWYgKGdyb3VwSW5kaWNlcy5sZW5ndGggPT09IDEpIHtcclxuXHRcdFx0Y29uc3QgZ3JvdXBJbmRleCA9IGdyb3VwSW5kaWNlc1swXTtcclxuXHRcdFx0cGx1Z2luSXRlbS5ncm91cEluZm8uZ3JvdXBJbmRpY2VzID0gW107XHJcblx0XHRcdGlmICghZ3JvdXBOb3RFbXB0eShncm91cEluZGV4LCBtb2RhbCkpIHtcclxuXHRcdFx0XHRzZXR0aW5ncy5zZWxlY3RlZEdyb3VwID0gXCJTZWxlY3RHcm91cFwiO1xyXG5cdFx0XHR9XHJcblx0XHRcdGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0YXdhaXQgcmVPcGVuTW9kYWwobW9kYWwpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Y29uc3QgbWVudSA9IG5ldyBNZW51KCk7XHJcblx0XHRcdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cclxuXHRcdFx0XHRpdGVtXHJcblx0XHRcdFx0XHQuc2V0VGl0bGUoXCJSZW1vdmUgaXRlbSBncm91cChzKVwiKVxyXG5cdFx0XHRcdFx0LnNldERpc2FibGVkKHRydWUpXHJcblx0XHRcdFx0XHQuc2V0RGlzYWJsZWQodHJ1ZSlcclxuXHRcdFx0KTtcclxuXHRcdFx0bWVudS5hZGRTZXBhcmF0b3IoKTtcclxuXHRcdFx0bWVudS5hZGRJdGVtKChpdGVtKSA9PlxyXG5cdFx0XHRcdGl0ZW0uc2V0VGl0bGUoXCJBbGxcIikub25DbGljayhhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRhd2FpdCBybXZBbGxHcm91cHNGcm9tUGx1Z2luKG1vZGFsLCBwbHVnaW5JdGVtKTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHQpO1xyXG5cdFx0XHRmb3IgKGNvbnN0IGdyb3VwSW5kZXggb2YgZ3JvdXBJbmRpY2VzKSB7XHJcblx0XHRcdFx0Y29uc3QgeyBlbW9qaSB9ID0gZ2V0RW1vamlGb3JHcm91cChncm91cEluZGV4KTtcclxuXHRcdFx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XHJcblx0XHRcdFx0XHRpdGVtXHJcblx0XHRcdFx0XHRcdC5zZXRUaXRsZShgJHtlbW9qaX0gZ3JvdXAgJHtncm91cEluZGV4fWApXHJcblx0XHRcdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRwbHVnaW5JdGVtLmdyb3VwSW5mby5ncm91cEluZGljZXMgPSByZW1vdmVJdGVtKFxyXG5cdFx0XHRcdFx0XHRcdFx0cGx1Z2luSXRlbS5ncm91cEluZm8uZ3JvdXBJbmRpY2VzLFxyXG5cdFx0XHRcdFx0XHRcdFx0Z3JvdXBJbmRleFxyXG5cdFx0XHRcdFx0XHRcdCk7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHJlT3Blbk1vZGFsKG1vZGFsKTtcclxuXHRcdFx0XHRcdFx0fSlcclxuXHRcdFx0XHQpO1xyXG5cdFx0XHR9XHJcblx0XHRcdG1lbnUuc2hvd0F0UG9zaXRpb24obW9kYWwubW91c2VQb3NpdGlvbik7XHJcblx0XHR9XHJcblx0fVxyXG59OyIsICJleHBvcnQgY29uc3QgY29tbVBsdWdpbnMgPVxyXG5cdFwiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL29ic2lkaWFubWQvb2JzaWRpYW4tcmVsZWFzZXMvbWFzdGVyL2NvbW11bml0eS1wbHVnaW5zLmpzb25cIjtcclxuXHJcbmV4cG9ydCBjb25zdCBjb21tUGx1Z2luU3RhdHMgPVxyXG5cdFwiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL29ic2lkaWFubWQvb2JzaWRpYW4tcmVsZWFzZXMvbWFzdGVyL2NvbW11bml0eS1wbHVnaW4tc3RhdHMuanNvblwiO1xyXG5cclxuZGVjbGFyZSBnbG9iYWwge1xyXG5cdGludGVyZmFjZSBXaW5kb3cge1xyXG5cdFx0ZWxlY3Ryb246IGFueTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBGaWx0ZXJzOiBHcm91cERhdGEgPSB7XHJcblx0QWxsOiBcImFsbFwiLFxyXG5cdEVuYWJsZWQ6IFwiZW5hYmxlZFwiLFxyXG5cdERpc2FibGVkOiBcImRpc2FibGVkXCIsXHJcblx0RW5hYmxlZEZpcnN0OiBcImVuYWJsZWRGaXJzdFwiLFxyXG5cdE1vc3RTd2l0Y2hlZDogXCJtb3N0U3dpdGNoZWRcIixcclxuXHRCeUdyb3VwOiBcImJ5R3JvdXBcIixcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBDb21tRmlsdGVyczogR3JvdXBEYXRhID0ge1xyXG5cdEFsbDogXCJhbGxcIixcclxuXHROb3RJbnN0YWxsZWQ6IFwibm90IGluc3RhbGxlZFwiLFxyXG5cdEluc3RhbGxlZDogXCJpbnN0YWxsZWRcIixcclxuXHRCeUdyb3VwOiBcImJ5R3JvdXBcIixcclxufTtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgR3JvdXBEYXRhIHtcclxuXHRba2V5OiBzdHJpbmddOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBHcm91cHM6IEdyb3VwRGF0YSA9IHtcclxuXHRTZWxlY3RHcm91cDogXCJBbGxcIixcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBHcm91cHNDb21tOiBHcm91cERhdGEgPSB7XHJcblx0U2VsZWN0R3JvdXA6IFwiQWxsXCIsXHJcbn07XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFBsdWdpbkdyb3VwSW5mbyB7XHJcblx0Z3JvdXBJbmRpY2VzOiBudW1iZXJbXTtcclxuXHRncm91cFdhc0VuYWJsZWQ6IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUGx1Z2luVGFnZ2VkR3JvdXBJbmZvIHtcclxuXHRncm91cEluZGljZXM6IG51bWJlcltdO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFFQU1NldHRpbmdzIHtcclxuXHRsYXN0RmV0Y2hFeGU6bnVtYmVyO1xyXG5cdHNhdmVkVmVyc2lvbjogc3RyaW5nO1xyXG5cdGFsbFBsdWdpbnNMaXN0OiBQbHVnaW5JbmZvW107XHJcblx0d2FzRW5hYmxlZDogc3RyaW5nW107XHJcblx0ZmlsdGVyczoga2V5b2YgdHlwZW9mIEZpbHRlcnM7XHJcblx0c2VsZWN0ZWRHcm91cDogc3RyaW5nO1xyXG5cdHNlYXJjaDogc3RyaW5nO1xyXG5cdG51bWJlck9mR3JvdXBzOiBudW1iZXI7XHJcblx0Z3JvdXBzOiBSZWNvcmQ8XHJcblx0XHRudW1iZXIsXHJcblx0XHR7IG5hbWU6IHN0cmluZzsgZGVsYXllZDogYm9vbGVhbjsgdGltZTogbnVtYmVyOyBhcHBsaWVkOiBib29sZWFuIH1cclxuXHQ+O1xyXG5cdHNob3dIb3RLZXlzOiBib29sZWFuO1xyXG5cdC8vIGNvbW1udW5pdHkgcGx1Z2luc1xyXG5cdHBsdWdpblN0YXRzOiBQYWNrYWdlSW5mb0RhdGE7XHJcblx0cGx1Z2luc1RhZ2dlZDogUGx1Z2luc1RhZ2dlZEluZm87XHJcblx0Y29tbVBsdWdpbnM6IFBsdWdpbkNvbW1JbmZvW107XHJcblx0ZmlsdGVyc0NvbW06IGtleW9mIHR5cGVvZiBDb21tRmlsdGVycztcclxuXHRzZWxlY3RlZEdyb3VwQ29tbTogc3RyaW5nO1xyXG5cdG51bWJlck9mR3JvdXBzQ29tbTogbnVtYmVyO1xyXG5cdGdyb3Vwc0NvbW06IFJlY29yZDxudW1iZXIsIHsgbmFtZTogc3RyaW5nIH0+O1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogUVBTU2V0dGluZ3MgPSB7XHJcblx0bGFzdEZldGNoRXhlOiAwLFxyXG5cdHNhdmVkVmVyc2lvbjogXCIwLjAuMFwiLFxyXG5cdGFsbFBsdWdpbnNMaXN0OiBbXSxcclxuXHR3YXNFbmFibGVkOiBbXSxcclxuXHRmaWx0ZXJzOiBGaWx0ZXJzLkFsbCxcclxuXHRzZWxlY3RlZEdyb3VwOiBcIlNlbGVjdEdyb3VwXCIsXHJcblx0c2VhcmNoOiBcIlwiLFxyXG5cdG51bWJlck9mR3JvdXBzOiA0LFxyXG5cdGdyb3Vwczoge30sXHJcblx0c2hvd0hvdEtleXM6IHRydWUsXHJcblx0Ly8gY29tbW51bml0eSBwbHVnaW5zXHJcblx0cGx1Z2luU3RhdHM6IHt9LFxyXG5cdHBsdWdpbnNUYWdnZWQ6IHt9LFxyXG5cdGNvbW1QbHVnaW5zOiBbXSxcclxuXHRmaWx0ZXJzQ29tbTogQ29tbUZpbHRlcnMuQWxsLFxyXG5cdHNlbGVjdGVkR3JvdXBDb21tOiBcIlNlbGVjdEdyb3VwXCIsXHJcblx0bnVtYmVyT2ZHcm91cHNDb21tOiA0LFxyXG5cdGdyb3Vwc0NvbW06IHt9LFxyXG59O1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBQbHVnaW5JbmZvIHtcclxuXHRuYW1lOiBzdHJpbmc7XHJcblx0aWQ6IHN0cmluZztcclxuXHRkZXNjOiBzdHJpbmc7XHJcblx0ZGlyOiBzdHJpbmc7XHJcblx0YXV0aG9yOiBzdHJpbmc7XHJcblx0YXV0aG9yVXJsPzogc3RyaW5nO1xyXG5cdGRlc2t0b3BPbmx5OiBib29sZWFuO1xyXG5cdHZlcnNpb246IHN0cmluZztcclxuXHRlbmFibGVkOiBib29sZWFuO1xyXG5cdHN3aXRjaGVkOiBudW1iZXI7XHJcblx0Z3JvdXBJbmZvOiBQbHVnaW5Hcm91cEluZm87XHJcblx0ZGVsYXllZDogYm9vbGVhbjtcclxuXHR0aW1lOiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIEtleVRvU2V0dGluZ3NNYXBUeXBlID0ge1xyXG5cdFtrZXk6IHN0cmluZ106ICgpID0+IFByb21pc2U8dm9pZD4gfCB2b2lkO1xyXG59O1xyXG5cclxuLy8gY29tbXVuaXR5IHBsdWdpbnNcclxuZXhwb3J0IGludGVyZmFjZSBQbHVnaW5Db21tSW5mbyB7XHJcblx0bmFtZTogc3RyaW5nO1xyXG5cdGlkOiBzdHJpbmc7XHJcblx0ZGVzY3JpcHRpb246IHN0cmluZztcclxuXHRhdXRob3I6IHN0cmluZztcclxuXHRyZXBvOiBzdHJpbmc7XHJcblx0Z3JvdXBJbmZvPzogUGx1Z2luVGFnZ2VkR3JvdXBJbmZvO1xyXG59XHJcblxyXG4vL3JlbGVhc2VzXHJcbmludGVyZmFjZSBQYWNrYWdlRGF0YSB7XHJcblx0ZG93bmxvYWRzOiBudW1iZXI7XHJcblx0dXBkYXRlZDogbnVtYmVyO1xyXG5cdFt2ZXJzaW9uOiBzdHJpbmddOiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUGFja2FnZUluZm9EYXRhIHtcclxuXHRbcGFja2FnZU5hbWU6IHN0cmluZ106IFBhY2thZ2VEYXRhO1xyXG59XHJcblxyXG4vL2NvbW0gcGx1Z2lucyB0YWdnZWRcclxuaW50ZXJmYWNlIEdyb3VwS2VZIHtcclxuXHRncm91cEluZm86IFBsdWdpblRhZ2dlZEdyb3VwSW5mbztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBQbHVnaW5zVGFnZ2VkSW5mbyB7XHJcblx0W2tleTogc3RyaW5nXTogR3JvdXBLZVk7XHJcbn1cclxuIiwgImltcG9ydCB7IENQTW9kYWwgfSBmcm9tIFwiLi9jb21tdW5pdHktcGx1Z2luc19tb2RhbFwiO1xyXG5pbXBvcnQgeyBRUFNNb2RhbCB9IGZyb20gXCIuL21haW5fbW9kYWxcIjtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0VuYWJsZWQobW9kYWw6YW55LCBuYW1lOiBzdHJpbmcpOiBib29sZWFuIHtcclxuXHRyZXR1cm4gKG1vZGFsLmFwcCBhcyBhbnkpLnBsdWdpbnMuZW5hYmxlZFBsdWdpbnMuaGFzKG5hbWUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlSXRlbTxUPihhcnI6IEFycmF5PFQ+LCB2YWx1ZTogVCk6IEFycmF5PFQ+IHtcclxuXHRjb25zdCBpbmRleCA9IGFyci5pbmRleE9mKHZhbHVlKTtcclxuXHRpZiAoaW5kZXggPiAtMSkge1xyXG5cdFx0YXJyLnNwbGljZShpbmRleCwgMSk7XHJcblx0fVxyXG5cdHJldHVybiBhcnI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXROdW1iZXIobnVtOiBudW1iZXIsIHByZWNpc2lvbiA9IDIpIHtcclxuXHRjb25zdCBtYXAgPSBbXHJcblx0XHR7IHN1ZmZpeDogXCJUXCIsIHRocmVzaG9sZDogMWUxMiB9LFxyXG5cdFx0eyBzdWZmaXg6IFwiQlwiLCB0aHJlc2hvbGQ6IDFlOSB9LFxyXG5cdFx0eyBzdWZmaXg6IFwiTVwiLCB0aHJlc2hvbGQ6IDFlNiB9LFxyXG5cdFx0eyBzdWZmaXg6IFwiS1wiLCB0aHJlc2hvbGQ6IDFlMyB9LFxyXG5cdFx0eyBzdWZmaXg6IFwiXCIsIHRocmVzaG9sZDogMSB9LFxyXG5cdF07XHJcblxyXG5cdGNvbnN0IGZvdW5kID0gbWFwLmZpbmQoKHgpID0+IE1hdGguYWJzKG51bSkgPj0geC50aHJlc2hvbGQpO1xyXG5cdGlmIChmb3VuZCkge1xyXG5cdFx0Y29uc3QgZm9ybWF0dGVkID1cclxuXHRcdFx0KG51bSAvIGZvdW5kLnRocmVzaG9sZCkudG9GaXhlZChwcmVjaXNpb24pICsgZm91bmQuc3VmZml4O1xyXG5cdFx0cmV0dXJuIGZvcm1hdHRlZDtcclxuXHR9XHJcblxyXG5cdHJldHVybiBudW07XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlVGltZUVsYXBzZWQoZGF0ZVBhc3RlZDogRGF0ZSk6IHN0cmluZyB7XHJcblx0Y29uc3QgZGVsdGEgPSBNYXRoLmFicyhuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIGRhdGVQYXN0ZWQuZ2V0VGltZSgpKSAvIDEwMDA7XHJcblxyXG5cdGNvbnN0IHllYXJzID0gTWF0aC5mbG9vcihkZWx0YSAvICg4NjQwMCAqIDM2NSkpO1xyXG5cdGlmICh5ZWFycyA+PSAyKSB7XHJcbiAgICAgICAgcmV0dXJuIGAke3llYXJzfSB5ZWFycyBhZ29gO1xyXG5cdH0gZWxzZSBpZiAoeWVhcnMgPT09IDEpIHtcclxuXHRcdHJldHVybiBcIjEgeWVhciBhZ29cIjtcclxuXHR9XHJcblxyXG5cdGNvbnN0IG1vbnRocyA9IE1hdGguZmxvb3IoZGVsdGEgLyAoODY0MDAgKiAzMCkpO1xyXG5cdGlmIChtb250aHMgPj0gMikge1xyXG4gICAgICAgIHJldHVybiBgJHttb250aHN9IG1vbnRocyBhZ29gO1xyXG5cdH0gZWxzZSBpZiAobW9udGhzID09PSAxKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiMSBtb250aCBhZ29cIjtcclxuXHR9XHJcbiAgICBcclxuXHRjb25zdCBkYXlzID0gTWF0aC5mbG9vcihkZWx0YSAvIDg2NDAwKTtcclxuXHRpZiAoZGF5cyA+PSAyKSB7XHJcbiAgICAgICAgcmV0dXJuIGAke2RheXN9IGRheXMgYWdvYDtcclxuXHR9IGVsc2UgaWYgKGRheXMgPT09IDEpIHtcclxuICAgICAgICByZXR1cm4gXCIxIGRheSBhZ29cIjtcclxuXHR9XHJcbiAgICBcclxuXHRjb25zdCBob3VycyA9IE1hdGguZmxvb3IoZGVsdGEgLyAzNjAwKSAlIDI0O1xyXG5cdGlmIChob3VycyA+PSAyKSB7XHJcbiAgICAgICAgcmV0dXJuIGAke2hvdXJzfSBob3VycyBhZ29gO1xyXG5cdH0gZWxzZSBpZiAoaG91cnMgPT09IDEpIHtcclxuICAgICAgICByZXR1cm4gXCIxIGhvdXIgYWdvXCI7XHJcblx0fVxyXG4gICAgXHJcblx0Y29uc3QgbWludXRlcyA9IE1hdGguZmxvb3IoZGVsdGEgLyA2MCkgJSA2MDtcclxuXHRpZiAobWludXRlcyA+PSAyKSB7XHJcbiAgICAgICAgcmV0dXJuIGAke21pbnV0ZXN9IG1pbnV0ZXMgYWdvYDtcclxuXHR9IGVsc2UgaWYgKG1pbnV0ZXMgPT09IDEpIHtcclxuICAgICAgICByZXR1cm4gXCIxIG1pbnV0ZSBhZ29cIjtcclxuXHR9XHJcblxyXG5cdHJldHVybiBcInNlY29uZHMgYWdvXCI7XHJcbn0iLCAiaW1wb3J0IHtcclxuXHRBcHAsXHJcblx0QnV0dG9uQ29tcG9uZW50LFxyXG5cdENvbXBvbmVudCxcclxuXHRNYXJrZG93blJlbmRlcmVyLFxyXG5cdE1lbnUsXHJcblx0TW9kYWwsXHJcblx0Tm90aWNlLFxyXG5cdFNjb3BlLFxyXG5cdFNldHRpbmcsXHJcbn0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCBRdWlja1BsdWdpblN3aXRjaGVyIGZyb20gXCIuL21haW5cIjtcclxuaW1wb3J0IHsgUGx1Z2luQ29tbUluZm8sIFBsdWdpbkluZm8gfSBmcm9tIFwiLi90eXBlc1wiO1xyXG5pbXBvcnQgeyBDUE1vZGFsLCBnZXRSZWFkTWUgfSBmcm9tIFwiLi9jb21tdW5pdHktcGx1Z2luc19tb2RhbFwiO1xyXG5pbXBvcnQgeyBpc0luc3RhbGxlZCB9IGZyb20gXCIuL21vZGFsX3V0aWxzXCI7XHJcbmltcG9ydCB7XHJcblx0Z2V0Q29tbWFuZENvbmRpdGlvbixcclxuXHRnZXRIa2V5Q29uZGl0aW9uLFxyXG5cdGluc3RhbGxMYXRlc3RQbHVnaW5WZXJzaW9uLFxyXG5cdG9wZW5HaXRIdWJSZXBvLFxyXG5cdG9wZW5QbHVnaW5TZXR0aW5ncyxcclxuXHRzaG93SG90a2V5c0ZvcixcclxufSBmcm9tIFwiLi9tb2RhbF9jb21wb25lbnRzXCI7XHJcbmltcG9ydCB7IGlzRW5hYmxlZCB9IGZyb20gXCIuL3V0aWxzXCI7XHJcblxyXG50eXBlIENvbmZpcm1DYWxsYmFjayA9IChjb25maXJtZWQ6IGJvb2xlYW4pID0+IHZvaWQ7XHJcblxyXG4vLyBmb3IgcGx1Z2luIGRlc2NyaXB0aW9uXHJcbmV4cG9ydCBjbGFzcyBEZXNjcmlwdGlvbk1vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG5cdGNvbnN0cnVjdG9yKFxyXG5cdFx0YXBwOiBBcHAsXHJcblx0XHRwdWJsaWMgcGx1Z2luOiBRdWlja1BsdWdpblN3aXRjaGVyLFxyXG5cdFx0cHVibGljIHBsdWdpbkl0ZW06IFBsdWdpbkluZm9cclxuXHQpIHtcclxuXHRcdHN1cGVyKGFwcCk7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHRcdHRoaXMucGx1Z2luSXRlbSA9IHBsdWdpbkl0ZW07XHJcblx0fVxyXG5cclxuXHRvbk9wZW4oKSB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCwgcGx1Z2luSXRlbSB9ID0gdGhpcztcclxuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cdFx0Y29udGVudEVsXHJcblx0XHRcdC5jcmVhdGVFbChcInBcIiwge1xyXG5cdFx0XHRcdHRleHQ6IHBsdWdpbkl0ZW0ubmFtZSArIFwiIC0gdlwiICsgcGx1Z2luSXRlbS52ZXJzaW9uLFxyXG5cdFx0XHR9KVxyXG5cdFx0XHQuY3JlYXRlRWwoXCJwXCIsIHtcclxuXHRcdFx0XHR0ZXh0OlxyXG5cdFx0XHRcdFx0XCJhdXRob3I6IFwiICtcclxuXHRcdFx0XHRcdHBsdWdpbkl0ZW0uYXV0aG9yICtcclxuXHRcdFx0XHRcdFwiLCB1cmw6IFwiICtcclxuXHRcdFx0XHRcdChwbHVnaW5JdGVtLmF1dGhvclVybCA/IFwiXCIgOiBcIm51bGxcIiksXHJcblx0XHRcdH0pXHJcblx0XHRcdC5jcmVhdGVFbChcImFcIiwge1xyXG5cdFx0XHRcdHRleHQ6IHBsdWdpbkl0ZW0uYXV0aG9yVXJsLFxyXG5cdFx0XHRcdGhyZWY6IHBsdWdpbkl0ZW0uYXV0aG9yVXJsLFxyXG5cdFx0XHR9KTtcclxuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBwbHVnaW5JdGVtLmRlc2MgfSk7XHJcblx0fVxyXG5cclxuXHRvbkNsb3NlKCkge1xyXG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcclxuXHR9XHJcbn1cclxuXHJcbmNsYXNzIENvbmZpcm1Nb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuXHRjb25zdHJ1Y3RvcihcclxuXHRcdGFwcDogQXBwLFxyXG5cdFx0cHVibGljIG1lc3NhZ2U6IHN0cmluZyxcclxuXHRcdHB1YmxpYyBjYWxsYmFjazogQ29uZmlybUNhbGxiYWNrLFxyXG5cdFx0cHVibGljIHdpZHRoPzogbnVtYmVyLFxyXG5cdFx0cHVibGljIGhlaWdodD86IG51bWJlclxyXG5cdCkge1xyXG5cdFx0c3VwZXIoYXBwKTtcclxuXHR9XHJcblxyXG5cdG9uT3BlbigpIHtcclxuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XHJcblx0XHRpZiAodGhpcy53aWR0aCkge1xyXG5cdFx0XHR0aGlzLm1vZGFsRWwuc3R5bGUud2lkdGggPSBgJHt0aGlzLndpZHRofXB4YDtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAodGhpcy5oZWlnaHQpIHtcclxuXHRcdFx0dGhpcy5tb2RhbEVsLnN0eWxlLmhlaWdodCA9IGAke3RoaXMuaGVpZ2h0fXB4YDtcclxuXHRcdH1cclxuXHJcblx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJwXCIpLnNldFRleHQodGhpcy5tZXNzYWdlKTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyh0aGlzLmNvbnRlbnRFbClcclxuXHRcdFx0LmFkZEJ1dHRvbigoYikgPT4ge1xyXG5cdFx0XHRcdGIuc2V0SWNvbihcImNoZWNrbWFya1wiKVxyXG5cdFx0XHRcdFx0LnNldEN0YSgpXHJcblx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMuY2FsbGJhY2sodHJ1ZSk7XHJcblx0XHRcdFx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9KVxyXG5cdFx0XHQuYWRkRXh0cmFCdXR0b24oKGIpID0+XHJcblx0XHRcdFx0Yi5zZXRJY29uKFwiY3Jvc3NcIikub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLmNhbGxiYWNrKGZhbHNlKTtcclxuXHRcdFx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHQpO1xyXG5cdH1cclxuXHJcblx0b25DbG9zZSgpIHtcclxuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XHJcblx0fVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBvcGVuQ29uZmlybU1vZGFsKFxyXG5cdGFwcDogQXBwLFxyXG5cdG1lc3NhZ2U6IHN0cmluZyxcclxuXHR3aWR0aD86IG51bWJlcixcclxuXHRoZWlnaHQ/OiBudW1iZXJcclxuKTogUHJvbWlzZTxib29sZWFuPiB7XHJcblx0cmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcblx0XHRuZXcgQ29uZmlybU1vZGFsKFxyXG5cdFx0XHRhcHAsXHJcblx0XHRcdG1lc3NhZ2UsXHJcblx0XHRcdChjb25maXJtZWQ6IGJvb2xlYW4pID0+IHtcclxuXHRcdFx0XHRyZXNvbHZlKGNvbmZpcm1lZCk7XHJcblx0XHRcdH0sXHJcblx0XHRcdHdpZHRoID8/IHVuZGVmaW5lZCxcclxuXHRcdFx0aGVpZ2h0ID8/IHVuZGVmaW5lZFxyXG5cdFx0KS5vcGVuKCk7XHJcblx0fSk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb25maXJtKFxyXG5cdG1lc3NhZ2U6IHN0cmluZyxcclxuXHR3aWR0aD86IG51bWJlcixcclxuXHRoZWlnaHQ/OiBudW1iZXJcclxuKTogUHJvbWlzZTxib29sZWFuPiB7XHJcblx0cmV0dXJuIGF3YWl0IG9wZW5Db25maXJtTW9kYWwoXHJcblx0XHR0aGlzLmFwcCxcclxuXHRcdG1lc3NhZ2UsXHJcblx0XHR3aWR0aCA/PyB1bmRlZmluZWQsXHJcblx0XHRoZWlnaHQgPz8gdW5kZWZpbmVkXHJcblx0KTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIE5ld1ZlcnNpb24gZXh0ZW5kcyBNb2RhbCB7XHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHB1YmxpYyBwbHVnaW46IFF1aWNrUGx1Z2luU3dpdGNoZXIpIHtcclxuXHRcdHN1cGVyKGFwcCk7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHR9XHJcblxyXG5cdG9uT3BlbigpIHtcclxuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XHJcblx0XHRjb25zdCBjb250ZW50ID0gYFxyXG4gICAgICAgIDxiPldhcm5pbmc6PC9iPjxicj5cclxuICAgICAgICBGb3IgdGhpcyBuZXcgZmVhdHVyZShyZXF1ZXN0KSBhZGRpbmcgYSBkZWxheSB0byBwbHVnaW4ocykgYXQgc3RhcnQsXHJcbiAgICAgICAgZGVmYXVsdCB2YWx1ZXMgbmVlZCB0byBiZSByZXN0b3JlZC4gU29ycnkgZm9yIHRoZSBpbmNvbnZlbmllbmNlLjxicj48YnI+XHJcbiAgICAgICAgYDtcclxuXHRcdGNvbnRlbnRFbC5jcmVhdGVEaXYoXCJcIiwgKGVsOiBIVE1MRGl2RWxlbWVudCkgPT4ge1xyXG5cdFx0XHRlbC5pbm5lckhUTUwgPSBjb250ZW50O1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBvbkNsb3NlKCkge1xyXG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBSZWFkTWVNb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuXHRjb21wOiBDb21wb25lbnQ7XHJcblx0bW91c2VQb3NpdGlvbjogYW55O1xyXG5cdHNjb3BlOiBTY29wZSA9IG5ldyBTY29wZSh0aGlzLmFwcC5zY29wZSk7XHJcblx0Y29uc3RydWN0b3IoXHJcblx0XHRhcHA6IEFwcCxcclxuXHRcdHB1YmxpYyBtb2RhbDogQ1BNb2RhbCxcclxuXHRcdHB1YmxpYyBwbHVnaW5JdGVtOiBQbHVnaW5Db21tSW5mb1xyXG5cdCkge1xyXG5cdFx0c3VwZXIoYXBwKTtcclxuXHRcdHRoaXMubW9kYWwgPSBtb2RhbDtcclxuXHRcdHRoaXMucGx1Z2luSXRlbSA9IHBsdWdpbkl0ZW07XHJcblx0XHR0aGlzLm1vZGFsRWwuYWRkQ2xhc3MoXCJyZWFkLW1lLW1vZGFsXCIpO1xyXG5cdFx0dGhpcy5jb21wID0gbmV3IENvbXBvbmVudCgpO1xyXG5cdFx0dGhpcy5jb21wLmxvYWQoKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIG9uT3BlbigpIHtcclxuXHRcdGNvbnN0IHsgY29udGVudEVsLCBwbHVnaW5JdGVtIH0gPSB0aGlzO1xyXG5cdFx0Ly8gdGhpcy5tb2RhbEVsLmFkZENsYXNzKFwicmVhZC1tZS1tb2RhbFwiKTtcclxuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cclxuXHRcdGNvbnRlbnRFbFxyXG5cdFx0XHQuY3JlYXRlRWwoXCJwXCIsIHtcclxuXHRcdFx0XHR0ZXh0OiBwbHVnaW5JdGVtLm5hbWUsXHJcblx0XHRcdFx0Y2xzOiBcInJlYWRtZS10aXRsZVwiLFxyXG5cdFx0XHR9KVxyXG5cdFx0XHQuY3JlYXRlRWwoXCJwXCIsIHtcclxuXHRcdFx0XHR0ZXh0OiBcIkJ5OiBcIiArIHBsdWdpbkl0ZW0uYXV0aG9yLFxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRjb25zdCBvcGVuUmVwbyA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoKTtcclxuXHRcdG5ldyBCdXR0b25Db21wb25lbnQob3BlblJlcG8pXHJcblx0XHRcdC5zZXRCdXR0b25UZXh0KFwiR2l0SHViIFJlcG9cIilcclxuXHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdGF3YWl0IG9wZW5HaXRIdWJSZXBvKHBsdWdpbkl0ZW0pO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRjb25zdCBkaXZCdXR0b25zID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogXCJyZWFkLW1lLWJ1dHRvbnNcIiB9KTtcclxuXHRcdGlmICghaXNJbnN0YWxsZWQocGx1Z2luSXRlbSkpIHtcclxuXHRcdFx0bmV3IEJ1dHRvbkNvbXBvbmVudChkaXZCdXR0b25zKVxyXG5cdFx0XHRcdC5zZXRCdXR0b25UZXh0KFwiSW5zdGFsbFwiKVxyXG5cdFx0XHRcdC5zZXRDdGEoKVxyXG5cdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdGF3YWl0IGluc3RhbGxMYXRlc3RQbHVnaW5WZXJzaW9uKHRoaXMubW9kYWwsIHBsdWdpbkl0ZW0pO1xyXG5cdFx0XHRcdFx0bmV3IE5vdGljZShgJHtwbHVnaW5JdGVtLm5hbWV9IGluc3RhbGxlZGAsIDI1MDApO1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5vbk9wZW4oKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGNvbnN0IG1hbmlmZXN0cyA9ICh0aGlzLmFwcCBhcyBhbnkpLnBsdWdpbnMubWFuaWZlc3RzIHx8IHt9O1xyXG5cdFx0XHRsZXQgY29uZGl0aW9uOiBib29sZWFuO1xyXG5cdFx0XHRpZiAoIWlzRW5hYmxlZCh0aGlzLm1vZGFsLCBtYW5pZmVzdHNbcGx1Z2luSXRlbS5pZF0uaWQpKSB7XHJcblx0XHRcdFx0bmV3IEJ1dHRvbkNvbXBvbmVudChkaXZCdXR0b25zKVxyXG5cdFx0XHRcdFx0LnNldEJ1dHRvblRleHQoXCJFbmFibGVcIilcclxuXHRcdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0YXdhaXQgKFxyXG5cdFx0XHRcdFx0XHRcdHRoaXMubW9kYWwuYXBwIGFzIGFueVxyXG5cdFx0XHRcdFx0XHQpLnBsdWdpbnMuZW5hYmxlUGx1Z2luQW5kU2F2ZShwbHVnaW5JdGVtLmlkKTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5vbk9wZW4oKTtcclxuXHRcdFx0XHRcdFx0Y29uZGl0aW9uID0gYXdhaXQgZ2V0Q29tbWFuZENvbmRpdGlvbihcclxuXHRcdFx0XHRcdFx0XHR0aGlzLm1vZGFsLFxyXG5cdFx0XHRcdFx0XHRcdHBsdWdpbkl0ZW1cclxuXHRcdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdFx0aWYgKGNvbmRpdGlvbikgYXdhaXQgdGhpcy5vbk9wZW4oKTtcclxuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShgJHtwbHVnaW5JdGVtLm5hbWV9IGVuYWJsZWRgLCAyNTAwKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGNvbnN0IHBsdWdpblNldHRpbmdzID0gYXdhaXQgKFxyXG5cdFx0XHRcdFx0dGhpcy5tb2RhbC5hcHAgYXMgYW55XHJcblx0XHRcdFx0KS5zZXR0aW5nLm9wZW5UYWJCeUlkKHBsdWdpbkl0ZW0uaWQpO1xyXG5cdFx0XHRcdGlmIChwbHVnaW5TZXR0aW5ncykge1xyXG5cdFx0XHRcdFx0bmV3IEJ1dHRvbkNvbXBvbmVudChkaXZCdXR0b25zKVxyXG5cdFx0XHRcdFx0XHQuc2V0QnV0dG9uVGV4dChcIk9wdGlvbnNcIilcclxuXHRcdFx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IG9wZW5QbHVnaW5TZXR0aW5ncyhcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMubW9kYWwsXHJcblx0XHRcdFx0XHRcdFx0XHRwbHVnaW5JdGVtXHJcblx0XHRcdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRjb25kaXRpb24gPSBhd2FpdCBnZXRIa2V5Q29uZGl0aW9uKHRoaXMubW9kYWwsIHBsdWdpbkl0ZW0pO1xyXG5cdFx0XHRcdGlmIChjb25kaXRpb24pIHtcclxuXHRcdFx0XHRcdG5ldyBCdXR0b25Db21wb25lbnQoZGl2QnV0dG9ucylcclxuXHRcdFx0XHRcdFx0LnNldEJ1dHRvblRleHQoXCJIb3RrZXlzXCIpXHJcblx0XHRcdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCBzaG93SG90a2V5c0Zvcih0aGlzLm1vZGFsLCBwbHVnaW5JdGVtKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRuZXcgQnV0dG9uQ29tcG9uZW50KGRpdkJ1dHRvbnMpXHJcblx0XHRcdFx0XHQuc2V0QnV0dG9uVGV4dChcIkRpc2FibGVcIilcclxuXHRcdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0YXdhaXQgKFxyXG5cdFx0XHRcdFx0XHRcdHRoaXMubW9kYWwuYXBwIGFzIGFueVxyXG5cdFx0XHRcdFx0XHQpLnBsdWdpbnMuZGlzYWJsZVBsdWdpbkFuZFNhdmUocGx1Z2luSXRlbS5pZCk7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMub25PcGVuKCk7XHJcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYCR7cGx1Z2luSXRlbS5uYW1lfSBkaXNhYmxlZGAsIDI1MDApO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdFx0bmV3IEJ1dHRvbkNvbXBvbmVudChkaXZCdXR0b25zKVxyXG5cdFx0XHRcdC5zZXRCdXR0b25UZXh0KFwiVW5pbnN0YWxsXCIpXHJcblx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0YXdhaXQgKHRoaXMubW9kYWwuYXBwIGFzIGFueSkucGx1Z2lucy51bmluc3RhbGxQbHVnaW4oXHJcblx0XHRcdFx0XHRcdHBsdWdpbkl0ZW0uaWRcclxuXHRcdFx0XHRcdCk7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLm9uT3BlbigpO1xyXG5cdFx0XHRcdFx0bmV3IE5vdGljZShgJHtwbHVnaW5JdGVtLm5hbWV9IHVuaW5zdGFsbGVkYCwgMjUwMCk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgZGl2ID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogXCJxcHMtcmVhZC1tZVwiIH0pO1xyXG5cclxuXHRcdGNvbnN0IGRhdGEgPSBhd2FpdCBnZXRSZWFkTWUocGx1Z2luSXRlbSk7XHJcblx0XHRjb25zdCBjb250ZW50ID0gQnVmZmVyLmZyb20oZGF0YS5jb250ZW50LCBcImJhc2U2NFwiKS50b1N0cmluZyhcInV0Zi04XCIpO1xyXG5cclxuXHRcdGNvbnN0IHVwZGF0ZWRDb250ZW50ID0gbW9kaWZ5R2l0SHViTGlua3MoY29udGVudCwgcGx1Z2luSXRlbSk7XHJcblxyXG5cdFx0TWFya2Rvd25SZW5kZXJlci5yZW5kZXIodGhpcy5hcHAsIHVwZGF0ZWRDb250ZW50LCBkaXYsIFwiL1wiLCB0aGlzLmNvbXApO1xyXG5cclxuXHRcdC8vIHx8IGFkZCBhIG1lbnUgd2l0aCB0cmFuc2xhdGVcclxuXHRcdHRoaXMubW9kYWxFbC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIChldmVudCkgPT4ge1xyXG5cdFx0XHR0aGlzLm1vdXNlUG9zaXRpb24gPSB7IHg6IGV2ZW50LmNsaWVudFgsIHk6IGV2ZW50LmNsaWVudFkgfTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuc2NvcGUucmVnaXN0ZXIoW1wiQ3RybFwiXSwgXCJ0XCIsIGFzeW5jICgpID0+IHtcclxuXHRcdFx0Y29uc3Qgc2VsZWN0ZWRDb250ZW50ID0gZ2V0U2VsZWN0ZWRDb250ZW50KCk7XHJcblx0XHRcdGlmICghc2VsZWN0ZWRDb250ZW50KSB7XHJcblx0XHRcdFx0bmV3IE5vdGljZShcIm5vIHNlbGVjdGlvblwiLCA0MDAwKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0YXdhaXQgdHJhbnNsYXRpb24oc2VsZWN0ZWRDb250ZW50KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMubW9kYWxFbC5hZGRFdmVudExpc3RlbmVyKFwiY29udGV4dG1lbnVcIiwgKGV2ZW50KSA9PiB7XHJcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdGNvbnN0IHNlbGVjdGVkQ29udGVudCA9IGdldFNlbGVjdGVkQ29udGVudCgpO1xyXG5cdFx0XHRpZiAoc2VsZWN0ZWRDb250ZW50KSB7XHJcblx0XHRcdFx0Y29uc3QgbWVudSA9IG5ldyBNZW51KCk7XHJcblx0XHRcdFx0bWVudS5hZGRJdGVtKChpdGVtKSA9PlxyXG5cdFx0XHRcdFx0aXRlbS5zZXRUaXRsZShcIkNvcHkgQ3RybCtDXCIpLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRhd2FpdCBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dChzZWxlY3RlZENvbnRlbnQpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0XHQpO1xyXG5cdFx0XHRcdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cclxuXHRcdFx0XHRcdGl0ZW0uc2V0VGl0bGUoXCJ0cmFuc2xhdGVcIikub25DbGljayhhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRyYW5zbGF0aW9uKHNlbGVjdGVkQ29udGVudCk7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdCk7XHJcblx0XHRcdFx0bWVudS5zaG93QXRQb3NpdGlvbih0aGlzLm1vdXNlUG9zaXRpb24pO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdG9uQ2xvc2UoKSB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cdFx0dGhpcy5jb21wLnVubG9hZCgpO1xyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0U2VsZWN0ZWRDb250ZW50KCkge1xyXG5cdGNvbnN0IHNlbGVjdGlvbiA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcclxuXHRyZXR1cm4gc2VsZWN0aW9uPy50b1N0cmluZygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjYW5UcmFuc2xhdGUoKSB7XHJcblx0cmV0dXJuIHRoaXMucGx1Z2luLnRyYW5zbGF0b3IgJiYgdGhpcy5wbHVnaW4udHJhbnNsYXRvci52YWxpZDtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gdHJhbnNsYXRlKHRleHQ6IHN0cmluZywgZnJvbTogc3RyaW5nKSB7XHJcblx0bGV0IHRvID0gXCJcIjtcclxuXHRjb25zdCBwbHVnaW4gPSAodGhpcy5hcHAgYXMgYW55KS5wbHVnaW5zLnBsdWdpbnMudHJhbnNsYXRlO1xyXG5cdGlmICghcGx1Z2luKSB7XHJcblx0XHRuZXcgTm90aWNlKFxyXG5cdFx0XHRcImluc3RhbGwgb2JzaWRpYW4tdHJhbnNsYXRlIGFuZCBzZWxlY3QgYSB0cmFuc2xhdG9yXCJcclxuXHRcdCk7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cdGlmICghY2FuVHJhbnNsYXRlKSB7XHJcblx0XHRuZXcgTm90aWNlKFwidHJhbnNsYXRvciBub3QgdmFsaWQuIGNoZWNrIHlvdXIgc2V0dGluZ3NcIiwgNDAwMCk7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cdGNvbnN0IGxvYWRlZF9zZXR0aW5ncyA9IGF3YWl0IHBsdWdpbi5sb2FkRGF0YSgpO1xyXG5cclxuXHRpZiAobG9hZGVkX3NldHRpbmdzLnRhcmdldF9sYW5ndWFnZV9wcmVmZXJlbmNlID09PSBcImxhc3RcIikge1xyXG5cdFx0dG8gPSBsb2FkZWRfc2V0dGluZ3MubGFzdF91c2VkX3RhcmdldF9sYW5ndWFnZXNbMF07XHJcblx0fSBlbHNlIGlmIChsb2FkZWRfc2V0dGluZ3MudGFyZ2V0X2xhbmd1YWdlX3ByZWZlcmVuY2UgPT09IFwic3BlY2lmaWNcIikge1xyXG5cdFx0dG8gPSBsb2FkZWRfc2V0dGluZ3MuZGVmYXVsdF90YXJnZXRfbGFuZ3VhZ2U7XHJcblx0fSBlbHNlIGlmIChsb2FkZWRfc2V0dGluZ3MudGFyZ2V0X2xhbmd1YWdlX3ByZWZlcmVuY2UgPT09IFwiZGlzcGxheVwiKSB7XHJcblx0XHR0byA9IHBsdWdpbi5jdXJyZW50X2xhbmd1YWdlO1xyXG5cdH1cclxuXHJcblx0cmV0dXJuIHBsdWdpbi50cmFuc2xhdG9yLnRyYW5zbGF0ZSh0ZXh0LCBmcm9tLCB0byk7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHRyYW5zbGF0aW9uKHNlbGVjdGVkQ29udGVudDogc3RyaW5nKSB7XHJcblx0Y29uc3QgdHJhbnNsYXRlZCA9IGF3YWl0IHRyYW5zbGF0ZShzZWxlY3RlZENvbnRlbnQsIFwiZW5cIik7XHJcblx0aWYgKCF0cmFuc2xhdGVkKSByZXR1cm47XHJcblx0Y29uc3QgdHJhbnNsYXRpb24gPSB0cmFuc2xhdGVkLnRyYW5zbGF0aW9uO1xyXG5cdGlmICghdHJhbnNsYXRpb24pIHtcclxuXHRcdG5ldyBOb3RpY2UoXCJ0cmFuc2xhdG9yIG5vdCB2YWxpZC4gY2hlY2sgeW91ciBzZXR0aW5nc1wiLCA0MDAwKTtcclxuXHRcdHJldHVybjtcclxuXHR9XHJcblx0bmV3IFRyYW5zbGF0ZU1vZGFsKHRoaXMuYXBwLCB0cmFuc2xhdGlvbikub3BlbigpO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVHJhbnNsYXRlTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHB1YmxpYyBtZXNzYWdlOiBzdHJpbmcpIHtcclxuXHRcdHN1cGVyKGFwcCk7XHJcblx0XHR0aGlzLm1vZGFsRWwuYWRkQ2xhc3MoXCJ0cmFuc2xhdGUtbW9kYWxcIik7XHJcblx0fVxyXG5cclxuXHRvbk9wZW4oKSB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cdFx0Y29uc3QgbGluZXMgPSB0aGlzLm1lc3NhZ2Uuc3BsaXQoXCJcXG5cIik7XHJcblx0XHRsaW5lcy5mb3JFYWNoKChsaW5lKSA9PiBjb250ZW50RWwuY3JlYXRlRWwoXCJwXCIpLnNldFRleHQobGluZSkpO1xyXG5cdH1cclxuXHJcblx0b25DbG9zZSgpIHtcclxuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiBtb2RpZnlHaXRIdWJMaW5rcyhjb250ZW50OiBzdHJpbmcsIHBsdWdpbkl0ZW06IFBsdWdpbkNvbW1JbmZvKSB7XHJcblx0Y29uc3QgcmVnZXggPSAvIVxcWyhbXlxcXV0qKVxcXVxcKChbXildKilcXCkvZztcclxuXHRyZXR1cm4gY29udGVudFxyXG5cdFx0LnJlcGxhY2UoL1xcL2Jsb2JcXC8vZywgXCIvcmF3L1wiKVxyXG5cdFx0LnJlcGxhY2UocmVnZXgsIChtYXRjaCwgYWx0LCB1cmwpID0+IHtcclxuXHRcdFx0aWYgKCF1cmwuc3RhcnRzV2l0aChcImh0dHBcIikpIHtcclxuXHRcdFx0XHRpZiAodXJsLnN0YXJ0c1dpdGgoXCIuXCIpKSB7XHJcblx0XHRcdFx0XHR1cmwgPSBgaHR0cHM6Ly9naXRodWIuY29tLyR7XHJcblx0XHRcdFx0XHRcdHBsdWdpbkl0ZW0ucmVwb1xyXG5cdFx0XHRcdFx0fS9yYXcvSEVBRCR7dXJsLnN1YnN0cigxKX1gO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHR1cmwgPSBgaHR0cHM6Ly9naXRodWIuY29tLyR7cGx1Z2luSXRlbS5yZXBvfS9yYXcvSEVBRC8ke3VybH1gO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gYCFbJHthbHR9XSgke3VybH0pYDtcclxuXHRcdH0pO1xyXG59IiwgImltcG9ydCB7IHJlYWRGaWxlU3luYywgZXhpc3RzU3luYywgcmVhZGRpclN5bmMsIHdyaXRlRmlsZVN5bmMgfSBmcm9tIFwiZnNcIjtcclxuaW1wb3J0IHtcclxuXHRBcHAsXHJcblx0RHJvcGRvd25Db21wb25lbnQsXHJcblx0TWVudSxcclxuXHRNb2RhbCxcclxuXHROb3RpY2UsXHJcblx0UGxhdGZvcm0sXHJcblx0c2V0SWNvbixcclxufSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IFF1aWNrUGx1Z2luU3dpdGNoZXIgZnJvbSBcIi4vbWFpblwiO1xyXG5pbXBvcnQge1xyXG5cdGNhbGN1bGF0ZVRpbWVFbGFwc2VkLFxyXG5cdGZvcm1hdE51bWJlcixcclxuXHRpc0VuYWJsZWQsXHJcblx0cmVtb3ZlSXRlbSxcclxufSBmcm9tIFwiLi91dGlsc1wiO1xyXG5pbXBvcnQge1xyXG5cdEdyb3Vwc0NvbW0sXHJcblx0S2V5VG9TZXR0aW5nc01hcFR5cGUsXHJcblx0UGFja2FnZUluZm9EYXRhLFxyXG5cdFBsdWdpbkNvbW1JbmZvLFxyXG59IGZyb20gXCIuL3R5cGVzXCI7XHJcbmltcG9ydCB7XHJcblx0Z2V0Q2lyY2xlc0l0ZW0sXHJcblx0Z2V0RW1vamlGb3JHcm91cCxcclxuXHRzZXRHcm91cFRpdGxlLFxyXG5cdGdldEluZGV4RnJvbVNlbGVjdGVkR3JvdXAsXHJcblx0cHJlc3NEZWxheSxcclxuXHRybXZBbGxHcm91cHNGcm9tUGx1Z2luLFxyXG5cdGdldEluc3RhbGxlZCxcclxuXHRpc0luc3RhbGxlZCxcclxuXHRyZU9wZW5Nb2RhbCxcclxufSBmcm9tIFwiLi9tb2RhbF91dGlsc1wiO1xyXG5pbXBvcnQge1xyXG5cdGFkZFNlYXJjaCxcclxuXHRieUdyb3VwRHJvcGRvd25zLFxyXG5cdGRvU2VhcmNoLFxyXG5cdGZpbmRNYXRjaGluZ0l0ZW0sXHJcblx0Z2V0RWxlbWVudEZyb21Nb3VzZVBvc2l0aW9uLFxyXG5cdGhhbmRsZUNvbnRleHRNZW51LFxyXG5cdGhhbmRsZURibENsaWNrLFxyXG5cdGluc3RhbGxBbGxQbHVnaW5zSW5Hcm91cCxcclxuXHRvcGVuR2l0SHViUmVwbyxcclxuXHRzZWFyY2hDb21tRGl2QnV0dG9uLFxyXG59IGZyb20gXCIuL21vZGFsX2NvbXBvbmVudHNcIjtcclxuaW1wb3J0IHsgUmVhZE1lTW9kYWwgfSBmcm9tIFwiLi9zZWNvbmRhcnlfbW9kYWxzXCI7XHJcbmltcG9ydCB7IFFQU01vZGFsIH0gZnJvbSBcIi4vbWFpbl9tb2RhbFwiO1xyXG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gXCJwYXRoXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQ1BNb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuXHRoZWFkZXI6IEhUTUxFbGVtZW50O1xyXG5cdGl0ZW1zOiBIVE1MRWxlbWVudDtcclxuXHRzZWFyY2g6IEhUTUxFbGVtZW50O1xyXG5cdHNlYXJjaFR5cGluZyA9IHRydWU7XHJcblx0Z3JvdXBzOiBIVE1MRWxlbWVudDtcclxuXHRob3RrZXlzRGVzYzogSFRNTEVsZW1lbnQ7XHJcblx0aXNEYmxDbGljayA9IGZhbHNlO1xyXG5cdHByZXNzZWQgPSBmYWxzZTtcclxuXHRtb3VzZVBvc2l0aW9uOiBhbnk7XHJcblx0c2VhcmNoSW5pdCA9IHRydWU7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwdWJsaWMgcGx1Z2luOiBRdWlja1BsdWdpblN3aXRjaGVyKSB7XHJcblx0XHRzdXBlcihhcHApO1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0fVxyXG5cclxuXHRjb250YWluZXIoKSB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHRcdHRoaXMubW9kYWxFbC5hZGRDbGFzcyhcImNvbW11bml0eS1wbHVnaW5zLW1vZGFsXCIpO1xyXG5cdFx0dGhpcy5oZWFkZXIgPSBjb250ZW50RWwuY3JlYXRlRWwoXCJkaXZcIiwge1xyXG5cdFx0XHRjbHM6IFwicXBzLWNvbW11bml0eS1oZWFkZXJcIixcclxuXHRcdH0pO1xyXG5cdFx0dGhpcy5zZWFyY2ggPSBjb250ZW50RWwuY3JlYXRlRWwoXCJkaXZcIiwge1xyXG5cdFx0XHRjbHM6IFwicXBzLWNvbW11bml0eS1zZWFyY2hcIixcclxuXHRcdH0pO1xyXG5cdFx0dGhpcy5ncm91cHMgPSBjb250ZW50RWwuY3JlYXRlRWwoXCJkaXZcIiwge1xyXG5cdFx0XHRjbHM6IFtcInFwcy1jb21tdW5pdHktZ3JvdXBzXCIsIFwicXBzLWNvbW0tZ3JvdXBcIl0sXHJcblx0XHR9KTtcclxuXHRcdHRoaXMuaG90a2V5c0Rlc2MgPSBjb250ZW50RWwuY3JlYXRlRWwoXCJwXCIsIHsgY2xzOiBcInFwcy1oay1kZXNjXCIgfSk7XHJcblx0XHR0aGlzLml0ZW1zID0gY29udGVudEVsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcInFwcy1jb21tdW5pdHktaXRlbXNcIiB9KTtcclxuXHJcblx0XHR0aGlzLm1vZGFsRWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCAoZXZlbnQpID0+IHtcclxuXHRcdFx0dGhpcy5tb3VzZVBvc2l0aW9uID0geyB4OiBldmVudC5jbGllbnRYLCB5OiBldmVudC5jbGllbnRZIH07XHJcblx0XHR9KTtcclxuXHJcblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBhc3luYyAoZXZlbnQpID0+IHtcclxuXHRcdFx0YXdhaXQgaGFuZGxlS2V5RG93bihldmVudCwgdGhpcyk7XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLm1vZGFsRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNvbnRleHRtZW51XCIsIChldnQpID0+IHtcclxuXHRcdFx0aWYgKHRoaXMuaXNEYmxDbGljaykgcmV0dXJuO1xyXG5cdFx0XHRoYW5kbGVDb250ZXh0TWVudShldnQsIHRoaXMpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5tb2RhbEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJkYmxjbGlja1wiLCAoZXZ0KSA9PiB7XHJcblx0XHRcdGlmICh0aGlzLmlzRGJsQ2xpY2spIHJldHVybjtcclxuXHRcdFx0aGFuZGxlRGJsQ2xpY2soZXZ0LCB0aGlzKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgb25PcGVuKCkge1xyXG5cdFx0Y29uc3QgeyBwbHVnaW4sIGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHRcdGNvbnN0IHsgc2V0dGluZ3MgfSA9IHBsdWdpbjtcclxuXHRcdGlmICh0aGlzLnNlYXJjaEluaXQpIHNldHRpbmdzLnNlYXJjaCA9IFwiXCI7XHJcblx0XHRlbHNlIHRoaXMuc2VhcmNoSW5pdCA9IHRydWU7XHJcblx0XHRhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcclxuXHRcdHRoaXMuY29udGFpbmVyKCk7XHJcblx0XHRzZXRHcm91cFRpdGxlKHRoaXMsIHBsdWdpbiwgR3JvdXBzQ29tbSwgc2V0dGluZ3MubnVtYmVyT2ZHcm91cHNDb21tKTtcclxuXHRcdHRoaXMuYWRkSGVhZGVyKHRoaXMuaGVhZGVyKTtcclxuXHRcdGF3YWl0IGFkZFNlYXJjaCh0aGlzLCB0aGlzLnNlYXJjaCwgXCJTZWFyY2ggY29tbXVuaXR5IHBsdWdpbnNcIik7XHJcblx0XHRpZiAoUGxhdGZvcm0uaXNEZXNrdG9wQXBwKSB7XHJcblx0XHRcdHNlYXJjaENvbW1EaXZCdXR0b24odGhpcywgdGhpcy5zZWFyY2gpO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5hZGRHcm91cHModGhpcywgdGhpcy5ncm91cHMpO1xyXG5cdFx0aWYgKHNldHRpbmdzLnNob3dIb3RLZXlzKSB0aGlzLnNldEhvdEtleXNkZXNjKCk7XHJcblx0XHRhd2FpdCB0aGlzLmFkZEl0ZW1zKCk7XHJcblx0fVxyXG5cclxuXHRhZGRIZWFkZXIgPSAoY29udGVudEVsOiBIVE1MRWxlbWVudCk6IHZvaWQgPT4ge1xyXG5cdFx0Y29uc3QgeyBwbHVnaW4gfSA9IHRoaXM7XHJcblx0XHRjb25zdCB7IHNldHRpbmdzIH0gPSBwbHVnaW47XHJcblx0XHQvL2Ryb3Bkb3duIGZpbHRlcnNcclxuXHRcdG5ldyBEcm9wZG93bkNvbXBvbmVudChjb250ZW50RWwpXHJcblx0XHRcdC5hZGRPcHRpb25zKHtcclxuXHRcdFx0XHRhbGw6IGBBbGwoJHtzZXR0aW5ncy5jb21tUGx1Z2lucy5sZW5ndGh9KWAsXHJcblx0XHRcdFx0aW5zdGFsbGVkOiBgSW5zdGFsbGVkKCR7Z2V0SW5zdGFsbGVkKCkubGVuZ3RofSlgLFxyXG5cdFx0XHRcdG5vdEluc3RhbGxlZDogYE5vdCBJbnN0YWxsZWQoJHtcclxuXHRcdFx0XHRcdHNldHRpbmdzLmNvbW1QbHVnaW5zLmxlbmd0aCAtIGdldEluc3RhbGxlZCgpLmxlbmd0aFxyXG5cdFx0XHRcdH0pYCxcclxuXHRcdFx0XHRieUdyb3VwOiBgQnkgR3JvdXBgLFxyXG5cdFx0XHR9KVxyXG5cdFx0XHQuc2V0VmFsdWUoc2V0dGluZ3MuZmlsdGVyc0NvbW0gYXMgc3RyaW5nKVxyXG5cdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0c2V0dGluZ3MuZmlsdGVyc0NvbW0gPSB2YWx1ZTtcclxuXHRcdFx0XHRhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0YXdhaXQgcmVPcGVuTW9kYWwodGhpcyk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdGJ5R3JvdXBEcm9wZG93bnModGhpcywgY29udGVudEVsKTtcclxuXHR9O1xyXG5cclxuXHRhZGRHcm91cHMobW9kYWw6IENQTW9kYWwsIGNvbnRlbnRFbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuXHRcdGNvbnN0IGdyb3VwcyA9IE9iamVjdC52YWx1ZXMoR3JvdXBzQ29tbSk7XHJcblxyXG5cdFx0Zm9yIChsZXQgaSA9IDE7IGkgPCBncm91cHMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0Y29uc3QgZ3JvdXBLZXkgPSBncm91cHNbaV07XHJcblxyXG5cdFx0XHRjb250ZW50RWwuY3JlYXRlRWwoXHJcblx0XHRcdFx0XCJzcGFuXCIsXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0Y2xzOiBcInFwcy1ncm91cC1zcGFuLWNvbnRhaW5lclwiLFxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0KGNvbnQpID0+IHtcclxuXHRcdFx0XHRcdGNvbnN0IHByZVNwYW4gPSBjb250LmNyZWF0ZUVsKFxyXG5cdFx0XHRcdFx0XHRcInNwYW5cIixcclxuXHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdGNsczogXCJxcHMtY2lyY2xlLXRpdGxlLWdyb3VwXCIsXHJcblx0XHRcdFx0XHRcdH0sXHJcblx0XHRcdFx0XHRcdChlbCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGNpcmNsZUNTU01vZGlmKHRoaXMsIGVsLCBpKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0KTtcclxuXHJcblx0XHRcdFx0XHRjb25zdCBzcGFuID0gY29udC5jcmVhdGVFbChcInNwYW5cIiwge1xyXG5cdFx0XHRcdFx0XHRjbHM6IFwicXBzLWdyb3Vwcy1uYW1lXCIsXHJcblx0XHRcdFx0XHRcdHRleHQ6IGAke2dyb3VwS2V5fWAsXHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdGNvbnN0IGdyb3VwTnVtYmVyVGV4dCA9IGAoPHNwYW4gY2xhc3M9XCJzaG9ydGN1dC1udW1iZXJcIj4ke2l9PC9zcGFuPilgO1xyXG5cdFx0XHRcdFx0Ly8gcG9zdFNwYW5cclxuXHRcdFx0XHRcdHNwYW4uaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsIGdyb3VwTnVtYmVyVGV4dCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHQpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0c2V0SG90S2V5c2Rlc2MoKTogdm9pZCB7XHJcblx0XHRjb25zdCBudW1iZXJPZkdyb3VwcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLm51bWJlck9mR3JvdXBzQ29tbTtcclxuXHRcdHRoaXMuaG90a2V5c0Rlc2MuY3JlYXRlU3BhbihcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHRleHQ6IGAoMS0ke251bWJlck9mR3JvdXBzfSlcdTI3OTUgKDApXHUyNzRDIGAsXHJcblx0XHRcdH0sXHJcblx0XHRcdChlbCkgPT4ge1xyXG5cdFx0XHRcdGVsLmNyZWF0ZVNwYW4oeyB0ZXh0OiBcIihnKVwiIH0sIChlbCkgPT4ge1xyXG5cdFx0XHRcdFx0bGV0IGdpdEh1Ykljb24gPSBlbC5jcmVhdGVTcGFuKHsgY2xzOiBcImdpdC1odWItaWNvblwiIH0pO1xyXG5cdFx0XHRcdFx0c2V0SWNvbihnaXRIdWJJY29uLCBcImdpdGh1YlwiKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRlbC5jcmVhdGVTcGFuKHtcclxuXHRcdFx0XHRcdHRleHQ6IGAgKGksXHVEODNEXHVEREIxXHVGRTBGeDIpUmVhZG1lYCxcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0KTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGFkZEl0ZW1zKCkge1xyXG5cdFx0Y29uc3QgeyBwbHVnaW4gfSA9IHRoaXM7XHJcblx0XHRjb25zdCB7IHNldHRpbmdzIH0gPSBwbHVnaW47XHJcblx0XHRjb25zdCB7IGNvbW1QbHVnaW5zLCBwbHVnaW5TdGF0cyB9ID0gc2V0dGluZ3M7XHJcblx0XHRjb25zdCB2YWx1ZSA9IHNldHRpbmdzLnNlYXJjaDtcclxuXHRcdGxldCBsaXN0SXRlbXMgPSBDUE1tb2RlU29ydCh0aGlzLCBjb21tUGx1Z2lucyk7XHJcblx0XHRzb3J0SXRlbXNCeURvd25sb2FkcyhsaXN0SXRlbXMsIHBsdWdpblN0YXRzKTtcclxuXHRcdGxpc3RJdGVtcyA9IGRvU2VhcmNoKHRoaXMsIHZhbHVlLCBsaXN0SXRlbXMpIGFzIFBsdWdpbkNvbW1JbmZvW107XHJcblxyXG5cdFx0Zm9yIChjb25zdCBpdGVtIG9mIGxpc3RJdGVtcykge1xyXG5cdFx0XHRjb25zdCBpdGVtQ29udGFpbmVyID0gdGhpcy5pdGVtcy5jcmVhdGVFbChcImRpdlwiLCB7XHJcblx0XHRcdFx0Y2xzOiBcInFwcy1jb21tLWJsb2NrXCIsXHJcblx0XHRcdH0pO1xyXG5cdFx0XHQvL25hbWVcclxuXHRcdFx0aXRlbUNvbnRhaW5lci5jcmVhdGVEaXYoXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0Y2xzOiBcInFwcy1jb21tdW5pdHktaXRlbS1uYW1lXCIsXHJcblx0XHRcdFx0XHR0ZXh0OiBpdGVtLm5hbWUsXHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHQoZWw6IEhUTUxFbGVtZW50KSA9PiB7XHJcblx0XHRcdFx0XHRpZiAoaXNJbnN0YWxsZWQoaXRlbSkpXHJcblx0XHRcdFx0XHRcdGVsLmNyZWF0ZVNwYW4oe1xyXG5cdFx0XHRcdFx0XHRcdGNsczogXCJpbnN0YWxsZWQtc3BhblwiLFxyXG5cdFx0XHRcdFx0XHRcdHRleHQ6IFwiaW5zdGFsbGVkXCIsXHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0aWYgKGlzRW5hYmxlZCh0aGlzLCBpdGVtLmlkKSkge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBzcGFuID0gZWwuY3JlYXRlU3Bhbih7XHJcblx0XHRcdFx0XHRcdFx0Y2xzOiBcImVuYWJsZWQtc3BhblwiLFxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0c2V0SWNvbihzcGFuLCBcInBvd2VyXCIpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0KTtcclxuXHRcdFx0Ly9hdXRob3JcclxuXHRcdFx0aXRlbUNvbnRhaW5lci5jcmVhdGVEaXYoe1xyXG5cdFx0XHRcdGNsczogXCJxcHMtY29tbXVuaXR5LWl0ZW0tYXV0aG9yXCIsXHJcblx0XHRcdFx0dGV4dDogYEJ5ICR7aXRlbS5hdXRob3J9IGAsXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Y29uc3QgcGx1Z2luSW5mbyA9IHBsdWdpblN0YXRzW2l0ZW0uaWRdO1xyXG5cdFx0XHRpZiAocGx1Z2luSW5mbykge1xyXG5cdFx0XHRcdC8vIGRvd25sb2Fkc1xyXG5cdFx0XHRcdGl0ZW1Db250YWluZXIuY3JlYXRlRGl2KFxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRjbHM6IFwicXBzLWNvbW11bml0eS1pdGVtLWRvd25sb2Fkc1wiLFxyXG5cdFx0XHRcdFx0fSxcclxuXHRcdFx0XHRcdChlbDogSFRNTEVsZW1lbnQpID0+IHtcclxuXHRcdFx0XHRcdFx0ZWwuY3JlYXRlU3Bhbih7IGNsczogXCJkb3dubG9hZHMtc3BhblwiIH0sIChlbCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHByZVNwYW4gPSBlbC5jcmVhdGVTcGFuKCk7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc3BhbiA9IGVsLmNyZWF0ZVNwYW4oe1xyXG5cdFx0XHRcdFx0XHRcdFx0dGV4dDogZm9ybWF0TnVtYmVyKFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRwbHVnaW5JbmZvLmRvd25sb2FkcyxcclxuXHRcdFx0XHRcdFx0XHRcdFx0MVxyXG5cdFx0XHRcdFx0XHRcdFx0KS50b1N0cmluZygpLFxyXG5cdFx0XHRcdFx0XHRcdFx0Y2xzOiBcImRvd25sb2Fkcy10ZXh0LXNwYW5cIixcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRhZGRHcm91cENpcmNsZXModGhpcywgc3BhbiwgaXRlbSk7XHJcblx0XHRcdFx0XHRcdFx0c2V0SWNvbihwcmVTcGFuLCBcImRvd25sb2FkLWNsb3VkXCIpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHQpO1xyXG5cclxuXHRcdFx0XHRjb25zdCBsYXN0VXBkYXRlZCA9IG5ldyBEYXRlKHBsdWdpbkluZm8udXBkYXRlZCk7XHJcblx0XHRcdFx0Y29uc3QgdGltZVNpbmNlVXBkYXRlID0gY2FsY3VsYXRlVGltZUVsYXBzZWQobGFzdFVwZGF0ZWQpO1xyXG5cdFx0XHRcdC8vIFVwZGF0ZWRcclxuXHRcdFx0XHRpdGVtQ29udGFpbmVyLmNyZWF0ZURpdih7XHJcblx0XHRcdFx0XHRjbHM6IFwicXBzLWNvbW11bml0eS1pdGVtLXVwZGF0ZWRcIixcclxuXHRcdFx0XHRcdHRleHQ6IGBVcGRhdGVkICR7dGltZVNpbmNlVXBkYXRlfWAsXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIGRlc2NcclxuXHRcdFx0aXRlbUNvbnRhaW5lci5jcmVhdGVEaXYoe1xyXG5cdFx0XHRcdGNsczogXCJxcHMtY29tbXVuaXR5LWl0ZW0tZGVzY1wiLFxyXG5cdFx0XHRcdHRleHQ6IGl0ZW0uZGVzY3JpcHRpb24sXHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0b25DbG9zZSgpIHtcclxuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XHJcblx0XHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIChldmVudCkgPT4ge1xyXG5cdFx0XHR0aGlzLm1vdXNlUG9zaXRpb24gPSB7IHg6IGV2ZW50LmNsaWVudFgsIHk6IGV2ZW50LmNsaWVudFkgfTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGFzeW5jIChldmVudCkgPT4ge1xyXG5cdFx0XHRhd2FpdCBoYW5kbGVLZXlEb3duKGV2ZW50LCB0aGlzKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMubW9kYWxFbC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY29udGV4dG1lbnVcIiwgKGV2dCkgPT4ge1xyXG5cdFx0XHRpZiAodGhpcy5pc0RibENsaWNrKSByZXR1cm47XHJcblx0XHRcdGhhbmRsZUNvbnRleHRNZW51KGV2dCwgdGhpcyk7XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLm1vZGFsRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRibGNsaWNrXCIsIChldnQpID0+IHtcclxuXHRcdFx0aWYgKHRoaXMuaXNEYmxDbGljaykgcmV0dXJuO1xyXG5cdFx0XHRoYW5kbGVEYmxDbGljayhldnQsIHRoaXMpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5wbHVnaW4uZ2V0UGx1Z2luc0luZm8oKTtcclxuXHRcdHRoaXMucGx1Z2luLmdldExlbmd0aCgpO1xyXG5cdFx0bmV3IFFQU01vZGFsKHRoaXMuYXBwLCB0aGlzLnBsdWdpbikub3BlbigpO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoRGF0YSh1cmw6IHN0cmluZykge1xyXG5cdHRyeSB7XHJcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCk7XHJcblx0XHRjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG5cdFx0aWYgKGRhdGEpIHJldHVybiBkYXRhO1xyXG5cdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHQvLyBjb25zb2xlLndhcm4oYEVycm9yIGZldGNoaW5nIGRhdGEgZnJvbSAke3VybH06YCk7XHJcblx0XHRyZXR1cm4gbnVsbDtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRSZWFkTWUoaXRlbTogUGx1Z2luQ29tbUluZm8pIHtcclxuXHRjb25zdCByZXBvID0gaXRlbS5yZXBvO1xyXG5cdGNvbnN0IHJlcG9VUkwgPSBgaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy8ke3JlcG99L2NvbnRlbnRzL1JFQURNRS5tZGA7XHJcblx0dHJ5IHtcclxuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2gocmVwb1VSTCk7XHJcblx0XHRyZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG5cdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRjb25zb2xlLndhcm4oXCJFcnJvciBmZXRjaGluZyBSZWFkTWVcIik7XHJcblx0fVxyXG5cdHJldHVybiBudWxsO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0TWFuaWZlc3QoaXRlbTogUGx1Z2luQ29tbUluZm8pIHtcclxuXHRjb25zdCByZXBvID0gaXRlbS5yZXBvO1xyXG5cdGNvbnN0IHJlcG9VUkwgPSBgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tLyR7cmVwb30vbWFzdGVyL21hbmlmZXN0Lmpzb25gO1xyXG5cdHRyeSB7XHJcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHJlcG9VUkwpO1xyXG5cdFx0cmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuXHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0Y29uc29sZS53YXJuKFwiRXJyb3IgZmV0Y2hpbmcgbWFuaWZlc3RcIik7XHJcblx0fVxyXG5cdHJldHVybiBudWxsO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzb3J0SXRlbXNCeURvd25sb2FkcyhcclxuXHRsaXN0SXRlbXM6IFBsdWdpbkNvbW1JbmZvW10sXHJcblx0cGx1Z2luU3RhdHM6IFBhY2thZ2VJbmZvRGF0YVxyXG4pIHtcclxuXHRsaXN0SXRlbXMuc29ydCgoYSwgYikgPT4ge1xyXG5cdFx0Y29uc3QgcGx1Z2luQVN0YXRzID0gcGx1Z2luU3RhdHNbYS5pZF07XHJcblx0XHRjb25zdCBwbHVnaW5CU3RhdHMgPSBwbHVnaW5TdGF0c1tiLmlkXTtcclxuXHJcblx0XHRpZiAocGx1Z2luQVN0YXRzICYmIHBsdWdpbkJTdGF0cykge1xyXG5cdFx0XHRyZXR1cm4gcGx1Z2luQlN0YXRzLmRvd25sb2FkcyAtIHBsdWdpbkFTdGF0cy5kb3dubG9hZHM7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIDA7XHJcblx0fSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIENQTW1vZGVTb3J0KG1vZGFsOiBDUE1vZGFsLCBsaXN0SXRlbXM6IFBsdWdpbkNvbW1JbmZvW10pIHtcclxuXHRjb25zdCB7IHNldHRpbmdzIH0gPSBtb2RhbC5wbHVnaW47XHJcblx0Y29uc3QgeyBmaWx0ZXJzQ29tbSB9ID0gc2V0dGluZ3M7XHJcblx0aWYgKGZpbHRlcnNDb21tID09PSBcImluc3RhbGxlZFwiKSB7XHJcblx0XHRjb25zdCBpbnN0YWxsZWRQbHVnaW5zID0gZ2V0SW5zdGFsbGVkKCk7XHJcblx0XHRyZXR1cm4gbGlzdEl0ZW1zLmZpbHRlcigoaXRlbSkgPT4gaW5zdGFsbGVkUGx1Z2lucy5pbmNsdWRlcyhpdGVtLmlkKSk7XHJcblx0fSBlbHNlIGlmIChmaWx0ZXJzQ29tbSA9PT0gXCJub3RJbnN0YWxsZWRcIikge1xyXG5cdFx0Y29uc3QgaW5zdGFsbGVkUGx1Z2lucyA9IGdldEluc3RhbGxlZCgpO1xyXG5cdFx0cmV0dXJuIGxpc3RJdGVtcy5maWx0ZXIoKGl0ZW0pID0+ICFpbnN0YWxsZWRQbHVnaW5zLmluY2x1ZGVzKGl0ZW0uaWQpKTtcclxuXHR9IGVsc2UgaWYgKGZpbHRlcnNDb21tID09PSBcImJ5R3JvdXBcIikge1xyXG5cdFx0Y29uc3QgZ3JvdXBJbmRleCA9IGdldEluZGV4RnJvbVNlbGVjdGVkR3JvdXAoXHJcblx0XHRcdHNldHRpbmdzLnNlbGVjdGVkR3JvdXAgYXMgc3RyaW5nXHJcblx0XHQpO1xyXG5cdFx0aWYgKGdyb3VwSW5kZXggIT09IDApIHtcclxuXHRcdFx0Y29uc3QgZ3JvdXBlZEl0ZW1zID0gbGlzdEl0ZW1zLmZpbHRlcigoaSkgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IHsgcGx1Z2luc1RhZ2dlZCB9ID0gc2V0dGluZ3M7XHJcblx0XHRcdFx0Y29uc3QgdGFnZ2VkSXRlbSA9IHBsdWdpbnNUYWdnZWRbaS5pZF07XHJcblx0XHRcdFx0aWYgKHRhZ2dlZEl0ZW0pIHtcclxuXHRcdFx0XHRcdGNvbnN0IHsgZ3JvdXBJbmZvIH0gPSB0YWdnZWRJdGVtO1xyXG5cdFx0XHRcdFx0Y29uc3QgeyBncm91cEluZGljZXMgfSA9IGdyb3VwSW5mbztcclxuXHRcdFx0XHRcdHJldHVybiBncm91cEluZGljZXM/LmluZGV4T2YoZ3JvdXBJbmRleCkgIT09IC0xO1xyXG5cdFx0XHRcdH0gZWxzZSByZXR1cm4gZmFsc2U7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRyZXR1cm4gZ3JvdXBlZEl0ZW1zO1xyXG5cdFx0fSBlbHNlIHJldHVybiBsaXN0SXRlbXM7XHJcblx0fSBlbHNlIHtcclxuXHRcdHJldHVybiBsaXN0SXRlbXM7XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiBjaXJjbGVDU1NNb2RpZihcclxuXHRtb2RhbDogQ1BNb2RhbCxcclxuXHRlbDogSFRNTFNwYW5FbGVtZW50LFxyXG5cdGdyb3VwSW5kZXg6IG51bWJlclxyXG4pIHtcclxuXHRjb25zdCB7IHNldHRpbmdzIH0gPSBtb2RhbC5wbHVnaW47XHJcblx0Y29uc3QgeyBjb2xvciB9ID0gZ2V0RW1vamlGb3JHcm91cChncm91cEluZGV4KTtcclxuXHRlbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvcjtcclxufVxyXG5cclxuY29uc3QgaGFuZGxlS2V5RG93biA9IGFzeW5jIChldmVudDogS2V5Ym9hcmRFdmVudCwgbW9kYWw6IENQTW9kYWwpID0+IHtcclxuXHRjb25zdCBlbGVtZW50RnJvbVBvaW50ID0gZ2V0RWxlbWVudEZyb21Nb3VzZVBvc2l0aW9uKGV2ZW50LCBtb2RhbCk7XHJcblx0Y29uc3QgdGFyZ2V0QmxvY2sgPSBlbGVtZW50RnJvbVBvaW50Py5jbG9zZXN0KFxyXG5cdFx0XCIucXBzLWNvbW0tYmxvY2tcIlxyXG5cdCkgYXMgSFRNTEVsZW1lbnQ7XHJcblxyXG5cdGlmICh0YXJnZXRCbG9jaykge1xyXG5cdFx0Y29uc3QgbWF0Y2hpbmdJdGVtID0gZmluZE1hdGNoaW5nSXRlbShtb2RhbCwgdGFyZ2V0QmxvY2spO1xyXG5cclxuXHRcdGlmIChtYXRjaGluZ0l0ZW0pIHtcclxuXHRcdFx0bW9kYWwuc2VhcmNoVHlwaW5nID0gZmFsc2U7XHJcblx0XHRcdGF3YWl0IGhhbmRsZUhvdGtleXNDUE0oXHJcblx0XHRcdFx0bW9kYWwsXHJcblx0XHRcdFx0ZXZlbnQsXHJcblx0XHRcdFx0bWF0Y2hpbmdJdGVtIGFzIFBsdWdpbkNvbW1JbmZvXHJcblx0XHRcdCk7XHJcblx0XHR9XHJcblx0fSBlbHNlIHtcclxuXHRcdG1vZGFsLnNlYXJjaFR5cGluZyA9IHRydWU7XHJcblx0fVxyXG59O1xyXG5cclxuY29uc3QgaGFuZGxlSG90a2V5c0NQTSA9IGFzeW5jIChcclxuXHRtb2RhbDogQ1BNb2RhbCxcclxuXHRldnQ6IEtleWJvYXJkRXZlbnQsXHJcblx0cGx1Z2luSXRlbTogUGx1Z2luQ29tbUluZm9cclxuKSA9PiB7XHJcblx0aWYgKG1vZGFsLnByZXNzZWQpIHtcclxuXHRcdHJldHVybjtcclxuXHR9XHJcblx0cHJlc3NEZWxheShtb2RhbCk7XHJcblx0Y29uc3QgeyBwbHVnaW4gfSA9IG1vZGFsO1xyXG5cdGNvbnN0IHsgc2V0dGluZ3MgfSA9IHBsdWdpbjtcclxuXHRjb25zdCBudW1iZXJPZkdyb3VwcyA9IHNldHRpbmdzLm51bWJlck9mR3JvdXBzQ29tbTtcclxuXHQvLyBoYW5kbGUgZ3JvdXBzIHNob3J0Y3V0c1xyXG5cdGNvbnN0IEtleVRvU2V0dGluZ3NNYXA6IEtleVRvU2V0dGluZ3NNYXBUeXBlID0ge1xyXG5cdFx0ZzogYXN5bmMgKCkgPT4gYXdhaXQgb3BlbkdpdEh1YlJlcG8ocGx1Z2luSXRlbSksXHJcblx0XHRpOiAoKSA9PiBuZXcgUmVhZE1lTW9kYWwocGx1Z2luLmFwcCwgbW9kYWwsIHBsdWdpbkl0ZW0pLm9wZW4oKSxcclxuXHR9O1xyXG5cclxuXHRjb25zdCB7IHBsdWdpbnNUYWdnZWQgfSA9IHNldHRpbmdzO1xyXG5cdGNvbnN0IGtleVByZXNzZWQgPSBldnQua2V5O1xyXG5cdGNvbnN0IGl0ZW1JRCA9IHBsdWdpbkl0ZW0uaWQ7XHJcblx0bGV0IHRhZ2dlZEl0ZW0gPSBwbHVnaW5zVGFnZ2VkW2l0ZW1JRF07XHJcblx0aWYgKCF0YWdnZWRJdGVtKSB7XHJcblx0XHRwbHVnaW5zVGFnZ2VkW2l0ZW1JRF0gPSB7XHJcblx0XHRcdGdyb3VwSW5mbzogeyBncm91cEluZGljZXM6IFtdIH0sXHJcblx0XHR9O1xyXG5cdH1cclxuXHR0YWdnZWRJdGVtID0gcGx1Z2luc1RhZ2dlZFtpdGVtSURdO1xyXG5cdGNvbnN0IHsgZ3JvdXBJbmZvIH0gPSB0YWdnZWRJdGVtO1xyXG5cdGNvbnN0IHsgZ3JvdXBJbmRpY2VzIH0gPSBncm91cEluZm87XHJcblx0Y29uc3Qga2V5ID0gcGFyc2VJbnQoa2V5UHJlc3NlZCk7XHJcblx0aWYgKGtleSA+IDAgJiYga2V5IDw9IG51bWJlck9mR3JvdXBzKSB7XHJcblx0XHRpZiAoZ3JvdXBJbmRpY2VzLmxlbmd0aCA9PT0gNikgcmV0dXJuO1xyXG5cdFx0Y29uc3QgaW5kZXggPSBncm91cEluZGljZXMuaW5kZXhPZihrZXkpO1xyXG5cdFx0aWYgKGluZGV4ID09PSAtMSkge1xyXG5cdFx0XHRncm91cEluZGljZXMucHVzaChrZXkpO1xyXG5cdFx0XHRhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdGF3YWl0IHJlT3Blbk1vZGFsKG1vZGFsKTtcclxuXHRcdH1cclxuXHR9IGVsc2UgaWYgKGtleVByZXNzZWQgaW4gS2V5VG9TZXR0aW5nc01hcCkge1xyXG5cdFx0S2V5VG9TZXR0aW5nc01hcFtrZXlQcmVzc2VkXSgpO1xyXG5cdH0gZWxzZSBpZiAoXHJcblx0XHRrZXlQcmVzc2VkID09PSBcIkRlbGV0ZVwiIHx8XHJcblx0XHRrZXlQcmVzc2VkID09PSBcIkJhY2tzcGFjZVwiIHx8XHJcblx0XHRrZXlQcmVzc2VkID09PSBcIjBcIlxyXG5cdCkge1xyXG5cdFx0aWYgKGdyb3VwSW5kaWNlcy5sZW5ndGggPT09IDEpIHtcclxuXHRcdFx0ZGVsZXRlIHBsdWdpbnNUYWdnZWRbaXRlbUlEXTtcclxuXHRcdFx0YXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRhd2FpdCByZU9wZW5Nb2RhbChtb2RhbCk7XHJcblx0XHR9IGVsc2UgaWYgKGdyb3VwSW5kaWNlcy5sZW5ndGggPiAxKSB7XHJcblx0XHRcdGNvbnN0IG1lbnUgPSBuZXcgTWVudSgpO1xyXG5cdFx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XHJcblx0XHRcdFx0aXRlbVxyXG5cdFx0XHRcdFx0LnNldFRpdGxlKFwiUmVtb3ZlIGl0ZW0gZ3JvdXAocylcIilcclxuXHRcdFx0XHRcdC5zZXREaXNhYmxlZCh0cnVlKVxyXG5cdFx0XHRcdFx0LnNldERpc2FibGVkKHRydWUpXHJcblx0XHRcdCk7XHJcblx0XHRcdG1lbnUuYWRkU2VwYXJhdG9yKCk7XHJcblx0XHRcdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cclxuXHRcdFx0XHRpdGVtLnNldFRpdGxlKFwiQWxsXCIpLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0YXdhaXQgcm12QWxsR3JvdXBzRnJvbVBsdWdpbihtb2RhbCwgcGx1Z2luSXRlbSk7XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0KTtcclxuXHRcdFx0Zm9yIChjb25zdCBncm91cEluZGV4IG9mIGdyb3VwSW5kaWNlcykge1xyXG5cdFx0XHRcdGNvbnN0IHsgZW1vamkgfSA9IGdldEVtb2ppRm9yR3JvdXAoZ3JvdXBJbmRleCk7XHJcblx0XHRcdFx0bWVudS5hZGRJdGVtKChpdGVtKSA9PlxyXG5cdFx0XHRcdFx0aXRlbVxyXG5cdFx0XHRcdFx0XHQuc2V0VGl0bGUoYCR7ZW1vaml9IGdyb3VwICR7Z3JvdXBJbmRleH1gKVxyXG5cdFx0XHRcdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0aWYgKGdyb3VwSW5mbykge1xyXG5cdFx0XHRcdFx0XHRcdFx0Z3JvdXBJbmZvLmdyb3VwSW5kaWNlcyA9IHJlbW92ZUl0ZW0oXHJcblx0XHRcdFx0XHRcdFx0XHRcdGdyb3VwSW5kaWNlcyxcclxuXHRcdFx0XHRcdFx0XHRcdFx0Z3JvdXBJbmRleFxyXG5cdFx0XHRcdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHJlT3Blbk1vZGFsKG1vZGFsKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0bWVudS5zaG93QXRQb3NpdGlvbihtb2RhbC5tb3VzZVBvc2l0aW9uKTtcclxuXHRcdH1cclxuXHR9XHJcbn07XHJcblxyXG5jb25zdCBhZGRHcm91cENpcmNsZXMgPSAoXHJcblx0bW9kYWw6IENQTW9kYWwsXHJcblx0ZWw6IEhUTUxFbGVtZW50LFxyXG5cdGl0ZW06IFBsdWdpbkNvbW1JbmZvXHJcbikgPT4ge1xyXG5cdGNvbnN0IHsgc2V0dGluZ3MgfSA9IG1vZGFsLnBsdWdpbjtcclxuXHRjb25zdCBrZXkgPSBpdGVtLmlkO1xyXG5cdGNvbnN0IHRhZ2dlZEl0ZW0gPSBzZXR0aW5ncy5wbHVnaW5zVGFnZ2VkW2tleV07XHJcblx0aWYgKCF0YWdnZWRJdGVtKSByZXR1cm47XHJcblx0Y29uc3QgaW5kaWNlcyA9IHRhZ2dlZEl0ZW0uZ3JvdXBJbmZvLmdyb3VwSW5kaWNlcztcclxuXHRpZiAoaW5kaWNlcz8ubGVuZ3RoKSB7XHJcblx0XHRpZiAoaW5kaWNlcy5sZW5ndGggPCAzKSB7XHJcblx0XHRcdGNvbnN0IGNvbnRlbnQgPSBnZXRDaXJjbGVzSXRlbShpbmRpY2VzKTtcclxuXHRcdFx0ZWwuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYWZ0ZXJlbmRcIiwgY29udGVudCk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKGluZGljZXMubGVuZ3RoID49IDMgJiYgaW5kaWNlcy5sZW5ndGggPCA1KSB7XHJcblx0XHRcdC8vIDIgY2lyY2xlc1xyXG5cdFx0XHRjb25zdCBbdmFsZXVyMCwgdmFsZXVyMSwgLi4ucGFydDJdID0gaW5kaWNlcztcclxuXHRcdFx0Y29uc3QgcGFydDEgPSBbdmFsZXVyMCwgdmFsZXVyMV07XHJcblxyXG5cdFx0XHRjb25zdCBjb250ZW50MSA9IGdldENpcmNsZXNJdGVtKHBhcnQxKTtcclxuXHRcdFx0ZWwuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYWZ0ZXJlbmRcIiwgY29udGVudDEpO1xyXG5cclxuXHRcdFx0Y29uc3QgY29udGVudDIgPSBnZXRDaXJjbGVzSXRlbShwYXJ0Mik7XHJcblx0XHRcdGVsLmluc2VydEFkamFjZW50SFRNTChcImFmdGVyZW5kXCIsIGNvbnRlbnQyKTtcclxuXHRcdH0gZWxzZSBpZiAoaW5kaWNlcy5sZW5ndGggPj0gNSkge1xyXG5cdFx0XHQvLyAzIGNpcmNsZXNcclxuXHRcdFx0Y29uc3QgW3ZhbGV1cjAsIHZhbGV1cjEsIHZhbGV1cjIsIHZhbGV1cjMsIC4uLnBhcnQzXSA9IGluZGljZXM7XHJcblx0XHRcdGNvbnN0IHBhcnQxID0gW3ZhbGV1cjAsIHZhbGV1cjFdO1xyXG5cdFx0XHRjb25zdCBwYXJ0MiA9IFt2YWxldXIyLCB2YWxldXIzXTtcclxuXHJcblx0XHRcdGNvbnN0IGNvbnRlbnQxID0gZ2V0Q2lyY2xlc0l0ZW0ocGFydDEpO1xyXG5cdFx0XHRlbC5pbnNlcnRBZGphY2VudEhUTUwoXCJhZnRlcmVuZFwiLCBjb250ZW50MSk7XHJcblxyXG5cdFx0XHRjb25zdCBjb250ZW50MiA9IGdldENpcmNsZXNJdGVtKHBhcnQyKTtcclxuXHRcdFx0ZWwuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYWZ0ZXJlbmRcIiwgY29udGVudDIpO1xyXG5cclxuXHRcdFx0Y29uc3QgY29udGVudDMgPSBnZXRDaXJjbGVzSXRlbShwYXJ0Myk7XHJcblx0XHRcdGVsLmluc2VydEFkamFjZW50SFRNTChcImFmdGVyZW5kXCIsIGNvbnRlbnQzKTtcclxuXHRcdH1cclxuXHR9XHJcbn07XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5zdGFsbEZyb21MaXN0KG1vZGFsOiBDUE1vZGFsLCBlbmFibGUgPSBmYWxzZSkge1xyXG5cdGxldCBwcm9wZXJ0aWVzID0gW1wib3BlbkZpbGVcIl07IC8vLCBcImRvbnRBZGRUb1JlY2VudFwiXHJcblx0bGV0IGZpbGVQYXRoczogc3RyaW5nW10gPSB3aW5kb3cuZWxlY3Ryb24ucmVtb3RlLmRpYWxvZy5zaG93T3BlbkRpYWxvZ1N5bmMoe1xyXG5cdFx0dGl0bGU6IFwiUGljayBqc29uIGxpc3QgZmlsZSBvZiBwbHVnaW5zIHRvIGluc3RhbGxcIixcclxuXHRcdHByb3BlcnRpZXMsXHJcblx0XHRmaWx0ZXJzOiBbXCJKc29uTGlzdFwiLCBcImpzb25cIl0sXHJcblx0fSk7XHJcblxyXG5cdGlmIChmaWxlUGF0aHMgJiYgZmlsZVBhdGhzLmxlbmd0aCkge1xyXG5cdFx0Y29uc3QgY29udGVudSA9IHJlYWRGaWxlU3luYyhmaWxlUGF0aHNbMF0sIFwidXRmLThcIik7XHJcblxyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Y29uc3QgcGx1Z2luTGlzdCA9IEpTT04ucGFyc2UoY29udGVudSk7XHJcblx0XHRcdGlmIChBcnJheS5pc0FycmF5KHBsdWdpbkxpc3QpKSB7XHJcblx0XHRcdFx0Y29uc3QgcGx1Z2lucyA9IG1vZGFsLnBsdWdpbi5zZXR0aW5ncy5jb21tUGx1Z2lucy5maWx0ZXIoXHJcblx0XHRcdFx0XHQocGx1Z2luKSA9PiB7XHJcblx0XHRcdFx0XHRcdHJldHVybiBwbHVnaW5MaXN0LmluY2x1ZGVzKHBsdWdpbi5pZCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0KTtcclxuXHJcblx0XHRcdFx0YXdhaXQgaW5zdGFsbEFsbFBsdWdpbnNJbkdyb3VwKG1vZGFsLCBwbHVnaW5zLCBlbmFibGUpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJ0aGlzIGZpbGUgaXMgbm90IGEgSlNPTiBsaXN0LlwiKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBjYXRjaCAoZXJyZXVyKSB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoXCJFcnJvciByZWFkaW5nIEpTT04gZmlsZTogXCIsIGVycmV1cik7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UGx1Z2luc0xpc3QobW9kYWw6IENQTW9kYWwsIGVuYWJsZSA9IGZhbHNlKSB7XHJcblx0Y29uc3QgaW5zdGFsbGVkID0gZ2V0SW5zdGFsbGVkKCk7XHJcblx0bGV0IGZpbGVQYXRoOiBzdHJpbmcgPSB3aW5kb3cuZWxlY3Ryb24ucmVtb3RlLmRpYWxvZy5zaG93U2F2ZURpYWxvZ1N5bmMoe1xyXG5cdFx0dGl0bGU6IFwiU2F2ZSBpbnN0YWxsZWQgcGx1Z2lucyBsaXN0IGFzIEpTT05cIixcclxuXHRcdGZpbHRlcnM6IFt7IG5hbWU6IFwiSlNPTiBGaWxlc1wiLCBleHRlbnNpb25zOiBbXCJqc29uXCJdIH1dLFxyXG5cdH0pO1xyXG5cdGlmIChmaWxlUGF0aCAmJiBmaWxlUGF0aC5sZW5ndGgpIHtcclxuXHRcdHRyeSB7XHJcblx0XHRcdGNvbnN0IGpzb25Db250ZW50ID0gSlNPTi5zdHJpbmdpZnkoaW5zdGFsbGVkLCBudWxsLCAyKTtcclxuXHRcdFx0d3JpdGVGaWxlU3luYyhmaWxlUGF0aCwganNvbkNvbnRlbnQpO1xyXG5cdFx0XHRuZXcgTm90aWNlKGAke2ZpbGVQYXRofSBjcmVhdGVkYCwgMjUwMCk7XHJcblx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKFwiRXJyb3Igc2F2aW5nIEpTT04gZmlsZTpcIiwgZXJyb3IpO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluc3RhbGxQbHVnaW5Gcm9tT3RoZXJWYXVsdChcclxuXHRtb2RhbDogQ1BNb2RhbCxcclxuXHRlbmFibGUgPSBmYWxzZVxyXG4pIHtcclxuXHRsZXQgZGlyUGF0aDogc3RyaW5nW10gPSB3aW5kb3cuZWxlY3Ryb24ucmVtb3RlLmRpYWxvZy5zaG93T3BlbkRpYWxvZ1N5bmMoe1xyXG5cdFx0dGl0bGU6IFwiU2VsZWN0IHlvdXIgdmF1bHQgZGlyZWN0b3J5LCB5b3Ugd2FudCBwbHVnaW5zIGxpc3QgZnJvbVwiLFxyXG5cdFx0cHJvcGVydGllczogW1wib3BlbkRpcmVjdG9yeVwiXSxcclxuXHR9KTtcclxuXHRpZiAoZGlyUGF0aCAmJiBkaXJQYXRoLmxlbmd0aCkge1xyXG5cdFx0Y29uc3QgdmF1bHRQYXRoID0gZGlyUGF0aFswXTtcclxuXHJcblx0XHRjb25zdCBvYnNpZGlhblBhdGggPSBwYXRoLmpvaW4odmF1bHRQYXRoLCBcIi5vYnNpZGlhblwiKTtcclxuXHRcdC8vIGlzVmF1bHQ/XHJcblx0XHRpZiAoIWV4aXN0c1N5bmMob2JzaWRpYW5QYXRoKSkge1xyXG5cdFx0XHRuZXcgTm90aWNlKFwiU2VsZWN0IGEgdmF1bHQgZm9sZGVyIVwiLCAyNTAwKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIGRvbid0IHNlbGVjdCBhY3R1YWwgdmF1bHQhXHJcblx0XHRjb25zdCBzZWxlY3RlZFZhdWx0TmFtZSA9IHBhdGguYmFzZW5hbWUodmF1bHRQYXRoKTtcclxuXHRcdGNvbnN0IGN1cnJlbnRWYXVsdE5hbWUgPSBtb2RhbC5hcHAudmF1bHQuZ2V0TmFtZSgpO1xyXG5cclxuXHRcdGlmIChzZWxlY3RlZFZhdWx0TmFtZSA9PT0gY3VycmVudFZhdWx0TmFtZSkge1xyXG5cdFx0XHRuZXcgTm90aWNlKFwiWW91IGhhdmUgc2VsZWN0ZWQgdGhlIGN1cnJlbnQgdmF1bHQhXCIsIDI1MDApO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgcGx1Z2luc1BhdGggPSBwYXRoLmpvaW4ob2JzaWRpYW5QYXRoLCBcInBsdWdpbnNcIik7XHJcblx0XHRpZiAoIWV4aXN0c1N5bmMocGx1Z2luc1BhdGgpKSB7XHJcblx0XHRcdG5ldyBOb3RpY2UoXHJcblx0XHRcdFx0XCJUaGlzIHZhdWx0IGRvZXNuJ3QgY29udGFpbiBhbnkgaW5zdGFsbGVkIHBsdWdpbiFcIixcclxuXHRcdFx0XHQyNTAwXHJcblx0XHRcdCk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBpbnN0YWxsZWRQbHVnaW5zOiBzdHJpbmdbXSA9IFtdO1xyXG5cdFx0Y29uc3QgcGx1Z2luRm9sZGVycyA9IHJlYWRkaXJTeW5jKHBsdWdpbnNQYXRoKTtcclxuXHJcblx0XHRmb3IgKGNvbnN0IHBsdWdpbkZvbGRlciBvZiBwbHVnaW5Gb2xkZXJzKSB7XHJcblx0XHRcdGNvbnN0IHBsdWdpbkZvbGRlclBhdGggPSBwYXRoLmpvaW4ocGx1Z2luc1BhdGgsIHBsdWdpbkZvbGRlcik7XHJcblx0XHRcdGNvbnN0IHBhY2thZ2VKc29uUGF0aCA9IHBhdGguam9pbihwbHVnaW5Gb2xkZXJQYXRoLCBcInBhY2thZ2UuanNvblwiKTtcclxuXHRcdFx0Y29uc3QgbWFuaWZlc3RKc29uUGF0aCA9IHBhdGguam9pbihcclxuXHRcdFx0XHRwbHVnaW5Gb2xkZXJQYXRoLFxyXG5cdFx0XHRcdFwibWFuaWZlc3QuanNvblwiXHJcblx0XHRcdCk7XHJcblx0XHRcdGNvbnN0IG1haW5Kc1BhdGggPSBwYXRoLmpvaW4ocGx1Z2luRm9sZGVyUGF0aCwgXCJtYWluLmpzXCIpO1xyXG5cclxuXHRcdFx0aWYgKGV4aXN0c1N5bmMocGFja2FnZUpzb25QYXRoKSkge1xyXG5cdFx0XHRcdC8vIExlIHBsdWdpbiBhIHVuIHBhY2thZ2UuanNvblxyXG5cdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoZXhpc3RzU3luYyhtYW5pZmVzdEpzb25QYXRoKSAmJiBleGlzdHNTeW5jKG1haW5Kc1BhdGgpKSB7XHJcblx0XHRcdFx0Y29uc3QgbWFuaWZlc3RDb250ZW50ID0gcmVhZEZpbGVTeW5jKG1hbmlmZXN0SnNvblBhdGgsIFwidXRmLThcIik7XHJcblx0XHRcdFx0Y29uc3QgbWFuaWZlc3REYXRhID0gSlNPTi5wYXJzZShtYW5pZmVzdENvbnRlbnQpO1xyXG5cdFx0XHRcdGNvbnN0IHBsdWdpbklkID0gbWFuaWZlc3REYXRhLmlkO1xyXG5cclxuXHRcdFx0XHRpbnN0YWxsZWRQbHVnaW5zLnB1c2gocGx1Z2luSWQpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCFpbnN0YWxsZWRQbHVnaW5zLmxlbmd0aCkge1xyXG5cdFx0XHRuZXcgTm90aWNlKFwiRm91bmQgbm8gcGx1Z2luIHRvIGluc3RhbGxcIiwgMjUwMCk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBwbHVnaW5zID0gbW9kYWwucGx1Z2luLnNldHRpbmdzLmNvbW1QbHVnaW5zLmZpbHRlcigocGx1Z2luKSA9PiB7XHJcblx0XHRcdHJldHVybiBpbnN0YWxsZWRQbHVnaW5zLmluY2x1ZGVzKHBsdWdpbi5pZCk7XHJcblx0XHR9KTtcclxuXHRcdGF3YWl0IGluc3RhbGxBbGxQbHVnaW5zSW5Hcm91cChtb2RhbCwgcGx1Z2lucywgZW5hYmxlKTtcclxuXHR9XHJcbn0iLCAiaW1wb3J0IHsgR3JvdXBEYXRhLCBQbHVnaW5Db21tSW5mbywgUGx1Z2luSW5mbyB9IGZyb20gXCIuL3R5cGVzXCI7XHJcbmltcG9ydCBQbHVnaW4gZnJvbSBcIi4vbWFpblwiO1xyXG5pbXBvcnQgeyBRUFNNb2RhbCB9IGZyb20gXCIuL21haW5fbW9kYWxcIjtcclxuaW1wb3J0IHsgTm90aWNlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7IGNvbmZpcm0gfSBmcm9tIFwiLi9zZWNvbmRhcnlfbW9kYWxzXCI7XHJcbmltcG9ydCB7IENQTW9kYWwgfSBmcm9tIFwiLi9jb21tdW5pdHktcGx1Z2luc19tb2RhbFwiO1xyXG5cclxuLyoqXHJcbiAqIFJlc2V0IG1vc3Qgc3dpdGNoZWQgdmFsdWVzLlxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHJlc2V0ID0gYXN5bmMgKG1vZGFsOiBRUFNNb2RhbCkgPT4ge1xyXG5cdGNvbnN0IHsgcGx1Z2luIH0gPSBtb2RhbDtcclxuXHRjb25zdCBjb25maXJtZWQgPSBhd2FpdCBjb25maXJtKFwiUmVzZXQgbW9zdCBzd2l0Y2hlZCB2YWx1ZXM/XCIsIDI1MCk7XHJcblx0aWYgKGNvbmZpcm1lZCkge1xyXG5cdFx0cGx1Z2luLnJlc2V0ID0gdHJ1ZTsgLy9pZiB0cnVlLCByZXNldCBkb25lIGluIG1vZGFsPmFkZEl0ZW1zKClcclxuXHRcdHBsdWdpbi5nZXRMZW5ndGgoKTtcclxuXHRcdGF3YWl0IHJlT3Blbk1vZGFsKG1vZGFsKTtcclxuXHRcdG5ldyBOb3RpY2UoXCJEb25lXCIsIDI1MDApO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRuZXcgTm90aWNlKFwiT3BlcmF0aW9uIGNhbmNlbGxlZFwiLCAyNTAwKTtcclxuXHR9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3Qgc29ydEJ5TmFtZSA9IChsaXN0SXRlbXM6IFBsdWdpbkluZm9bXSkgPT4ge1xyXG5cdGxpc3RJdGVtcy5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBzb3J0U3dpdGNoZWQgPSAobGlzdEl0ZW1zOiBQbHVnaW5JbmZvW10pID0+IHtcclxuXHRsaXN0SXRlbXMuc29ydCgoYSwgYikgPT4gYi5zd2l0Y2hlZCAtIGEuc3dpdGNoZWQpO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHNldEdyb3VwVGl0bGUgPSAoXHJcblx0bW9kYWw6IFFQU01vZGFsIHwgQ1BNb2RhbCxcclxuXHRwbHVnaW46IFBsdWdpbixcclxuXHRHcm91cHM6IEdyb3VwRGF0YSxcclxuXHRudW1iZXJPZkdyb3VwczogbnVtYmVyXHJcbikgPT4ge1xyXG5cdGNvbnN0IHsgc2V0dGluZ3MgfSA9IHBsdWdpbjtcclxuXHRjb25zdCBjdXJyZW50R3JvdXBLZXlzID0gT2JqZWN0LmtleXMoR3JvdXBzKTtcclxuXHJcblx0Ly8gZGVsZXRlIGdyb3VwcyBpZiBuZXcgdmFsdWUgPCBwcmV2aW91cyB2YWx1ZSAod2hlbiBtb3Zpbmcgc2xpZGVyIGluIHByZWZzKVxyXG5cdGZvciAobGV0IGkgPSAxOyBpIDwgY3VycmVudEdyb3VwS2V5cy5sZW5ndGg7IGkrKykge1xyXG5cdFx0Y29uc3Qga2V5ID0gY3VycmVudEdyb3VwS2V5c1tpXTtcclxuXHRcdGRlbGV0ZSBHcm91cHNba2V5XTtcclxuXHR9XHJcblxyXG5cdGZvciAobGV0IGkgPSAxOyBpIDw9IG51bWJlck9mR3JvdXBzOyBpKyspIHtcclxuXHRcdGlmIChtb2RhbCBpbnN0YW5jZW9mIENQTW9kYWwpIHtcclxuXHRcdFx0aWYgKHNldHRpbmdzLmdyb3Vwc0NvbW1baV0/Lm5hbWUgPT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRcdHNldHRpbmdzLmdyb3Vwc0NvbW1baV0gPSB7XHJcblx0XHRcdFx0XHRuYW1lOiBcIlwiLFxyXG5cdFx0XHRcdH07XHJcblx0XHRcdH1cclxuXHRcdFx0Y29uc3QgZ3JvdXBLZXkgPVxyXG5cdFx0XHRcdHBsdWdpbi5zZXR0aW5ncy5ncm91cHNDb21tW2ldPy5uYW1lICE9PSBcIlwiXHJcblx0XHRcdFx0XHQ/IHBsdWdpbi5zZXR0aW5ncy5ncm91cHNDb21tW2ldPy5uYW1lXHJcblx0XHRcdFx0XHQ6IGBHcm91cCR7aX1gO1xyXG5cdFx0XHRHcm91cHNbYEdyb3VwJHtpfWBdID0gYCR7Z3JvdXBLZXl9YDtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGlmIChzZXR0aW5ncy5ncm91cHNbaV0/Lm5hbWUgPT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRcdHNldHRpbmdzLmdyb3Vwc1tpXSA9IHtcclxuXHRcdFx0XHRcdG5hbWU6IFwiXCIsXHJcblx0XHRcdFx0XHRkZWxheWVkOiBmYWxzZSxcclxuXHRcdFx0XHRcdHRpbWU6IDAsXHJcblx0XHRcdFx0XHRhcHBsaWVkOiBmYWxzZSxcclxuXHRcdFx0XHR9O1xyXG5cdFx0XHR9XHJcblx0XHRcdGNvbnN0IGdyb3VwS2V5ID1cclxuXHRcdFx0XHRwbHVnaW4uc2V0dGluZ3MuZ3JvdXBzW2ldPy5uYW1lICE9PSBcIlwiXHJcblx0XHRcdFx0XHQ/IHBsdWdpbi5zZXR0aW5ncy5ncm91cHNbaV0/Lm5hbWVcclxuXHRcdFx0XHRcdDogYEdyb3VwJHtpfWA7XHJcblx0XHRcdEdyb3Vwc1tgR3JvdXAke2l9YF0gPSBgJHtncm91cEtleX1gO1xyXG5cdFx0fVxyXG5cdH1cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRFbW9qaUZvckdyb3VwID0gKGdyb3VwTnVtYmVyOiBudW1iZXIpID0+IHtcclxuXHRjb25zdCBlbW9qaXMgPSBbXCJcdUQ4M0RcdURGRTFcIiwgXCJcdUQ4M0RcdUREMzVcIiwgXCJcdUQ4M0RcdUREMzRcIiwgXCJcdTI2QUFcdUZFMEZcIiwgXCJcdUQ4M0RcdURGRTRcIiwgXCJcdUQ4M0RcdURGRTJcIiwgXCJcdUQ4M0RcdURGRTNcIl07XHJcblx0Y29uc3QgY29sb3JzID0gW1xyXG5cdFx0XCIjRkZENzAwXCIsXHJcblx0XHRcIiMwMDAwRkZcIixcclxuXHRcdFwiI0ZGMDAwMFwiLFxyXG5cdFx0XCIjRkZGRkZGXCIsXHJcblx0XHRcIiNBNTJBMkFcIixcclxuXHRcdFwiIzAwRkYwMFwiLFxyXG5cdFx0XCIjODAwMDgwXCIsXHJcblx0XTtcclxuXHRyZXR1cm4geyBlbW9qaTogZW1vamlzW2dyb3VwTnVtYmVyIC0gMV0sIGNvbG9yOiBjb2xvcnNbZ3JvdXBOdW1iZXIgLSAxXSB9O1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGdldENpcmNsZXNJdGVtID0gKGluZGljZXM6IG51bWJlcltdKSA9PiB7XHJcblx0Ly9tb3ZlIHRoaXMgdG8gbW9kYWwgdXRpbGl0aWVzXHJcblx0Y29uc3QgbGVuID0gaW5kaWNlcy5sZW5ndGg7XHJcblx0bGV0IGJhY2tncm91bmQgPSBcIlwiO1xyXG5cdGlmIChsZW4gPT09IDEpIHtcclxuXHRcdGNvbnN0IHsgY29sb3IgfSA9IGdldEVtb2ppRm9yR3JvdXAoaW5kaWNlc1tsZW4gLSAxXSk7XHJcblx0XHRiYWNrZ3JvdW5kID0gYGJhY2tncm91bmQ6ICR7Y29sb3J9O2A7XHJcblx0fSBlbHNlIGlmIChsZW4gPT09IDIpIHtcclxuXHRcdGNvbnN0IHsgY29sb3I6IGNvbG9yMSB9ID0gZ2V0RW1vamlGb3JHcm91cChpbmRpY2VzW2xlbiAtIDJdKTtcclxuXHRcdGNvbnN0IHsgY29sb3I6IGNvbG9yMiB9ID0gZ2V0RW1vamlGb3JHcm91cChpbmRpY2VzW2xlbiAtIDFdKTtcclxuXHRcdGJhY2tncm91bmQgPSBgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDkwZGVnLCAke2NvbG9yMX0gNTAlLCAke2NvbG9yMn0gNTAlKTtgO1xyXG5cdH1cclxuXHJcblx0Y29uc3QgY29udGVudCA9IGA8ZGl2XHJcbiAgICAgICAgICAgIHN0eWxlPVwiJHtiYWNrZ3JvdW5kfVwiXHJcbiAgICAgICAgICAgIGNsYXNzPVwicXBzLWl0ZW0tbGluZS1ncm91cFwiXHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgJm5ic3A7XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICBgO1xyXG5cdHJldHVybiBjb250ZW50O1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHRvZ2dsZVBsdWdpbiA9IGFzeW5jIChtb2RhbDogUVBTTW9kYWwsIHBsdWdpbkl0ZW06IFBsdWdpbkluZm8pID0+IHtcclxuXHRjb25zdCB7IHBsdWdpbiB9ID0gbW9kYWw7XHJcblxyXG5cdHBsdWdpbkl0ZW0uZW5hYmxlZCA9ICFwbHVnaW5JdGVtLmVuYWJsZWQ7XHJcblx0cGx1Z2luSXRlbS5lbmFibGVkXHJcblx0XHQ/IGF3YWl0IGNvbmRpdGlvbmFsRW5hYmxlKG1vZGFsLCBwbHVnaW5JdGVtKVxyXG5cdFx0OiBhd2FpdCAobW9kYWwuYXBwIGFzIGFueSkucGx1Z2lucy5kaXNhYmxlUGx1Z2luQW5kU2F2ZShwbHVnaW5JdGVtLmlkKTtcclxuXHRwbHVnaW4uZ2V0TGVuZ3RoKCk7XHJcblx0YXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdGF3YWl0IHJlT3Blbk1vZGFsKG1vZGFsKTtcclxufTtcclxuXHJcbi8vZGVza3RvcCBvbmx5XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBvcGVuRGlyZWN0b3J5SW5GaWxlTWFuYWdlcihcclxuXHRtb2RhbDogUVBTTW9kYWwsXHJcblx0cGx1Z2luSXRlbTogUGx1Z2luSW5mb1xyXG4pIHtcclxuXHRsZXQgc2hlbGwgPSB3aW5kb3cuZWxlY3Ryb24uc2hlbGw7XHJcblx0Y29uc3QgZmlsZVBhdGggPSAobW9kYWwuYXBwIGFzIGFueSkudmF1bHQuYWRhcHRlci5nZXRGdWxsUGF0aChcclxuXHRcdHBsdWdpbkl0ZW0uZGlyXHJcblx0KTtcclxuXHR0cnkge1xyXG5cdFx0YXdhaXQgc2hlbGwub3BlbkV4dGVybmFsKGZpbGVQYXRoKTtcclxuXHR9IGNhdGNoIChlcnIpIHtcclxuXHRcdGNvbnN0IHBsdWdpbnMgPSAoYXBwIGFzIGFueSkudmF1bHQuYWRhcHRlci5nZXRGdWxsUGF0aChcclxuXHRcdFx0XCIub2JzaWRpYW4vcGx1Z2luc1wiXHJcblx0XHQpO1xyXG5cdFx0YXdhaXQgc2hlbGwub3BlbkV4dGVybmFsKHBsdWdpbnMpO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGRlbGF5ZWRSZUVuYWJsZSA9IGFzeW5jIChcclxuXHRfdGhpczogUVBTTW9kYWwsXHJcblx0cGx1Z2luSXRlbTogUGx1Z2luSW5mb1xyXG4pID0+IHtcclxuXHRhd2FpdCAoX3RoaXMuYXBwIGFzIGFueSkucGx1Z2lucy5kaXNhYmxlUGx1Z2luQW5kU2F2ZShwbHVnaW5JdGVtLmlkKTtcclxuXHRhd2FpdCAoX3RoaXMuYXBwIGFzIGFueSkucGx1Z2luc1xyXG5cdFx0LmVuYWJsZVBsdWdpbihwbHVnaW5JdGVtLmlkKVxyXG5cdFx0LnRoZW4oKHBsdWdpbkl0ZW0uZW5hYmxlZCA9IHRydWUpKTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBjb25kaXRpb25hbEVuYWJsZSA9IGFzeW5jIChcclxuXHRtb2RhbDogUVBTTW9kYWwsXHJcblx0cGx1Z2luSXRlbTogUGx1Z2luSW5mb1xyXG4pID0+IHtcclxuXHRpZiAocGx1Z2luSXRlbS5kZWxheWVkICYmIHBsdWdpbkl0ZW0udGltZSA+IDApIHtcclxuXHRcdGF3YWl0IChtb2RhbC5hcHAgYXMgYW55KS5wbHVnaW5zLmVuYWJsZVBsdWdpbihwbHVnaW5JdGVtLmlkKTtcclxuXHRcdGF3YWl0IG1vZGFsLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0cGx1Z2luSXRlbS5zd2l0Y2hlZCsrOyAvLyBiZXNvaW4gcXVlIGxcdTAwRTA/XHJcblx0XHRhd2FpdCAobW9kYWwuYXBwIGFzIGFueSkucGx1Z2lucy5lbmFibGVQbHVnaW5BbmRTYXZlKHBsdWdpbkl0ZW0uaWQpO1xyXG5cdH1cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBzZWxlY3RWYWx1ZSA9IChpbnB1dDogSFRNTElucHV0RWxlbWVudCB8IG51bGwpID0+IHtcclxuXHRpbnB1dD8uc2V0U2VsZWN0aW9uUmFuZ2UoMCwgaW5wdXQ/LnZhbHVlLmxlbmd0aCk7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ3JvdXBOb3RFbXB0eShncm91cEluZGV4OiBudW1iZXIsIG1vZGFsOiBRUFNNb2RhbCB8IENQTW9kYWwpIHtcclxuXHRjb25zdCB7IHBsdWdpbiB9ID0gbW9kYWw7XHJcblx0Y29uc3QgeyBzZXR0aW5ncyB9ID0gcGx1Z2luO1xyXG5cdGlmIChtb2RhbCBpbnN0YW5jZW9mIFFQU01vZGFsKSB7XHJcblx0XHRyZXR1cm4gc2V0dGluZ3MuYWxsUGx1Z2luc0xpc3Quc29tZShcclxuXHRcdFx0KHBsdWdpbikgPT5cclxuXHRcdFx0XHRwbHVnaW4uZ3JvdXBJbmZvLmdyb3VwSW5kaWNlcz8uaW5kZXhPZihncm91cEluZGV4KSAhPT0gLTFcclxuXHRcdCk7XHJcblx0fSBlbHNlIHtcclxuXHRcdGZvciAoY29uc3QgcGx1Z2luS2V5IGluIHNldHRpbmdzLnBsdWdpbnNUYWdnZWQpIHtcclxuXHRcdFx0Y29uc3QgcGx1Z2luID0gc2V0dGluZ3MucGx1Z2luc1RhZ2dlZFtwbHVnaW5LZXldO1xyXG5cdFx0XHRjb25zdCBncm91cEluZGljZXMgPSBwbHVnaW4uZ3JvdXBJbmZvLmdyb3VwSW5kaWNlcyB8fCBbXTtcclxuXHJcblx0XHRcdGlmIChncm91cEluZGljZXMuaW5jbHVkZXMoZ3JvdXBJbmRleCkpIHtcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBnZXRQbHVnaW5zSW5Hcm91cCA9IChcclxuXHRtb2RhbDogUVBTTW9kYWwgfCBDUE1vZGFsLFxyXG5cdGdyb3VwTnVtYmVyOiBudW1iZXJcclxuKSA9PiB7XHJcblx0Y29uc3QgeyBwbHVnaW4gfSA9IG1vZGFsO1xyXG5cdGNvbnN0IHsgc2V0dGluZ3MgfSA9IHBsdWdpbjtcclxuXHRpZiAobW9kYWwgaW5zdGFuY2VvZiBRUFNNb2RhbClcclxuXHRcdHJldHVybiBzZXR0aW5ncy5hbGxQbHVnaW5zTGlzdC5maWx0ZXIoXHJcblx0XHRcdChpOiBQbHVnaW5JbmZvKSA9PlxyXG5cdFx0XHRcdGkuZ3JvdXBJbmZvLmdyb3VwSW5kaWNlcz8uaW5kZXhPZihncm91cE51bWJlcikgIT09IC0xXHJcblx0XHQpO1xyXG5cdGVsc2Uge1xyXG5cdFx0Y29uc3QgcGx1Z2luc1dpdGhHcm91cDogUGx1Z2luQ29tbUluZm9bXSA9IFtdO1xyXG5cclxuXHRcdE9iamVjdC5rZXlzKHNldHRpbmdzLnBsdWdpbnNUYWdnZWQpLmZvckVhY2goKHBsdWdpbktleSkgPT4ge1xyXG5cdFx0XHRjb25zdCBwbHVnaW4gPSBzZXR0aW5ncy5wbHVnaW5zVGFnZ2VkW3BsdWdpbktleV07XHJcblx0XHRcdGNvbnN0IGdyb3VwSW5kaWNlcyA9IHBsdWdpbi5ncm91cEluZm8uZ3JvdXBJbmRpY2VzIHx8IFtdO1xyXG5cclxuXHRcdFx0aWYgKGdyb3VwSW5kaWNlcy5pbmNsdWRlcyhncm91cE51bWJlcikpIHtcclxuXHRcdFx0XHRjb25zdCBtYXRjaGluZ1BsdWdpbiA9IHNldHRpbmdzLmNvbW1QbHVnaW5zLmZpbmQoXHJcblx0XHRcdFx0XHQocGx1Z2luKSA9PiBwbHVnaW4uaWQgPT09IHBsdWdpbktleVxyXG5cdFx0XHRcdCk7XHJcblx0XHRcdFx0aWYgKG1hdGNoaW5nUGx1Z2luKSB7XHJcblx0XHRcdFx0XHRwbHVnaW5zV2l0aEdyb3VwLnB1c2gobWF0Y2hpbmdQbHVnaW4pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0cmV0dXJuIHBsdWdpbnNXaXRoR3JvdXA7XHJcblx0fVxyXG59O1xyXG5cclxuLy8gY29uc3QgZ2V0UGx1Z2luc1dpdGhHcm91cCA9IChtb2RhbDogQ1BNb2RhbCwgZ3JvdXBOdW1iZXI6IG51bWJlcikgPT4ge1xyXG4vLyBcdGNvbnN0IHsgcGx1Z2luIH0gPSBtb2RhbDtcclxuLy8gXHRjb25zdCB7IHNldHRpbmdzIH0gPSBwbHVnaW47XHJcbi8vIFx0Y29uc3QgcGx1Z2luc1dpdGhHcm91cDogUGx1Z2luQ29tbUluZm9bXSA9IFtdO1xyXG5cclxuLy8gXHRPYmplY3Qua2V5cyhzZXR0aW5ncy5wbHVnaW5zVGFnZ2VkKS5mb3JFYWNoKChwbHVnaW5LZXkpID0+IHtcclxuLy8gXHRcdGNvbnN0IHBsdWdpbiA9IHNldHRpbmdzLnBsdWdpbnNUYWdnZWRbcGx1Z2luS2V5XTtcclxuLy8gXHRcdGNvbnN0IGdyb3VwSW5kaWNlcyA9IHBsdWdpbi5ncm91cEluZm8uZ3JvdXBJbmRpY2VzIHx8IFtdO1xyXG5cclxuLy8gXHRcdGlmIChncm91cEluZGljZXMuaW5jbHVkZXMoZ3JvdXBOdW1iZXIpKSB7XHJcbi8vIFx0XHRcdGNvbnN0IG1hdGNoaW5nUGx1Z2luID0gbW9kYWwucGx1Z2luc0xpc3QuZmluZChcclxuLy8gXHRcdFx0XHQocGx1Z2luKSA9PiBwbHVnaW4uaWQgPT09IHBsdWdpbktleVxyXG4vLyBcdFx0XHQpO1xyXG4vLyBcdFx0XHRpZiAobWF0Y2hpbmdQbHVnaW4pIHtcclxuLy8gXHRcdFx0XHRwbHVnaW5zV2l0aEdyb3VwLnB1c2gobWF0Y2hpbmdQbHVnaW4pO1xyXG4vLyBcdFx0XHR9XHJcbi8vIFx0XHR9XHJcbi8vIFx0fSk7XHJcblxyXG4vLyBcdHJldHVybiBwbHVnaW5zV2l0aEdyb3VwO1xyXG4vLyB9O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEluZGV4RnJvbVNlbGVjdGVkR3JvdXAoc3RyOiBzdHJpbmcpIHtcclxuXHRpZiAoc3RyID09PSBcIlNlbGVjdEdyb3VwXCIpIHJldHVybiAwO1xyXG5cdGVsc2UgcmV0dXJuIHBhcnNlSW50KHN0ci5zbGljZSgtMSkpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ3JvdXBOYW1lRnJvbUluZGV4KGdyb3VwczogR3JvdXBEYXRhLCBpbmRleDogbnVtYmVyKSB7XHJcblx0Zm9yIChsZXQga2V5IGluIGdyb3Vwcykge1xyXG5cdFx0aWYgKGtleS5lbmRzV2l0aChpbmRleC50b1N0cmluZygpKSkge1xyXG5cdFx0XHRyZXR1cm4ga2V5O1xyXG5cdFx0fVxyXG5cdH1cclxuXHRyZXR1cm4gbnVsbDtcclxufVxyXG5cclxuXHJcbi8vIHJlbW92aW5nIGdyb3VwcyAtLS0tLS0tLS0tLS0tLS1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJtdkFsbEdyb3Vwc0Zyb21QbHVnaW4oXHJcblx0bW9kYWw6IFFQU01vZGFsIHwgQ1BNb2RhbCxcclxuXHRwbHVnaW5JdGVtOiBQbHVnaW5JbmZvIHwgUGx1Z2luQ29tbUluZm9cclxuKSB7XHJcblx0Y29uc3QgeyBwbHVnaW4gfSA9IG1vZGFsO1xyXG5cdGNvbnN0IHsgc2V0dGluZ3MgfSA9IHBsdWdpbjtcclxuXHJcblx0aWYgKFwicmVwb1wiIGluIHBsdWdpbkl0ZW0pIHtcclxuXHRcdGNvbnN0IGl0ZW1JRCA9IHBsdWdpbkl0ZW0uaWQ7XHJcblx0XHRjb25zdCB7IHBsdWdpbnNUYWdnZWQgfSA9IHNldHRpbmdzO1xyXG5cdFx0Y29uc3QgdGFnZ2VkSXRlbSA9IHBsdWdpbnNUYWdnZWRbaXRlbUlEXTtcclxuXHRcdGlmICghdGFnZ2VkSXRlbSkgcmV0dXJuO1xyXG5cdFx0ZGVsZXRlIHBsdWdpbnNUYWdnZWRbaXRlbUlEXTtcclxuXHRcdGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdGlmIChtb2RhbCBpbnN0YW5jZW9mIENQTW9kYWwpIHtcclxuXHRcdFx0YXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRhd2FpdCByZU9wZW5Nb2RhbChtb2RhbCk7XHJcblx0XHR9XHJcblx0fSBlbHNlIHtcclxuXHRcdGlmIChwbHVnaW5JdGVtLmdyb3VwSW5mbykge1xyXG5cdFx0XHRwbHVnaW5JdGVtLmdyb3VwSW5mby5ncm91cEluZGljZXMgPSBbXTtcclxuXHRcdFx0YXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRhd2FpdCByZU9wZW5Nb2RhbChtb2RhbCk7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlSW5wdXQoZWw6IEhUTUxFbGVtZW50IHwgbnVsbCwgY3VycmVudFZhbHVlOiBzdHJpbmcpIHtcclxuXHRpZiAoZWwpIHtcclxuXHRcdGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xyXG5cdFx0aW5wdXQudHlwZSA9IFwidGV4dFwiO1xyXG5cdFx0aW5wdXQudmFsdWUgPSBjdXJyZW50VmFsdWU7XHJcblx0XHRlbC5yZXBsYWNlV2l0aChpbnB1dCk7XHJcblx0XHRpbnB1dC5mb2N1cygpO1xyXG5cdFx0c2VsZWN0VmFsdWUoaW5wdXQpO1xyXG5cdFx0cmV0dXJuIGlucHV0O1xyXG5cdH0gZWxzZSB7XHJcblx0XHRyZXR1cm4gdW5kZWZpbmVkO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHByZXNzRGVsYXkgPSAobW9kYWw6IENQTW9kYWwgfCBRUFNNb2RhbCkgPT4ge1xyXG5cdG1vZGFsLnByZXNzZWQgPSB0cnVlO1xyXG5cdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0bW9kYWwucHJlc3NlZCA9IGZhbHNlO1xyXG5cdH0sIDEpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEluc3RhbGxlZCgpIHtcclxuXHRyZXR1cm4gT2JqZWN0LmtleXModGhpcy5hcHAucGx1Z2lucy5tYW5pZmVzdHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNJbnN0YWxsZWQoaXRlbTogYW55KSB7XHJcblx0cmV0dXJuIGdldEluc3RhbGxlZCgpLmluY2x1ZGVzKGl0ZW0uaWQpO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVPcGVuTW9kYWwobW9kYWw6IFFQU01vZGFsIHwgQ1BNb2RhbCkge1xyXG5cdG1vZGFsLnNlYXJjaEluaXQgPSBmYWxzZTtcclxuXHRhd2FpdCBtb2RhbC5vbk9wZW4oKTtcclxufVxyXG4iLCAiaW1wb3J0IHtcclxuXHRDb21tRmlsdGVycyxcclxuXHRGaWx0ZXJzLFxyXG5cdEdyb3VwRGF0YSxcclxuXHRHcm91cHMsXHJcblx0R3JvdXBzQ29tbSxcclxuXHRQbHVnaW5Db21tSW5mbyxcclxuXHRQbHVnaW5JbmZvLFxyXG59IGZyb20gXCIuL3R5cGVzXCI7XHJcbmltcG9ydCBQbHVnaW4gZnJvbSBcIi4vbWFpblwiO1xyXG5pbXBvcnQgeyBRUFNNb2RhbCB9IGZyb20gXCIuL21haW5fbW9kYWxcIjtcclxuaW1wb3J0IHsgUmVhZE1lTW9kYWwsIGNvbmZpcm0gfSBmcm9tIFwiLi9zZWNvbmRhcnlfbW9kYWxzXCI7XHJcbmltcG9ydCB7XHJcblx0QnV0dG9uQ29tcG9uZW50LFxyXG5cdERyb3Bkb3duQ29tcG9uZW50LFxyXG5cdEV4dHJhQnV0dG9uQ29tcG9uZW50LFxyXG5cdE1lbnUsXHJcblx0Tm90aWNlLFxyXG5cdFBsYXRmb3JtLFxyXG5cdFNlYXJjaENvbXBvbmVudCxcclxuXHRTZXR0aW5nLFxyXG5cdFRleHRDb21wb25lbnQsXHJcbn0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7IERlc2NyaXB0aW9uTW9kYWwgfSBmcm9tIFwiLi9zZWNvbmRhcnlfbW9kYWxzXCI7XHJcbmltcG9ydCB7XHJcblx0Y29uZGl0aW9uYWxFbmFibGUsXHJcblx0Y3JlYXRlSW5wdXQsXHJcblx0Z2V0RW1vamlGb3JHcm91cCxcclxuXHRnZXRJbmRleEZyb21TZWxlY3RlZEdyb3VwLFxyXG5cdGdldFBsdWdpbnNJbkdyb3VwLFxyXG5cdGdyb3VwTmFtZUZyb21JbmRleCxcclxuXHRncm91cE5vdEVtcHR5LFxyXG5cdGlzSW5zdGFsbGVkLFxyXG5cdG9wZW5EaXJlY3RvcnlJbkZpbGVNYW5hZ2VyLFxyXG5cdHJlT3Blbk1vZGFsLFxyXG5cdHJlc2V0LFxyXG5cdHJtdkFsbEdyb3Vwc0Zyb21QbHVnaW4sXHJcblx0c29ydEJ5TmFtZSxcclxuXHRzb3J0U3dpdGNoZWQsXHJcbn0gZnJvbSBcIi4vbW9kYWxfdXRpbHNcIjtcclxuaW1wb3J0IHsgaXNFbmFibGVkLCByZW1vdmVJdGVtIH0gZnJvbSBcIi4vdXRpbHNcIjtcclxuaW1wb3J0IHtcclxuXHRDUE1vZGFsLFxyXG5cdGdldE1hbmlmZXN0LFxyXG5cdGdldFBsdWdpbnNMaXN0LFxyXG5cdGluc3RhbGxGcm9tTGlzdCxcclxuXHRpbnN0YWxsUGx1Z2luRnJvbU90aGVyVmF1bHQsXHJcbn0gZnJvbSBcIi4vY29tbXVuaXR5LXBsdWdpbnNfbW9kYWxcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBtb3N0U3dpdGNoZWRSZXNldEJ1dHRvbiA9IChcclxuXHRtb2RhbDogUVBTTW9kYWwsXHJcblx0Y29udGVudEVsOiBIVE1MRWxlbWVudFxyXG4pID0+IHtcclxuXHRjb25zdCB7IHNldHRpbmdzIH0gPSBtb2RhbC5wbHVnaW47XHJcblx0aWYgKFxyXG5cdFx0c2V0dGluZ3MuZmlsdGVycyA9PT0gRmlsdGVycy5Nb3N0U3dpdGNoZWQgJiZcclxuXHRcdHNldHRpbmdzLmFsbFBsdWdpbnNMaXN0LnNvbWUoKHBsdWdpbikgPT4gcGx1Z2luLnN3aXRjaGVkICE9PSAwKVxyXG5cdCkge1xyXG5cdFx0bmV3IEV4dHJhQnV0dG9uQ29tcG9uZW50KGNvbnRlbnRFbClcclxuXHRcdFx0LnNldEljb24oXCJyZXNldFwiKVxyXG5cdFx0XHQuc2V0VG9vbHRpcChcIlJlc2V0IG1vc3RTd2l0Y2hlZCB2YWx1ZXNcIilcclxuXHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdHJlc2V0KG1vZGFsKTtcclxuXHRcdFx0XHRhd2FpdCByZU9wZW5Nb2RhbChtb2RhbCk7XHJcblx0XHRcdH0pO1xyXG5cdH1cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBieUdyb3VwRHJvcGRvd25zID0gKFxyXG5cdG1vZGFsOiBRUFNNb2RhbCB8IENQTW9kYWwsXHJcblx0Y29udGVudEVsOiBIVE1MRWxlbWVudFxyXG4pID0+IHtcclxuXHRjb25zdCB7IHBsdWdpbiB9ID0gbW9kYWw7XHJcblx0Y29uc3QgeyBzZXR0aW5ncyB9ID0gcGx1Z2luO1xyXG5cclxuXHRpZiAobW9kYWwgaW5zdGFuY2VvZiBRUFNNb2RhbCAmJiBzZXR0aW5ncy5maWx0ZXJzID09PSBGaWx0ZXJzLkJ5R3JvdXApIHtcclxuXHRcdGdldERyb3Bkb3duT3B0aW9ucyhHcm91cHMsIHBsdWdpbi5sZW5ndGhBbGwpO1xyXG5cdH0gZWxzZSBpZiAoXHJcblx0XHRtb2RhbCBpbnN0YW5jZW9mIENQTW9kYWwgJiZcclxuXHRcdHNldHRpbmdzLmZpbHRlcnNDb21tID09PSBDb21tRmlsdGVycy5CeUdyb3VwXHJcblx0KSB7XHJcblx0XHRnZXREcm9wZG93bk9wdGlvbnMoR3JvdXBzQ29tbSwgc2V0dGluZ3MuY29tbVBsdWdpbnMubGVuZ3RoKTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIGdldERyb3Bkb3duT3B0aW9ucyhncm91cHM6IEdyb3VwRGF0YSwgbGVuZ3RoOiBudW1iZXIpIHtcclxuXHRcdGNvbnN0IGRyb3Bkb3duT3B0aW9uczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xyXG5cdFx0Zm9yIChjb25zdCBncm91cEtleSBpbiBncm91cHMpIHtcclxuXHRcdFx0Y29uc3QgZ3JvdXBJbmRleCA9IGdldEluZGV4RnJvbVNlbGVjdGVkR3JvdXAoZ3JvdXBLZXkpO1xyXG5cdFx0XHRpZiAoZ3JvdXBLZXkgPT09IFwiU2VsZWN0R3JvdXBcIikge1xyXG5cdFx0XHRcdGRyb3Bkb3duT3B0aW9uc1tncm91cEtleV0gPSBncm91cHNbZ3JvdXBLZXldICsgYCgke2xlbmd0aH0pYDtcclxuXHRcdFx0fSBlbHNlIGlmIChncm91cE5vdEVtcHR5KGdyb3VwSW5kZXgsIG1vZGFsKSkge1xyXG5cdFx0XHRcdGRyb3Bkb3duT3B0aW9uc1tncm91cEtleV0gPVxyXG5cdFx0XHRcdFx0Z2V0RW1vamlGb3JHcm91cChncm91cEluZGV4KS5lbW9qaSArIGdyb3Vwc1tncm91cEtleV07XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdG5ldyBEcm9wZG93bkNvbXBvbmVudChjb250ZW50RWwpXHJcblx0XHRcdC5hZGRPcHRpb25zKGRyb3Bkb3duT3B0aW9ucylcclxuXHRcdFx0LnNldFZhbHVlKHNldHRpbmdzLnNlbGVjdGVkR3JvdXAgYXMgc3RyaW5nKVxyXG5cdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0c2V0dGluZ3Muc2VsZWN0ZWRHcm91cCA9IHZhbHVlO1xyXG5cdFx0XHRcdGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRhd2FpdCByZU9wZW5Nb2RhbChtb2RhbCk7XHJcblx0XHRcdH0pO1xyXG5cdH1cclxufTtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRTZWFyY2goXHJcblx0bW9kYWw6IENQTW9kYWwgfCBRUFNNb2RhbCxcclxuXHRjb250ZW50RWw6IEhUTUxFbGVtZW50LFxyXG5cdHBsYWNlaG9sZGVyOiBzdHJpbmdcclxuKSB7XHJcblx0Y29uc3QgeyBwbHVnaW4gfSA9IG1vZGFsO1xyXG5cdGNvbnN0IHsgc2V0dGluZ3MgfSA9IHBsdWdpbjtcclxuXHJcblx0bmV3IFNldHRpbmcoY29udGVudEVsKVxyXG5cdFx0LmFkZFNlYXJjaChhc3luYyAoc2VhcmNoOiBTZWFyY2hDb21wb25lbnQpID0+IHtcclxuXHRcdFx0Y29uc3QgYWN0dWFsVmFsdWUgPSBzZWFyY2guZ2V0VmFsdWUoKTtcclxuXHRcdFx0c2VhcmNoXHJcblx0XHRcdFx0LnNldFZhbHVlKHNldHRpbmdzLnNlYXJjaClcclxuXHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIocGxhY2Vob2xkZXIpXHJcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogc3RyaW5nKSA9PiB7XHJcblx0XHRcdFx0XHRpZiAobW9kYWwuc2VhcmNoVHlwaW5nKSB7XHJcblx0XHRcdFx0XHRcdHNldHRpbmdzLnNlYXJjaCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRtb2RhbC5pdGVtcy5lbXB0eSgpO1xyXG5cdFx0XHRcdFx0XHRtb2RhbC5hZGRJdGVtcygpO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0Ly8gaWYgY3Vyc29yIG92ZXIgcXBzLWl0ZW0tbGluZS5cclxuXHRcdFx0XHRcdFx0dmFsdWUgPSBhY3R1YWxWYWx1ZTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pXHJcblx0XHQuc2V0Q2xhc3MoXCJxcHMtc2VhcmNoLWNvbXBvbmVudFwiKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGRvU2VhcmNoKFxyXG5cdG1vZGFsOiBRUFNNb2RhbCB8IENQTW9kYWwsXHJcblx0dmFsdWU6IHN0cmluZyxcclxuXHRwbHVnaW5zTGlzdDogUGx1Z2luQ29tbUluZm9bXSB8IFBsdWdpbkluZm9bXVxyXG4pIHtcclxuXHRjb25zdCBsb3dlckNhc2VWYWx1ZSA9IHZhbHVlLnRvTG93ZXJDYXNlKCk7XHJcblx0cmV0dXJuIHBsdWdpbnNMaXN0LmZpbHRlcigoaXRlbSkgPT5cclxuXHRcdFtcclxuXHRcdFx0aXRlbS5uYW1lLFxyXG5cdFx0XHRtb2RhbCBpbnN0YW5jZW9mIFFQU01vZGFsXHJcblx0XHRcdFx0PyBcIlwiIC8vZG9uJ3Qgc2VhcmNoXHJcblx0XHRcdFx0OiAoaXRlbSBhcyBQbHVnaW5Db21tSW5mbykuZGVzY3JpcHRpb24sXHJcblx0XHRcdGl0ZW0uYXV0aG9yLFxyXG5cdFx0XS5zb21lKChwcm9wKSA9PiBwcm9wLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobG93ZXJDYXNlVmFsdWUpKVxyXG5cdCk7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBjb21tQnV0dG9uID0gKG1vZGFsOiBRUFNNb2RhbCwgZWw6IEhUTUxTcGFuRWxlbWVudCkgPT4ge1xyXG5cdGNvbnN0IHsgcGx1Z2luIH0gPSBtb2RhbDtcclxuXHRuZXcgQnV0dG9uQ29tcG9uZW50KGVsKVxyXG5cdFx0LnNldEljb24oXCJkb3dubG9hZC1jbG91ZFwiKVxyXG5cdFx0LnNldEN0YSgpXHJcblx0XHQuc2V0VG9vbHRpcChcclxuXHRcdFx0XCJjb21tdW5pdHkgcGx1Z2luczogeW91IGNhbiB0byB0YWcgcGx1Z2lucyB3aXRoIGdyb3VwcywgaW5zdGFsbCBieSBncm91cC4uLlwiXHJcblx0XHQpXHJcblx0XHQuYnV0dG9uRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQ6IE1vdXNlRXZlbnQpID0+IHtcclxuXHRcdFx0bW9kYWwuY2xvc2UoKTtcclxuXHRcdFx0bmV3IENQTW9kYWwobW9kYWwuYXBwLCBwbHVnaW4pLm9wZW4oKTtcclxuXHRcdH0pO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNvbW1PcHRpb25CdXR0b24gPSAobW9kYWw6IENQTW9kYWwsIGVsOiBIVE1MU3BhbkVsZW1lbnQpID0+IHtcclxuXHRjb25zdCB7IHBsdWdpbiB9ID0gbW9kYWw7XHJcblx0bmV3IEJ1dHRvbkNvbXBvbmVudChlbClcclxuXHRcdC5zZXRJY29uKFwibGlzdC1lbmRcIilcclxuXHRcdC5zZXRDdGEoKVxyXG5cdFx0LnNldFRvb2x0aXAoXHJcblx0XHRcdFwiSW5zdGFsbCAmIGVuYWJsZSBwbHVnaW5zIGJhc2VkIG9uIGFub3RoZXIgVmF1bHQgY29udGVudCBvciBmcm9tIGEgSlNPTiBsaXN0XCJcclxuXHRcdClcclxuXHRcdC5idXR0b25FbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dDogTW91c2VFdmVudCkgPT4ge1xyXG5cdFx0XHRjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcclxuXHRcdFx0bWVudS5hZGRJdGVtKChpdGVtKSA9PlxyXG5cdFx0XHRcdGl0ZW1cclxuXHRcdFx0XHRcdC5zZXRUaXRsZShcIkluc3RhbGwgcGx1Z2lucyBiYXNlZCBvbiBhbm90aGVyIFZhdWx0XCIpXHJcblx0XHRcdFx0XHQuc2V0SWNvbihcImJvb2stY29weVwiKVxyXG5cdFx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRhd2FpdCBpbnN0YWxsUGx1Z2luRnJvbU90aGVyVmF1bHQobW9kYWwpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0KTtcclxuXHRcdFx0bWVudS5hZGRJdGVtKChpdGVtKSA9PlxyXG5cdFx0XHRcdGl0ZW1cclxuXHRcdFx0XHRcdC5zZXRUaXRsZShcIkluc3RhbGwgJiBlbmFibGUgcGx1Z2lucyBiYXNlZCBvbiBhbm90aGVyIFZhdWx0XCIpXHJcblx0XHRcdFx0XHQuc2V0SWNvbihcImJvb2stY29weVwiKVxyXG5cdFx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRhd2FpdCBpbnN0YWxsUGx1Z2luRnJvbU90aGVyVmF1bHQobW9kYWwsIHRydWUpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0KTtcclxuXHRcdFx0bWVudS5hZGRTZXBhcmF0b3IoKTtcclxuXHJcblx0XHRcdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cclxuXHRcdFx0XHRpdGVtXHJcblx0XHRcdFx0XHQuc2V0VGl0bGUoXCJTYXZlIGluc3RhbGxlZCBwbHVnaW5zIGxpc3RcIilcclxuXHRcdFx0XHRcdC5zZXRJY29uKFwicGVuLXNxdWFyZVwiKVxyXG5cdFx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRhd2FpdCBnZXRQbHVnaW5zTGlzdChtb2RhbCwgdHJ1ZSk7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHQpO1xyXG5cdFx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XHJcblx0XHRcdFx0aXRlbVxyXG5cdFx0XHRcdFx0LnNldFRpdGxlKFwiSW5zdGFsbCAmIGVuYWJsZSBwbHVnaW5zIGZyb20ganNvbiBsaXN0XCIpXHJcblx0XHRcdFx0XHQuc2V0SWNvbihcImxpc3RcIilcclxuXHRcdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0YXdhaXQgaW5zdGFsbEZyb21MaXN0KG1vZGFsLCB0cnVlKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdCk7XHJcblx0XHRcdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cclxuXHRcdFx0XHRpdGVtXHJcblx0XHRcdFx0XHQuc2V0VGl0bGUoXCJJbnN0YWxsIHBsdWdpbnMgZnJvbSBqc29uIGxpc3RcIilcclxuXHRcdFx0XHRcdC5zZXRJY29uKFwibGlzdFwiKVxyXG5cdFx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRhd2FpdCBpbnN0YWxsRnJvbUxpc3QobW9kYWwpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0KTtcclxuXHJcblx0XHRcdG1lbnUuc2hvd0F0TW91c2VFdmVudChldnQpO1xyXG5cdFx0fSk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgcG93ZXJCdXR0b24gPSAobW9kYWw6IFFQU01vZGFsLCBlbDogSFRNTFNwYW5FbGVtZW50KSA9PiB7XHJcblx0Y29uc3QgeyBwbHVnaW4gfSA9IG1vZGFsO1xyXG5cdGNvbnN0IHsgc2V0dGluZ3MgfSA9IHBsdWdpbjtcclxuXHRuZXcgQnV0dG9uQ29tcG9uZW50KGVsKVxyXG5cdFx0LnNldEljb24oXCJwb3dlclwiKVxyXG5cdFx0LnNldEN0YSgpXHJcblx0XHQuc2V0VG9vbHRpcChcclxuXHRcdFx0XCJ0b2dnbGUgcGx1Z2luczogeW91IGNhbiBkaXNhYmxlIHNvbWUgcGx1Z2lucyBhbmQgZW5hYmxlIHRoZW0gbGF0ZXJcIlxyXG5cdFx0KVxyXG5cdFx0LmJ1dHRvbkVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XHJcblx0XHRcdGNvbnN0IG1lbnUgPSBuZXcgTWVudSgpO1xyXG5cdFx0XHRpZiAoXHJcblx0XHRcdFx0cGx1Z2luLmxlbmd0aEVuYWJsZWQgPT09IDEgJiZcclxuXHRcdFx0XHRzZXR0aW5ncy53YXNFbmFibGVkLmxlbmd0aCA9PT0gMFxyXG5cdFx0XHQpIHtcclxuXHRcdFx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IGl0ZW0uc2V0VGl0bGUoXCJObyBlbmFibGVkIHBsdWdpbnNcIikpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cclxuXHRcdFx0XHRcdGl0ZW1cclxuXHRcdFx0XHRcdFx0LnNldFRpdGxlKFxyXG5cdFx0XHRcdFx0XHRcdHNldHRpbmdzLndhc0VuYWJsZWQubGVuZ3RoID4gMFxyXG5cdFx0XHRcdFx0XHRcdFx0PyBcIkVuYWJsZSBwcmV2aW91cyBkaXNhYmxlZCBwbHVnaW5zXCJcclxuXHRcdFx0XHRcdFx0XHRcdDogXCJEaXNhYmxlIGFsbCBwbHVnaW5zXCJcclxuXHRcdFx0XHRcdFx0KVxyXG5cdFx0XHRcdFx0XHQuc2V0SWNvbihcclxuXHRcdFx0XHRcdFx0XHRzZXR0aW5ncy53YXNFbmFibGVkLmxlbmd0aCA+IDBcclxuXHRcdFx0XHRcdFx0XHRcdD8gXCJwb3dlclwiXHJcblx0XHRcdFx0XHRcdFx0XHQ6IFwicG93ZXItb2ZmXCJcclxuXHRcdFx0XHRcdFx0KVxyXG5cdFx0XHRcdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gZGlzYWJsZSBhbGwgZXhjZXB0IHRoaXMgcGx1Z2luXHJcblx0XHRcdFx0XHRcdFx0aWYgKHBsdWdpbi5sZW5ndGhFbmFibGVkID4gMSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0Zm9yIChjb25zdCBpIG9mIHNldHRpbmdzLmFsbFBsdWdpbnNMaXN0KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChpLmlkID09PSBcInF1aWNrLXBsdWdpbi1zd2l0Y2hlclwiKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoaS5lbmFibGVkKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLndhc0VuYWJsZWQucHVzaChpLmlkKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgKFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdG1vZGFsLmFwcCBhcyBhbnlcclxuXHRcdFx0XHRcdFx0XHRcdFx0KS5wbHVnaW5zLmRpc2FibGVQbHVnaW5BbmRTYXZlKGkuaWQpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRpLmVuYWJsZWQgPSBmYWxzZTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdHBsdWdpbi5nZXRMZW5ndGgoKTtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHJlT3Blbk1vZGFsKG1vZGFsKTtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJBbGwgcGx1Z2lucyBkaXNhYmxlZFwiLCAyNTAwKTtcclxuXHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKHNldHRpbmdzLndhc0VuYWJsZWQubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0Zm9yIChjb25zdCBpIG9mIHNldHRpbmdzLndhc0VuYWJsZWQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly9jaGVjayBwbHVnaW4gbm90IGRlbGV0ZWQgYmV0d2VlblxyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBwbHVnaW5Ub1VwZGF0ZSA9XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MuYWxsUGx1Z2luc0xpc3QuZmluZChcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdChwbHVnaW4pID0+IHBsdWdpbi5pZCA9PT0gaVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChwbHVnaW5Ub1VwZGF0ZSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IGNvbmRpdGlvbmFsRW5hYmxlKFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bW9kYWwsXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRwbHVnaW5Ub1VwZGF0ZVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0cGx1Z2luVG9VcGRhdGUuZW5hYmxlZCA9IHRydWU7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdHBsdWdpbi5nZXRMZW5ndGgoKTtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHJlT3Blbk1vZGFsKG1vZGFsKTtcclxuXHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLndhc0VuYWJsZWQgPSBbXTtcclxuXHRcdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJBbGwgcGx1Z2lucyByZS1lbmFibGVkXCIsIDI1MDApO1xyXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgbW9kYWwucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fSlcclxuXHRcdFx0XHQpO1xyXG5cdFx0XHRcdGlmIChzZXR0aW5ncy53YXNFbmFibGVkLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHRcdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cclxuXHRcdFx0XHRcdFx0aXRlbVxyXG5cdFx0XHRcdFx0XHRcdC5zZXRUaXRsZShcIlNraXAgcmUtZW5hYmxlXCIpXHJcblx0XHRcdFx0XHRcdFx0LnNldEljb24oXCJyZXNldFwiKVxyXG5cdFx0XHRcdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGNvbmZpcm1SZXNldCA9IGF3YWl0IGNvbmZpcm0oXHJcblx0XHRcdFx0XHRcdFx0XHRcdFwicmVzZXQgdG8gZGlzYWJsZVwiLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHQzMDBcclxuXHRcdFx0XHRcdFx0XHRcdCk7XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoY29uZmlybVJlc2V0KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLndhc0VuYWJsZWQgPSBbXTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgbW9kYWwucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRuZXcgTm90aWNlKFwiRG9uZVwiLCAyNTAwKTtcclxuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJPcGVyYXRpb24gY2FuY2VsbGVkXCIsIDI1MDApO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0bWVudS5hZGRTZXBhcmF0b3IoKTtcclxuXHRcdFx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XHJcblx0XHRcdFx0XHRpdGVtXHJcblx0XHRcdFx0XHRcdC5zZXRUaXRsZShcIlRvZ2dsZSBlbmFibGVkLXBsdWdpbnMgYnkgZ3JvdXBcIilcclxuXHRcdFx0XHRcdFx0LnNldERpc2FibGVkKHRydWUpXHJcblx0XHRcdFx0KTtcclxuXHJcblx0XHRcdFx0T2JqZWN0LmtleXMoR3JvdXBzKS5mb3JFYWNoKChncm91cEtleSkgPT4ge1xyXG5cdFx0XHRcdFx0aWYgKGdyb3VwS2V5ID09PSBcIlNlbGVjdEdyb3VwXCIpIHJldHVybjtcclxuXHRcdFx0XHRcdGNvbnN0IGdyb3VwVmFsdWUgPSBHcm91cHNbZ3JvdXBLZXkgYXMga2V5b2YgdHlwZW9mIEdyb3Vwc107XHJcblx0XHRcdFx0XHRjb25zdCBncm91cEluZGV4ID0gZ2V0SW5kZXhGcm9tU2VsZWN0ZWRHcm91cChncm91cEtleSk7XHJcblx0XHRcdFx0XHRjb25zdCBpbkdyb3VwID0gc2V0dGluZ3MuYWxsUGx1Z2luc0xpc3QuZmlsdGVyKChwbHVnaW4pID0+IHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIChcclxuXHRcdFx0XHRcdFx0XHRwbHVnaW4uZ3JvdXBJbmZvLmdyb3VwSW5kaWNlcz8uaW5kZXhPZihcclxuXHRcdFx0XHRcdFx0XHRcdGdyb3VwSW5kZXhcclxuXHRcdFx0XHRcdFx0XHQpICE9PSAtMVxyXG5cdFx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRsZXQgcHJldmlvdXNXYXNFbmFibGVkID0gaW5Hcm91cC5maWx0ZXIoXHJcblx0XHRcdFx0XHRcdChpKSA9PiBpLmdyb3VwSW5mby5ncm91cFdhc0VuYWJsZWQgPT09IHRydWVcclxuXHRcdFx0XHRcdCk7XHJcblxyXG5cdFx0XHRcdFx0aWYgKFxyXG5cdFx0XHRcdFx0XHRpbkdyb3VwLmxlbmd0aCA+IDAgJiZcclxuXHRcdFx0XHRcdFx0KGluR3JvdXAuc29tZSgoaSkgPT4gaS5lbmFibGVkID09PSB0cnVlKSB8fFxyXG5cdFx0XHRcdFx0XHRcdHByZXZpb3VzV2FzRW5hYmxlZC5sZW5ndGggPiAwKVxyXG5cdFx0XHRcdFx0KSB7XHJcblx0XHRcdFx0XHRcdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cclxuXHRcdFx0XHRcdFx0XHRpdGVtXHJcblx0XHRcdFx0XHRcdFx0XHQuc2V0VGl0bGUoXHJcblx0XHRcdFx0XHRcdFx0XHRcdHByZXZpb3VzV2FzRW5hYmxlZC5sZW5ndGggPiAwXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0PyBgUmUtZW5hYmxlICR7Z3JvdXBWYWx1ZX1gXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0OiBncm91cFZhbHVlXHJcblx0XHRcdFx0XHRcdFx0XHQpXHJcblx0XHRcdFx0XHRcdFx0XHQuc2V0SWNvbihcclxuXHRcdFx0XHRcdFx0XHRcdFx0cHJldmlvdXNXYXNFbmFibGVkLmxlbmd0aCA+IDBcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQ/IFwicG93ZXJcIlxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdDogXCJwb3dlci1vZmZcIlxyXG5cdFx0XHRcdFx0XHRcdFx0KVxyXG5cdFx0XHRcdFx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAocHJldmlvdXNXYXNFbmFibGVkLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IHRvRGlzYWJsZSA9IGluR3JvdXBcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC5maWx0ZXIoKGkpID0+IGkuZW5hYmxlZCA9PT0gdHJ1ZSlcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC5tYXAoYXN5bmMgKGkpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aS5ncm91cEluZm8uZ3JvdXBXYXNFbmFibGVkID1cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0cnVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCAoXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0bW9kYWwuYXBwIGFzIGFueVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQpLnBsdWdpbnMuZGlzYWJsZVBsdWdpbkFuZFNhdmUoXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aS5pZFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpLmVuYWJsZWQgPSBmYWxzZTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IFByb21pc2UuYWxsKHRvRGlzYWJsZSk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHRvRGlzYWJsZSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0cGx1Z2luLmdldExlbmd0aCgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgcmVPcGVuTW9kYWwobW9kYWwpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bmV3IE5vdGljZShcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XCJBbGwgcGx1Z2lucyBkaXNhYmxlZFwiLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQyNTAwXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgbW9kYWwucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRmb3IgKGNvbnN0IGkgb2YgcHJldmlvdXNXYXNFbmFibGVkKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCBjb25kaXRpb25hbEVuYWJsZShtb2RhbCwgaSk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpLmVuYWJsZWQgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aS5zd2l0Y2hlZCsrO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRwcmV2aW91c1dhc0VuYWJsZWQubWFwKChwbHVnaW4pID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHBsdWdpbi5ncm91cEluZm8uZ3JvdXBXYXNFbmFibGVkID1cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZmFsc2U7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0cGx1Z2luLmdldExlbmd0aCgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHJlT3Blbk1vZGFsKG1vZGFsKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRuZXcgTm90aWNlKFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XCJBbGwgcGx1Z2lucyByZS1lbmFibGVkXCIsXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQyNTAwXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fSlcclxuXHRcdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdFx0aWYgKHByZXZpb3VzV2FzRW5hYmxlZC5sZW5ndGggPiAwKSB7XHJcblx0XHRcdFx0XHRcdFx0bWVudS5hZGRJdGVtKChpdGVtKSA9PlxyXG5cdFx0XHRcdFx0XHRcdFx0aXRlbVxyXG5cdFx0XHRcdFx0XHRcdFx0XHQuc2V0VGl0bGUoXCJTa2lwIHJlLWVuYWJsZVwiKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHQuc2V0SWNvbihcInJlc2V0XCIpXHJcblx0XHRcdFx0XHRcdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBjb25maXJtUmVzZXQgPSBhd2FpdCBjb25maXJtKFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XCJza2lwIHJlLWVuYWJsZSA/XCIsXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQyMDBcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChjb25maXJtUmVzZXQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHByZXZpb3VzV2FzRW5hYmxlZC5tYXAoKHBsdWdpbikgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRwbHVnaW4uZ3JvdXBJbmZvLmdyb3VwV2FzRW5hYmxlZCA9XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZmFsc2U7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IG1vZGFsLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJEb25lXCIsIDI1MDApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRuZXcgTm90aWNlKFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcIk9wZXJhdGlvbiBjYW5jZWxsZWRcIixcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0MjUwMFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdG1lbnUuc2hvd0F0TW91c2VFdmVudChldnQpO1xyXG5cdFx0fSk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgbW9kZVNvcnQgPSAocGx1Z2luOiBQbHVnaW4sIGxpc3RJdGVtczogUGx1Z2luSW5mb1tdKSA9PiB7XHJcblx0Y29uc3QgeyBzZXR0aW5ncyB9ID0gcGx1Z2luO1xyXG5cdC8vIGFmdGVyIHJlc2V0IE1vc3RTd2l0Y2hlZFxyXG5cdGlmIChwbHVnaW4ucmVzZXQpIHtcclxuXHRcdGNvbnN0IGFsbFBsdWdpbnNMaXN0ID0gc2V0dGluZ3MuYWxsUGx1Z2luc0xpc3Q7XHJcblx0XHRhbGxQbHVnaW5zTGlzdC5mb3JFYWNoKChpKSA9PiB7XHJcblx0XHRcdGkuc3dpdGNoZWQgPSAwO1xyXG5cdFx0fSk7XHJcblx0XHRwbHVnaW4ucmVzZXQgPSBmYWxzZTtcclxuXHR9XHJcblx0Ly8gRW5hYmxlZEZpcnN0XHJcblx0aWYgKHNldHRpbmdzLmZpbHRlcnMgPT09IEZpbHRlcnMuRW5hYmxlZEZpcnN0KSB7XHJcblx0XHRjb25zdCBlbmFibGVkSXRlbXMgPSBsaXN0SXRlbXMuZmlsdGVyKChpKSA9PiBpLmVuYWJsZWQpO1xyXG5cdFx0Y29uc3QgZGlzYWJsZWRJdGVtcyA9IGxpc3RJdGVtcy5maWx0ZXIoKGkpID0+ICFpLmVuYWJsZWQpO1xyXG5cdFx0c29ydEJ5TmFtZShlbmFibGVkSXRlbXMpO1xyXG5cdFx0c29ydEJ5TmFtZShkaXNhYmxlZEl0ZW1zKTtcclxuXHRcdGxpc3RJdGVtcyA9IFsuLi5lbmFibGVkSXRlbXMsIC4uLmRpc2FibGVkSXRlbXNdO1xyXG5cdH1cclxuXHQvLyBCeUdyb3VwXHJcblx0ZWxzZSBpZiAoc2V0dGluZ3MuZmlsdGVycyA9PT0gRmlsdGVycy5CeUdyb3VwKSB7XHJcblx0XHRjb25zdCBncm91cEluZGV4ID0gZ2V0SW5kZXhGcm9tU2VsZWN0ZWRHcm91cChcclxuXHRcdFx0c2V0dGluZ3Muc2VsZWN0ZWRHcm91cCBhcyBzdHJpbmdcclxuXHRcdCk7XHJcblx0XHRpZiAoZ3JvdXBJbmRleCAhPT0gMCkge1xyXG5cdFx0XHRjb25zdCBncm91cGVkSXRlbXMgPSBsaXN0SXRlbXMuZmlsdGVyKChpKSA9PiB7XHJcblx0XHRcdFx0cmV0dXJuIGkuZ3JvdXBJbmZvLmdyb3VwSW5kaWNlcz8uaW5kZXhPZihncm91cEluZGV4KSAhPT0gLTE7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRsaXN0SXRlbXMgPSBncm91cGVkSXRlbXM7XHJcblx0XHRcdHNvcnRCeU5hbWUobGlzdEl0ZW1zKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHNvcnRCeU5hbWUobGlzdEl0ZW1zKTtcclxuXHRcdH1cclxuXHR9XHJcblx0Ly8gTW9zdFN3aXRjaGVkXHJcblx0ZWxzZSBpZiAoc2V0dGluZ3MuZmlsdGVycyA9PT0gRmlsdGVycy5Nb3N0U3dpdGNoZWQpIHtcclxuXHRcdC8vICYmICFwbHVnaW4ucmVzZXRcclxuXHRcdHNvcnRCeU5hbWUobGlzdEl0ZW1zKTtcclxuXHRcdHNvcnRTd2l0Y2hlZChsaXN0SXRlbXMpO1xyXG5cdH1cclxuXHQvLyBBbGxcclxuXHRlbHNlIHtcclxuXHRcdHNvcnRCeU5hbWUobGlzdEl0ZW1zKTtcclxuXHR9XHJcblxyXG5cdHJldHVybiBsaXN0SXRlbXM7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZWRpdEdyb3VwTmFtZSA9IChcclxuXHRtb2RhbDogQ1BNb2RhbCB8IFFQU01vZGFsLFxyXG5cdHNwYW46IEhUTUxTcGFuRWxlbWVudCxcclxuXHRncm91cE51bWJlcjogbnVtYmVyXHJcbikgPT4ge1xyXG5cdGNvbnN0IHsgcGx1Z2luIH0gPSBtb2RhbDtcclxuXHRjb25zdCB7IHNldHRpbmdzIH0gPSBwbHVnaW47XHJcblxyXG5cdGNvbnN0IGN1cnJlbnRWYWx1ZSA9XHJcblx0XHQobW9kYWwgaW5zdGFuY2VvZiBDUE1vZGFsXHJcblx0XHRcdD8gc2V0dGluZ3MuZ3JvdXBzQ29tbVtncm91cE51bWJlcl0/Lm5hbWUgfHwgXCJcIlxyXG5cdFx0XHQ6IHNldHRpbmdzLmdyb3Vwc1tncm91cE51bWJlcl0/Lm5hbWUpIHx8IFwiXCI7XHJcblxyXG5cdGNvbnN0IHVwZGF0ZUdyb3VwTmFtZSA9ICh2YWx1ZTogc3RyaW5nKSA9PiB7XHJcblx0XHRpZiAobW9kYWwgaW5zdGFuY2VvZiBDUE1vZGFsKSB7XHJcblx0XHRcdHNldHRpbmdzLmdyb3Vwc0NvbW1bZ3JvdXBOdW1iZXJdLm5hbWUgPVxyXG5cdFx0XHRcdHZhbHVlIHx8IEdyb3Vwc0NvbW1bZ3JvdXBOdW1iZXJdO1xyXG5cdFx0XHRzcGFuLnRleHRDb250ZW50ID0gc2V0dGluZ3MuZ3JvdXBzQ29tbVtncm91cE51bWJlcl0ubmFtZTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHNldHRpbmdzLmdyb3Vwc1tncm91cE51bWJlcl0ubmFtZSA9IHZhbHVlIHx8IEdyb3Vwc1tncm91cE51bWJlcl07XHJcblx0XHRcdHNwYW4udGV4dENvbnRlbnQgPSBzZXR0aW5ncy5ncm91cHNbZ3JvdXBOdW1iZXJdLm5hbWU7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0Y29uc3QgaGFuZGxlQmx1ck9yRW50ZXIgPSAoKSA9PiB7XHJcblx0XHRzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcclxuXHRcdFx0aWYgKCFtb2RhbC5pc0RibENsaWNrICYmIGlucHV0KSB7XHJcblx0XHRcdFx0dXBkYXRlR3JvdXBOYW1lKGlucHV0LnZhbHVlKTtcclxuXHRcdFx0XHRpZiAobW9kYWwgaW5zdGFuY2VvZiBDUE1vZGFsKSB7XHJcblx0XHRcdFx0XHRhd2FpdCByZU9wZW5Nb2RhbChtb2RhbCk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGF3YWl0IHJlT3Blbk1vZGFsKG1vZGFsKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0sIDIwMCk7XHJcblx0fTtcclxuXHJcblx0Y29uc3QgaW5wdXQgPSBjcmVhdGVJbnB1dChzcGFuLCBjdXJyZW50VmFsdWUpO1xyXG5cclxuXHRpZiAoaW5wdXQpIHtcclxuXHRcdGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsIGhhbmRsZUJsdXJPckVudGVyKTtcclxuXHRcdGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChldmVudCkgPT4ge1xyXG5cdFx0XHRpZiAoZXZlbnQua2V5ID09PSBcIkVudGVyXCIpIHtcclxuXHRcdFx0XHRoYW5kbGVCbHVyT3JFbnRlcigpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgaXRlbVRvZ2dsZUNsYXNzID0gKFxyXG5cdG1vZGFsOiBRUFNNb2RhbCxcclxuXHRwbHVnaW5JdGVtOiBQbHVnaW5JbmZvLFxyXG5cdGl0ZW1Db250YWluZXI6IEhUTUxEaXZFbGVtZW50XHJcbikgPT4ge1xyXG5cdGNvbnN0IHsgc2V0dGluZ3MgfSA9IG1vZGFsLnBsdWdpbjtcclxuXHRpZiAocGx1Z2luSXRlbS5pZCA9PT0gXCJxdWljay1wbHVnaW4tc3dpdGNoZXJcIikge1xyXG5cdFx0aXRlbUNvbnRhaW5lci50b2dnbGVDbGFzcyhcInFwcy1xdWljay1wbHVnaW4tc3dpdGNoZXJcIiwgdHJ1ZSk7XHJcblx0fVxyXG5cdGlmIChwbHVnaW5JdGVtLmRlc2t0b3BPbmx5ID09PSB0cnVlKSB7XHJcblx0XHRpdGVtQ29udGFpbmVyLmFkZENsYXNzKFwicXBzLWRlc2t0b3Atb25seVwiKTtcclxuXHR9XHJcblx0aWYgKFxyXG5cdFx0c2V0dGluZ3MuZmlsdGVycyA9PT0gRmlsdGVycy5Nb3N0U3dpdGNoZWQgJiZcclxuXHRcdHBsdWdpbkl0ZW0uc3dpdGNoZWQgIT09IDBcclxuXHQpIHtcclxuXHRcdGl0ZW1Db250YWluZXIudG9nZ2xlQ2xhc3MoXCJxcHMtbW9zdC1zd2l0Y2hlZFwiLCB0cnVlKTtcclxuXHR9XHJcblx0aWYgKHBsdWdpbkl0ZW0uZGVsYXllZCkge1xyXG5cdFx0aXRlbUNvbnRhaW5lci50b2dnbGVDbGFzcyhcInRvZ2dsZS1idWxsZXQtY29sb3JcIiwgdHJ1ZSk7XHJcblx0XHRpdGVtQ29udGFpbmVyLnN0eWxlLnNldFByb3BlcnR5KFxyXG5cdFx0XHRcIi0tYnVsbGV0LWNvbnRlbnRcIixcclxuXHRcdFx0YFwiJHtwbHVnaW5JdGVtLnRpbWV9XCJgXHJcblx0XHQpO1xyXG5cdH1cclxufTtcclxuXHJcbmZ1bmN0aW9uIGhhc0tleVN0YXJ0aW5nV2l0aChvYmo6IFJlY29yZDxzdHJpbmcsIGFueT4sIHByZWZpeDogc3RyaW5nKTogYm9vbGVhbiB7XHJcblx0Zm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XHJcblx0XHRpZiAoa2V5LnN0YXJ0c1dpdGgocHJlZml4KSkge1xyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH1cclxuXHR9XHJcblx0cmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgaXRlbVRleHRDb21wb25lbnQgPSAoXHJcblx0cGx1Z2luSXRlbTogUGx1Z2luSW5mbyxcclxuXHRpdGVtQ29udGFpbmVyOiBIVE1MRGl2RWxlbWVudFxyXG4pID0+IHtcclxuXHRsZXQgY3VzdG9tVmFsdWUgPSBwbHVnaW5JdGVtLm5hbWU7XHJcblx0aWYgKHBsdWdpbkl0ZW0uZGVza3RvcE9ubHkpIHtcclxuXHRcdGN1c3RvbVZhbHVlID0gXCJcXHUxRDMwXCIgKyBjdXN0b21WYWx1ZTtcclxuXHR9XHJcblxyXG5cdGNvbnN0IHRleHQgPSBuZXcgVGV4dENvbXBvbmVudChpdGVtQ29udGFpbmVyKS5zZXRWYWx1ZShjdXN0b21WYWx1ZSkuaW5wdXRFbDtcclxuXHJcblx0cmV0dXJuIHRleHQ7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBhZGRSZW1vdmVJdGVtR3JvdXBNZW51SXRlbXMoXHJcblx0bW9kYWw6IFFQU01vZGFsLFxyXG5cdHN1Ym1lbnU6IE1lbnUsXHJcblx0cGx1Z2luOiBQbHVnaW4sXHJcblx0cGx1Z2luSXRlbTogUGx1Z2luSW5mb1xyXG4pIHtcclxuXHRjb25zdCB7IHNldHRpbmdzIH0gPSBwbHVnaW47XHJcblx0T2JqZWN0LmtleXMoR3JvdXBzKS5mb3JFYWNoKChncm91cEtleSkgPT4ge1xyXG5cdFx0Y29uc3QgeyBsZW5ndGhHcm91cCwgZ3JvdXBJbmRleCwgZ3JvdXBWYWx1ZSB9ID0gZ2V0R3JvdXBJbmRleExlbmd0aChcclxuXHRcdFx0bW9kYWwsXHJcblx0XHRcdGdyb3VwS2V5XHJcblx0XHQpO1xyXG5cdFx0Y29uc3QgZ2V0R3JvdXAgPVxyXG5cdFx0XHRwbHVnaW5JdGVtLmdyb3VwSW5mby5ncm91cEluZGljZXM/LmluZGV4T2YoZ3JvdXBJbmRleCkgIT09IC0xO1xyXG5cdFx0aWYgKGdyb3VwS2V5ICE9PSBcIlNlbGVjdEdyb3VwXCIgJiYgbGVuZ3RoR3JvdXAgJiYgZ2V0R3JvdXApIHtcclxuXHRcdFx0c3VibWVudS5hZGRJdGVtKChzdWJpdGVtKSA9PiB7XHJcblx0XHRcdFx0c3ViaXRlbS5zZXRUaXRsZShgJHtncm91cFZhbHVlfWApLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0Zm9yIChjb25zdCBpbmRleCBvZiBwbHVnaW5JdGVtLmdyb3VwSW5mby5ncm91cEluZGljZXMpIHtcclxuXHRcdFx0XHRcdFx0aWYgKGluZGV4ID09PSBncm91cEluZGV4KSB7XHJcblx0XHRcdFx0XHRcdFx0cmVtb3ZlSXRlbShcclxuXHRcdFx0XHRcdFx0XHRcdHBsdWdpbkl0ZW0uZ3JvdXBJbmZvLmdyb3VwSW5kaWNlcyxcclxuXHRcdFx0XHRcdFx0XHRcdGluZGV4XHJcblx0XHRcdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0aWYgKCFncm91cE5vdEVtcHR5KGdyb3VwSW5kZXgsIG1vZGFsKSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3Muc2VsZWN0ZWRHcm91cCA9IFwiU2VsZWN0R3JvdXBcIjtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGF3YWl0IHJlT3Blbk1vZGFsKG1vZGFsKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fSk7XHJcbn1cclxuXHJcbmNvbnN0IGdldEdyb3VwSW5kZXhMZW5ndGggPSAobW9kYWw6IFFQU01vZGFsIHwgQ1BNb2RhbCwgZ3JvdXBLZXk6IHN0cmluZykgPT4ge1xyXG5cdGNvbnN0IGdyb3VwSW5kZXggPSBnZXRJbmRleEZyb21TZWxlY3RlZEdyb3VwKGdyb3VwS2V5KTtcclxuXHRjb25zdCB7IHNldHRpbmdzIH0gPSBtb2RhbC5wbHVnaW47XHJcblx0bGV0IGxlbmd0aEdyb3VwLCBncm91cFZhbHVlO1xyXG5cdGlmIChtb2RhbCBpbnN0YW5jZW9mIFFQU01vZGFsKSB7XHJcblx0XHRsZW5ndGhHcm91cCA9IHNldHRpbmdzLmFsbFBsdWdpbnNMaXN0LmZpbHRlcihcclxuXHRcdFx0KGkpID0+IGkuZ3JvdXBJbmZvLmdyb3VwSW5kaWNlcz8uaW5kZXhPZihncm91cEluZGV4KSAhPT0gLTFcclxuXHRcdCkubGVuZ3RoO1xyXG5cdFx0Z3JvdXBWYWx1ZSA9IEdyb3Vwc1tncm91cEtleSBhcyBrZXlvZiB0eXBlb2YgR3JvdXBzXTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0bGVuZ3RoR3JvdXAgPSBPYmplY3Qua2V5cyhzZXR0aW5ncy5wbHVnaW5zVGFnZ2VkKS5maWx0ZXIoKGlkKSA9PiB7XHJcblx0XHRcdGNvbnN0IHBsdWdpbiA9IHNldHRpbmdzLnBsdWdpbnNUYWdnZWRbaWRdO1xyXG5cdFx0XHRjb25zdCBncm91cEluZGljZXMgPSBwbHVnaW4uZ3JvdXBJbmZvLmdyb3VwSW5kaWNlcztcclxuXHRcdFx0cmV0dXJuIGdyb3VwSW5kaWNlcz8uaW5kZXhPZihncm91cEluZGV4KSAhPT0gLTE7XHJcblx0XHR9KS5sZW5ndGg7XHJcblx0XHRncm91cFZhbHVlID0gR3JvdXBzQ29tbVtncm91cEtleSBhcyBrZXlvZiB0eXBlb2YgR3JvdXBzQ29tbV07XHJcblx0fVxyXG5cclxuXHRyZXR1cm4geyBncm91cEluZGV4LCBsZW5ndGhHcm91cCwgZ3JvdXBWYWx1ZSB9O1xyXG59O1xyXG5cclxuZnVuY3Rpb24gYWRkUmVtb3ZlR3JvdXBNZW51SXRlbXMoXHJcblx0bW9kYWw6IFFQU01vZGFsIHwgQ1BNb2RhbCxcclxuXHRzdWJtZW51OiBNZW51LFxyXG5cdGdyb3VwTnVtYmVyOiBudW1iZXJcclxuKSB7XHJcblx0Y29uc3QgeyBwbHVnaW4gfSA9IG1vZGFsO1xyXG5cdGNvbnN0IHsgc2V0dGluZ3MgfSA9IHBsdWdpbjtcclxuXHRsZXQgZ3JvdXBOYW1lO1xyXG5cdGlmIChtb2RhbCBpbnN0YW5jZW9mIFFQU01vZGFsKSB7XHJcblx0XHRncm91cE5hbWUgPSBncm91cE5hbWVGcm9tSW5kZXgoR3JvdXBzLCBncm91cE51bWJlcik7XHJcblx0fSBlbHNlIHtcclxuXHRcdGdyb3VwTmFtZSA9IGdyb3VwTmFtZUZyb21JbmRleChHcm91cHNDb21tLCBncm91cE51bWJlcik7XHJcblx0fVxyXG5cclxuXHRjb25zdCB7IGxlbmd0aEdyb3VwLCBncm91cFZhbHVlIH0gPSBnZXRHcm91cEluZGV4TGVuZ3RoKG1vZGFsLCBncm91cE5hbWUhKTtcclxuXHRpZiAoZ3JvdXBOYW1lICE9PSBcIlNlbGVjdEdyb3VwXCIgJiYgbGVuZ3RoR3JvdXApIHtcclxuXHRcdHN1Ym1lbnUuYWRkSXRlbSgoc3ViaXRlbSkgPT4ge1xyXG5cdFx0XHRzdWJpdGVtLnNldFRpdGxlKGAke2dyb3VwVmFsdWV9YCkub25DbGljayhhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0bGV0IHBsdWdpbnNSZW1vdmVkID0gZmFsc2U7XHJcblx0XHRcdFx0aWYgKG1vZGFsIGluc3RhbmNlb2YgUVBTTW9kYWwpIHtcclxuXHRcdFx0XHRcdGZvciAoY29uc3QgaSBvZiBzZXR0aW5ncy5hbGxQbHVnaW5zTGlzdCkge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBpbmRleCA9XHJcblx0XHRcdFx0XHRcdFx0aS5ncm91cEluZm8uZ3JvdXBJbmRpY2VzPy5pbmRleE9mKGdyb3VwTnVtYmVyKTtcclxuXHRcdFx0XHRcdFx0aWYgKGluZGV4ICE9PSAtMSkge1xyXG5cdFx0XHRcdFx0XHRcdGkuZ3JvdXBJbmZvLmdyb3VwSW5kaWNlcz8uc3BsaWNlKGluZGV4LCAxKTtcclxuXHRcdFx0XHRcdFx0XHRwbHVnaW5zUmVtb3ZlZCA9IHRydWU7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Y29uc3QgdGFnZ2VkSXRlbSA9IHNldHRpbmdzLnBsdWdpbnNUYWdnZWQ7XHJcblx0XHRcdFx0XHRPYmplY3Qua2V5cyh0YWdnZWRJdGVtKS5mb3JFYWNoKChpZCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBwbHVnaW4gPSB0YWdnZWRJdGVtW2lkXTtcclxuXHRcdFx0XHRcdFx0Y29uc3QgZ3JvdXBJbmRpY2VzID0gcGx1Z2luLmdyb3VwSW5mby5ncm91cEluZGljZXM7XHJcblx0XHRcdFx0XHRcdHBsdWdpbi5ncm91cEluZm8uZ3JvdXBJbmRpY2VzID0gZ3JvdXBJbmRpY2VzLmZpbHRlcihcclxuXHRcdFx0XHRcdFx0XHQoaW5kZXgpID0+IGluZGV4ICE9PSBncm91cE51bWJlclxyXG5cdFx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdFx0XHRwbHVnaW5zUmVtb3ZlZCA9IHRydWU7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0YXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdGF3YWl0IHJlT3Blbk1vZGFsKG1vZGFsKTtcclxuXHRcdFx0XHRpZiAocGx1Z2luc1JlbW92ZWQpIHtcclxuXHRcdFx0XHRcdG5ldyBOb3RpY2UoYEFsbCBwbHVnaW5zIHJlbW92ZWQgZnJvbSAke2dyb3VwVmFsdWV9YCwgMjUwMCk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdG5ldyBOb3RpY2UoYE5vIHBsdWdpbnMgZm91bmQgaW4gJHtncm91cFZhbHVlfSBncm91cGAsIDI1MDApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHR9XHJcbn1cclxuXHJcbmNvbnN0IGFkZFRvR3JvdXBTdWJNZW51ID0gKFxyXG5cdHN1Ym1lbnU6IE1lbnUsXHJcblx0cGx1Z2luSXRlbTogUGx1Z2luSW5mbyxcclxuXHRtb2RhbDogUVBTTW9kYWxcclxuKSA9PiB7XHJcblx0T2JqZWN0LmVudHJpZXMoR3JvdXBzKS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcclxuXHRcdGNvbnN0IGdyb3VwSW5kaWNlcyA9IHBsdWdpbkl0ZW0uZ3JvdXBJbmZvLmdyb3VwSW5kaWNlcztcclxuXHRcdGNvbnN0IGdyb3VwSW5kZXggPSBnZXRJbmRleEZyb21TZWxlY3RlZEdyb3VwKGtleSk7XHJcblx0XHRpZiAoa2V5ICE9PSBcIlNlbGVjdEdyb3VwXCIpIHtcclxuXHRcdFx0c3VibWVudS5hZGRJdGVtKChpdGVtKSA9PlxyXG5cdFx0XHRcdGl0ZW1cclxuXHRcdFx0XHRcdC5zZXRUaXRsZSh2YWx1ZSlcclxuXHRcdFx0XHRcdC5zZXREaXNhYmxlZChncm91cEluZGljZXMuaW5kZXhPZihncm91cEluZGV4KSAhPT0gLTEpXHJcblx0XHRcdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdGlmIChncm91cEluZGljZXMubGVuZ3RoID09PSA2KSByZXR1cm47XHJcblx0XHRcdFx0XHRcdGdyb3VwSW5kaWNlcz8ucHVzaChncm91cEluZGV4KTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgcmVPcGVuTW9kYWwobW9kYWwpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0KTtcclxuXHRcdH1cclxuXHR9KTtcclxufTtcclxuXHJcbmNvbnN0IHBsdWdpbkZlYXR1cmVTdWJtZW51ID0gYXN5bmMgKFxyXG5cdHN1Ym1lbnU6IE1lbnUsXHJcblx0cGx1Z2luSXRlbTogUGx1Z2luSW5mbyxcclxuXHRtb2RhbDogUVBTTW9kYWxcclxuKSA9PiB7XHJcblx0c3VibWVudS5hZGRJdGVtKChpdGVtKSA9PlxyXG5cdFx0aXRlbVxyXG5cdFx0XHQuc2V0VGl0bGUoXCJQbHVnaW4gaW5mb3MgKGkpXCIpXHJcblx0XHRcdC5zZXRJY29uKFwidGV4dFwiKVxyXG5cdFx0XHQub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0bmV3IERlc2NyaXB0aW9uTW9kYWwoXHJcblx0XHRcdFx0XHRtb2RhbC5wbHVnaW4uYXBwLFxyXG5cdFx0XHRcdFx0bW9kYWwucGx1Z2luLFxyXG5cdFx0XHRcdFx0cGx1Z2luSXRlbVxyXG5cdFx0XHRcdCkub3BlbigpO1xyXG5cdFx0XHR9KVxyXG5cdCk7XHJcblxyXG5cdHN1Ym1lbnUuYWRkSXRlbShcclxuXHRcdChcclxuXHRcdFx0aXRlbSAvLyBUT0RPXHJcblx0XHQpID0+XHJcblx0XHRcdGl0ZW1cclxuXHRcdFx0XHQuc2V0VGl0bGUoXCJQbHVnaW4gZ2l0aHViIChnKVwiKVxyXG5cdFx0XHRcdC5zZXRJY29uKFwiZ2l0aHViXCIpXHJcblx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0YXdhaXQgb3BlbkdpdEh1YlJlcG8ocGx1Z2luSXRlbSk7XHJcblx0XHRcdFx0fSlcclxuXHQpO1xyXG5cclxuXHRjb25zdCBwbHVnaW5TZXR0aW5ncyA9IChtb2RhbC5hcHAgYXMgYW55KS5zZXR0aW5nLm9wZW5UYWJCeUlkKFxyXG5cdFx0cGx1Z2luSXRlbS5pZFxyXG5cdCk7XHJcblx0c3VibWVudS5hZGRTZXBhcmF0b3IoKTtcclxuXHRzdWJtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XHJcblx0XHRpdGVtXHJcblx0XHRcdC5zZXRUaXRsZShcIlBsdWdpbiBzZXR0aW5ncyAocylcIilcclxuXHRcdFx0LnNldEljb24oXCJzZXR0aW5nc1wiKVxyXG5cdFx0XHQuc2V0RGlzYWJsZWQoIXBsdWdpblNldHRpbmdzKVxyXG5cdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0YXdhaXQgb3BlblBsdWdpblNldHRpbmdzKG1vZGFsLCBwbHVnaW5TZXR0aW5ncyk7XHJcblx0XHRcdH0pXHJcblx0KTtcclxuXHJcblx0Ly8gaGVscGVkIGJ5IGhvdGtleS1oZWxwZXIgY29kZSwgZXZlbiBpZiBpdCBpcyBleHRyZW1seSBzaW1wbGlmaWVkXHJcblx0Y29uc3QgY29uZGl0aW9uID0gYXdhaXQgZ2V0SGtleUNvbmRpdGlvbihtb2RhbCwgcGx1Z2luSXRlbSk7XHJcblx0c3VibWVudS5hZGRJdGVtKChpdGVtKSA9PlxyXG5cdFx0aXRlbVxyXG5cdFx0XHQuc2V0VGl0bGUoXCJNb2RpZnkgaG90a2V5cyAoaClcIilcclxuXHRcdFx0LnNldEljb24oXCJwbHVzLWNpcmNsZVwiKVxyXG5cdFx0XHQuc2V0RGlzYWJsZWQoIWNvbmRpdGlvbilcclxuXHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdGF3YWl0IHNob3dIb3RrZXlzRm9yKG1vZGFsLCBwbHVnaW5JdGVtKTtcclxuXHRcdFx0fSlcclxuXHQpO1xyXG59O1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG9wZW5QbHVnaW5TZXR0aW5ncyhcclxuXHRtb2RhbDogUVBTTW9kYWwgfCBDUE1vZGFsLFxyXG5cdHBsdWdpbkl0ZW06IFBsdWdpbkluZm8gfCBQbHVnaW5Db21tSW5mb1xyXG4pIHtcclxuXHRjb25zdCBwbHVnaW5TZXR0aW5ncyA9IChtb2RhbC5hcHAgYXMgYW55KS5zZXR0aW5nLm9wZW5UYWJCeUlkKFxyXG5cdFx0cGx1Z2luSXRlbS5pZFxyXG5cdCk7XHJcblx0aWYgKCFwbHVnaW5TZXR0aW5ncykge1xyXG5cdFx0bmV3IE5vdGljZShcIk5vIHNldHRpbmdzIG9uIHRoaXMgcGx1Z2luXCIsIDI1MDApO1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHRhd2FpdCAobW9kYWwuYXBwIGFzIGFueSkuc2V0dGluZy5vcGVuKCk7XHJcblx0YXdhaXQgcGx1Z2luU2V0dGluZ3M/LmRpc3BsYXkoKTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHNob3dIb3RrZXlzRm9yID0gYXN5bmMgZnVuY3Rpb24gKFxyXG5cdG1vZGFsOiBRUFNNb2RhbCB8IENQTW9kYWwsXHJcblx0cGx1Z2luSXRlbTogUGx1Z2luSW5mbyB8IFBsdWdpbkNvbW1JbmZvXHJcbikge1xyXG5cdGNvbnN0IGNvbmRpdGlvbiA9IGF3YWl0IGdldEhrZXlDb25kaXRpb24obW9kYWwsIHBsdWdpbkl0ZW0pO1xyXG5cdGlmICghY29uZGl0aW9uKSB7XHJcblx0XHRuZXcgTm90aWNlKFwiTm8gSG90S2V5cyBvbiB0aGlzIHBsdWdpblwiLCAyNTAwKTtcclxuXHRcdHJldHVybjtcclxuXHR9XHJcblx0YXdhaXQgKHRoaXMuYXBwIGFzIGFueSkuc2V0dGluZy5vcGVuKCk7XHJcblx0YXdhaXQgKHRoaXMuYXBwIGFzIGFueSkuc2V0dGluZy5vcGVuVGFiQnlJZChcImhvdGtleXNcIik7XHJcblx0Y29uc3QgdGFiID0gYXdhaXQgKHRoaXMuYXBwIGFzIGFueSkuc2V0dGluZy5hY3RpdmVUYWI7XHJcblx0dGFiLnNlYXJjaENvbXBvbmVudC5pbnB1dEVsLnZhbHVlID0gcGx1Z2luSXRlbS5uYW1lICsgXCI6XCI7XHJcblx0dGFiLnVwZGF0ZUhvdGtleVZpc2liaWxpdHkoKTtcclxuXHR0YWIuc2VhcmNoQ29tcG9uZW50LmlucHV0RWwuYmx1cigpO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGdldENvbW1hbmRDb25kaXRpb24gPSBhc3luYyBmdW5jdGlvbiAoXHJcblx0bW9kYWw6IFFQU01vZGFsIHwgQ1BNb2RhbCxcclxuXHRwbHVnaW5JdGVtOiBQbHVnaW5JbmZvIHwgUGx1Z2luQ29tbUluZm8gfCBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+XHJcbikge1xyXG5cdGNvbnN0IHBsdWdpbkNvbW1hbmRzID0gYXdhaXQgKG1vZGFsLmFwcCBhcyBhbnkpLnNldHRpbmcub3BlblRhYkJ5SWQoXHJcblx0XHRwbHVnaW5JdGVtLmlkXHJcblx0KT8uYXBwPy5jb21tYW5kcy5jb21tYW5kcztcclxuXHRyZXR1cm4gcGx1Z2luQ29tbWFuZHM7XHJcbn07XHJcbmV4cG9ydCBjb25zdCBnZXRIa2V5Q29uZGl0aW9uID0gYXN5bmMgZnVuY3Rpb24gKFxyXG5cdG1vZGFsOiBRUFNNb2RhbCB8IENQTW9kYWwsXHJcblx0cGx1Z2luSXRlbTogUGx1Z2luSW5mbyB8IFBsdWdpbkNvbW1JbmZvIHwgUmVjb3JkPHN0cmluZywgc3RyaW5nPlxyXG4pIHtcclxuXHRjb25zdCBwbHVnaW5Db21tYW5kcyA9IGF3YWl0IChtb2RhbC5hcHAgYXMgYW55KS5zZXR0aW5nLm9wZW5UYWJCeUlkKFxyXG5cdFx0XCJjb21tYW5kLXBhbGV0dGVcIlxyXG5cdCk/LmFwcD8uY29tbWFuZHMuY29tbWFuZHM7XHJcblx0cmV0dXJuIGhhc0tleVN0YXJ0aW5nV2l0aChwbHVnaW5Db21tYW5kcywgcGx1Z2luSXRlbS5pZCk7XHJcbn07XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gb3BlbkdpdEh1YlJlcG8ocGx1Z2luOiBQbHVnaW5JbmZvIHwgUGx1Z2luQ29tbUluZm8pIHtcclxuXHRpZiAoXCJyZXBvXCIgaW4gcGx1Z2luKSB7XHJcblx0XHRjb25zdCByZXBvVVJMID0gYGh0dHBzOi8vZ2l0aHViLmNvbS8ke3BsdWdpbi5yZXBvfWA7XHJcblx0XHR3aW5kb3cub3BlbihyZXBvVVJMLCBcIl9ibGFua1wiKTsgLy8gb3BlblxyXG5cdH0gZWxzZSB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFxyXG5cdFx0XHRcdFwiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL29ic2lkaWFubWQvb2JzaWRpYW4tcmVsZWFzZXMvbWFzdGVyL2NvbW11bml0eS1wbHVnaW5zLmpzb25cIlxyXG5cdFx0XHQpO1xyXG5cdFx0XHRjb25zdCBwbHVnaW5zRGF0YTogQXJyYXk8YW55PiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuXHJcblx0XHRcdGNvbnN0IHBsdWdpbkRhdGEgPSBwbHVnaW5zRGF0YS5maW5kKFxyXG5cdFx0XHRcdChpdGVtKSA9PiBpdGVtLmlkID09PSBwbHVnaW4uaWRcclxuXHRcdFx0KTtcclxuXHRcdFx0aWYgKHBsdWdpbkRhdGEgJiYgcGx1Z2luRGF0YS5yZXBvKSB7XHJcblx0XHRcdFx0Y29uc3QgcmVwb1VSTCA9IGBodHRwczovL2dpdGh1Yi5jb20vJHtwbHVnaW5EYXRhLnJlcG99YDtcclxuXHRcdFx0XHR3aW5kb3cub3BlbihyZXBvVVJMLCBcIl9ibGFua1wiKTsgLy8gb3BlbiBicm93c2VyIGluIG5ldyB0YWJcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRjb25zb2xlLmRlYnVnKFwiUmVwbyBub3QgZm91bmQgZm9yIHRoZSBwbHVnaW4uXCIpO1xyXG5cdFx0XHRcdHRyeSB7XHJcblx0XHRcdFx0XHRjb25zdCByZXBvVVJMID0gYGh0dHBzOi8vZ2l0aHViLmNvbS8ke3BsdWdpbi5hdXRob3J9LyR7cGx1Z2luLmlkfWA7XHJcblx0XHRcdFx0XHR3aW5kb3cub3BlbihyZXBvVVJMLCBcIl9ibGFua1wiKTtcclxuXHRcdFx0XHR9IGNhdGNoIHtcclxuXHRcdFx0XHRcdGNvbnN0IHJlcG9VUkwgPSBgaHR0cHM6Ly9naXRodWIuY29tLyR7cGx1Z2luLmF1dGhvcn1gO1xyXG5cdFx0XHRcdFx0d2luZG93Lm9wZW4ocmVwb1VSTCwgXCJfYmxhbmtcIik7XHJcblx0XHRcdFx0XHRjb25zb2xlLmRlYnVnKFwiUmVwbyBub3QgZm91bmQgZm9yIHRoZSBwbHVnaW4uXCIpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIHBsdWdpbiBkYXRhOlwiLCBlcnJvcik7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgY29uc3Qgc2VhcmNoRGl2QnV0dG9ucyA9IChcclxuXHRtb2RhbDogUVBTTW9kYWwsXHJcblx0Y29udGVudEVsOiBIVE1MRWxlbWVudFxyXG4pOiB2b2lkID0+IHtcclxuXHQvLyB0b2dnbGUgcGx1Z2luIG9wdGlvbnNcclxuXHRjb25zdCBzcGFuID0gY29udGVudEVsLmNyZWF0ZUVsKFxyXG5cdFx0XCJzcGFuXCIsXHJcblx0XHR7XHJcblx0XHRcdGNsczogXCJxcHMtdG9nZ2xlLXBsdWdpbnNcIixcclxuXHRcdH0sXHJcblx0XHQoZWwpID0+IHtcclxuXHRcdFx0Y29tbUJ1dHRvbihtb2RhbCwgZWwpO1xyXG5cdFx0XHRwb3dlckJ1dHRvbihtb2RhbCwgZWwpO1xyXG5cdFx0fVxyXG5cdCk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3Qgc2VhcmNoQ29tbURpdkJ1dHRvbiA9IChcclxuXHRtb2RhbDogQ1BNb2RhbCxcclxuXHRjb250ZW50RWw6IEhUTUxFbGVtZW50XHJcbik6IHZvaWQgPT4ge1xyXG5cdC8vIHRvZ2dsZSBwbHVnaW4gb3B0aW9uc1xyXG5cdGNvbnN0IHNwYW4gPSBjb250ZW50RWwuY3JlYXRlRWwoXHJcblx0XHRcInNwYW5cIixcclxuXHRcdHtcclxuXHRcdFx0Y2xzOiBcInFwcy10b2dnbGUtcGx1Z2luc1wiLFxyXG5cdFx0fSxcclxuXHRcdChlbCkgPT4ge1xyXG5cdFx0XHRjb21tT3B0aW9uQnV0dG9uKG1vZGFsLCBlbCk7XHJcblx0XHR9XHJcblx0KTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVEYmxDbGljayhldnQ6IE1vdXNlRXZlbnQsIG1vZGFsOiBRUFNNb2RhbCB8IENQTW9kYWwpIHtcclxuXHRjb25zdCBlbGVtZW50RnJvbVBvaW50ID0gZ2V0RWxlbWVudEZyb21Nb3VzZVBvc2l0aW9uKGV2dCwgbW9kYWwpO1xyXG5cdGNvbnN0IHRhcmdldEdyb3VwID0gZWxlbWVudEZyb21Qb2ludD8uY2xvc2VzdChcclxuXHRcdFwiLnFwcy1ncm91cHMtbmFtZVwiXHJcblx0KSBhcyBIVE1MRWxlbWVudDtcclxuXHJcblx0Y29uc3QgdGFyZ2V0QmxvY2sgPSBlbGVtZW50RnJvbVBvaW50Py5jbG9zZXN0KFxyXG5cdFx0XCIucXBzLWNvbW0tYmxvY2tcIlxyXG5cdCkgYXMgSFRNTEVsZW1lbnQ7XHJcblxyXG5cdGlmICh0YXJnZXRHcm91cCkge1xyXG5cdFx0Y29uc3QgZ3JvdXBOYW1lID0gdGFyZ2V0R3JvdXAudGV4dENvbnRlbnQ7XHJcblx0XHRjb25zdCBncm91cE51bWJlciA9IHBhcnNlSW50KFxyXG5cdFx0XHRncm91cE5hbWU/Lm1hdGNoKC9cXCgoXFxkKylcXCkkLyk/LlsxXSBhcyBzdHJpbmdcclxuXHRcdCk7XHJcblx0XHRlZGl0R3JvdXBOYW1lKG1vZGFsLCB0YXJnZXRHcm91cCwgZ3JvdXBOdW1iZXIpO1xyXG5cdH1cclxuXHRpZiAodGFyZ2V0QmxvY2spIHtcclxuXHRcdGNvbnN0IG1hdGNoaW5nSXRlbSA9IGZpbmRNYXRjaGluZ0l0ZW0obW9kYWwsIHRhcmdldEJsb2NrKTtcclxuXHRcdGlmIChtYXRjaGluZ0l0ZW0pIHtcclxuXHRcdFx0bmV3IFJlYWRNZU1vZGFsKFxyXG5cdFx0XHRcdG1vZGFsLnBsdWdpbi5hcHAsXHJcblx0XHRcdFx0bW9kYWwsXHJcblx0XHRcdFx0bWF0Y2hpbmdJdGVtIGFzIFBsdWdpbkNvbW1JbmZvXHJcblx0XHRcdCkub3BlbigpO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZUNvbnRleHRNZW51KGV2dDogTW91c2VFdmVudCwgbW9kYWw6IFFQU01vZGFsIHwgQ1BNb2RhbCkge1xyXG5cdGNvbnN0IGVsZW1lbnRGcm9tUG9pbnQgPSBnZXRFbGVtZW50RnJvbU1vdXNlUG9zaXRpb24oZXZ0LCBtb2RhbCk7XHJcblx0bGV0IHRhcmdldEJsb2NrLCB0YXJnZXRHcm91cDtcclxuXHJcblx0dGFyZ2V0R3JvdXAgPSBlbGVtZW50RnJvbVBvaW50Py5jbG9zZXN0KFwiLnFwcy1ncm91cHMtbmFtZVwiKSBhcyBIVE1MRWxlbWVudDtcclxuXHJcblx0aWYgKCF0YXJnZXRHcm91cCkge1xyXG5cdFx0aWYgKG1vZGFsIGluc3RhbmNlb2YgUVBTTW9kYWwpIHtcclxuXHRcdFx0dGFyZ2V0QmxvY2sgPSBlbGVtZW50RnJvbVBvaW50Py5jbG9zZXN0KFxyXG5cdFx0XHRcdFwiLnFwcy1pdGVtLWxpbmVcIlxyXG5cdFx0XHQpIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGFyZ2V0QmxvY2sgPSBlbGVtZW50RnJvbVBvaW50Py5jbG9zZXN0KFxyXG5cdFx0XHRcdFwiLnFwcy1jb21tLWJsb2NrXCJcclxuXHRcdFx0KSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGNvbnN0IGdyb3VwTmFtZSA9IHRhcmdldEdyb3VwPy50ZXh0Q29udGVudDtcclxuXHRjb25zdCBncm91cE51bWJlciA9IHBhcnNlSW50KGdyb3VwTmFtZT8ubWF0Y2goL1xcKChcXGQrKVxcKSQvKT8uWzFdIGFzIHN0cmluZyk7XHJcblxyXG5cdGlmICh0YXJnZXRHcm91cCkge1xyXG5cdFx0Z3JvdXBNZW51KGV2dCwgbW9kYWwsIGdyb3VwTnVtYmVyLCB0YXJnZXRHcm91cCk7XHJcblx0fVxyXG5cclxuXHRpZiAodGFyZ2V0QmxvY2spIHtcclxuXHRcdGlmIChtb2RhbCBpbnN0YW5jZW9mIFFQU01vZGFsKSB7XHJcblx0XHRcdGNvbnN0IG1hdGNoaW5nSXRlbSA9IGZpbmRNYXRjaGluZ0l0ZW0obW9kYWwsIHRhcmdldEJsb2NrKTtcclxuXHRcdFx0aWYgKG1hdGNoaW5nSXRlbSkge1xyXG5cdFx0XHRcdGNvbnRleHRNZW51UVBTKGV2dCwgbW9kYWwsIG1hdGNoaW5nSXRlbSBhcyBQbHVnaW5JbmZvKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Y29uc3QgbWF0Y2hpbmdJdGVtID0gZmluZE1hdGNoaW5nSXRlbShtb2RhbCwgdGFyZ2V0QmxvY2spO1xyXG5cdFx0XHRpZiAobWF0Y2hpbmdJdGVtKSB7XHJcblx0XHRcdFx0Y29udGV4dE1lbnVDUE0oZXZ0LCBtb2RhbCwgbWF0Y2hpbmdJdGVtIGFzIFBsdWdpbkNvbW1JbmZvKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbnRleHRNZW51Q1BNKFxyXG5cdGV2dDogTW91c2VFdmVudCxcclxuXHRtb2RhbDogQ1BNb2RhbCxcclxuXHRtYXRjaGluZ0l0ZW06IFBsdWdpbkNvbW1JbmZvXHJcbikge1xyXG5cdGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdGNvbnN0IG1lbnUgPSBuZXcgTWVudSgpO1xyXG5cdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xyXG5cdFx0aXRlbS5zZXRUaXRsZShcIkluc3RhbGwgcGx1Z2luXCIpXHJcblx0XHRcdC5zZXREaXNhYmxlZChpc0luc3RhbGxlZChtYXRjaGluZ0l0ZW0pKVxyXG5cdFx0XHQuc2V0SWNvbihcImxvZy1pblwiKVxyXG5cdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0YXdhaXQgaW5zdGFsbExhdGVzdFBsdWdpblZlcnNpb24obW9kYWwsIG1hdGNoaW5nSXRlbSk7XHJcblx0XHRcdFx0YXdhaXQgcmVPcGVuTW9kYWwobW9kYWwpO1xyXG5cdFx0XHR9KTtcclxuXHR9KTtcclxuXHJcblx0bWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XHJcblx0XHRjb25zdCBpc2VuYWJsZWQgPSBpc0VuYWJsZWQobW9kYWwsIG1hdGNoaW5nSXRlbS5pZCk7XHJcblx0XHRpdGVtLnNldFRpdGxlKGlzZW5hYmxlZCA/IFwiRGlzYWJsZSBwbHVnaW5cIiA6IFwiRW5hYmxlIHBsdWdpblwiKVxyXG5cdFx0XHQuc2V0RGlzYWJsZWQoIWlzSW5zdGFsbGVkKG1hdGNoaW5nSXRlbSkpXHJcblx0XHRcdC5zZXRJY29uKGlzZW5hYmxlZCA/IFwicG93ZXJvZmZcIiA6IFwicG93ZXJcIilcclxuXHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdGlzRW5hYmxlZChtb2RhbCwgbWF0Y2hpbmdJdGVtLmlkKVxyXG5cdFx0XHRcdFx0PyBhd2FpdCAobW9kYWwuYXBwIGFzIGFueSkucGx1Z2lucy5kaXNhYmxlUGx1Z2luQW5kU2F2ZShcclxuXHRcdFx0XHRcdFx0XHRtYXRjaGluZ0l0ZW0uaWRcclxuXHRcdFx0XHRcdCAgKVxyXG5cdFx0XHRcdFx0OiBhd2FpdCAobW9kYWwuYXBwIGFzIGFueSkucGx1Z2lucy5lbmFibGVQbHVnaW5BbmRTYXZlKFxyXG5cdFx0XHRcdFx0XHRcdG1hdGNoaW5nSXRlbS5pZFxyXG5cdFx0XHRcdFx0ICApO1xyXG5cclxuXHRcdFx0XHRjb25zdCBtc2cgPSBpc2VuYWJsZWQgPyBcImRpc2FibGVkXCIgOiBcImVuYWJsZWRcIjtcclxuXHRcdFx0XHRuZXcgTm90aWNlKGAke21hdGNoaW5nSXRlbS5uYW1lfSAke21zZ31gLCAyNTAwKTtcclxuXHRcdFx0fSk7XHJcblx0fSk7XHJcblx0bWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XHJcblx0XHRpdGVtLnNldFRpdGxlKFwiVW5pbnN0YWxsIHBsdWdpblwiKVxyXG5cdFx0XHQuc2V0RGlzYWJsZWQoIWlzSW5zdGFsbGVkKG1hdGNoaW5nSXRlbSkpXHJcblx0XHRcdC5zZXRJY29uKFwibG9nLW91dFwiKVxyXG5cdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5hcHAucGx1Z2lucy51bmluc3RhbGxQbHVnaW4obWF0Y2hpbmdJdGVtLmlkKTtcclxuXHRcdFx0XHRuZXcgTm90aWNlKGAke21hdGNoaW5nSXRlbS5uYW1lfSB1bmluc3RhbGxlZGAsIDI1MDApO1xyXG5cdFx0XHRcdGF3YWl0IHJlT3Blbk1vZGFsKG1vZGFsKTtcclxuXHRcdFx0fSk7XHJcblx0fSk7XHJcblx0bWVudS5zaG93QXRNb3VzZUV2ZW50KGV2dCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNvbnRleHRNZW51UVBTKFxyXG5cdGV2dDogTW91c2VFdmVudCxcclxuXHRtb2RhbDogUVBTTW9kYWwsXHJcblx0bWF0Y2hpbmdJdGVtOiBQbHVnaW5JbmZvXHJcbikge1xyXG5cdGNvbnN0IHsgcGx1Z2luIH0gPSBtb2RhbDtcclxuXHRjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcclxuXHJcblx0aWYgKFBsYXRmb3JtLmlzRGVza3RvcEFwcCkge1xyXG5cdFx0bWVudS5hZGRJdGVtKChpdGVtKSA9PlxyXG5cdFx0XHRpdGVtXHJcblx0XHRcdFx0LnNldFRpdGxlKFwiUGx1Z2luIGZvbGRlciAoZilcIilcclxuXHRcdFx0XHQuc2V0SWNvbihcImZvbGRlci1vcGVuXCIpXHJcblx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0YXdhaXQgb3BlbkRpcmVjdG9yeUluRmlsZU1hbmFnZXIobW9kYWwsIG1hdGNoaW5nSXRlbSk7XHJcblx0XHRcdFx0fSlcclxuXHRcdCk7XHJcblx0fVxyXG5cdG1lbnUuYWRkSXRlbShhc3luYyAoaXRlbSkgPT4ge1xyXG5cdFx0aXRlbS5zZXRUaXRsZShcIlBsdWdpbiBmZWF0dXJlc1wiKS5zZXRJY29uKFwicGFja2FnZS1wbHVzXCIpO1xyXG5cdFx0Y29uc3Qgc3VibWVudSA9IChpdGVtIGFzIGFueSkuc2V0U3VibWVudSgpIGFzIE1lbnU7XHJcblx0XHRhd2FpdCBwbHVnaW5GZWF0dXJlU3VibWVudShzdWJtZW51LCBtYXRjaGluZ0l0ZW0sIG1vZGFsKTtcclxuXHR9KTtcclxuXHJcblx0aWYgKGlzSW5zdGFsbGVkKG1hdGNoaW5nSXRlbSkpIHtcclxuXHRcdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xyXG5cdFx0XHRpdGVtLnNldFRpdGxlKFwiVW5pbnN0YWxsIHBsdWdpblwiKVxyXG5cdFx0XHRcdC5zZXRJY29uKFwibG9nLW91dFwiKVxyXG5cdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBwLnBsdWdpbnMudW5pbnN0YWxsUGx1Z2luKG1hdGNoaW5nSXRlbS5pZCk7XHJcblx0XHRcdFx0XHRuZXcgTm90aWNlKGAke21hdGNoaW5nSXRlbS5uYW1lfSB1bmluc3RhbGxlZGAsIDI1MDApO1xyXG5cdFx0XHRcdFx0bW9kYWwucGx1Z2luLmdldFBsdWdpbnNJbmZvKCk7XHJcblx0XHRcdFx0XHRtb2RhbC5wbHVnaW4uZ2V0TGVuZ3RoKCk7XHJcblx0XHRcdFx0XHRhd2FpdCByZU9wZW5Nb2RhbChtb2RhbCk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdGlmIChtYXRjaGluZ0l0ZW0uaWQgIT09IFwicXVpY2stcGx1Z2luLXN3aXRjaGVyXCIpIHtcclxuXHRcdG1lbnUuYWRkU2VwYXJhdG9yKCk7XHJcblx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcclxuXHRcdFx0aXRlbS5zZXRUaXRsZShcIkFkZCB0byBncm91cFwiKS5zZXRJY29uKFwidXNlclwiKTtcclxuXHRcdFx0Y29uc3Qgc3VibWVudSA9IChpdGVtIGFzIGFueSkuc2V0U3VibWVudSgpIGFzIE1lbnU7XHJcblx0XHRcdGFkZFRvR3JvdXBTdWJNZW51KHN1Ym1lbnUsIG1hdGNoaW5nSXRlbSwgbW9kYWwpO1xyXG5cdFx0fSk7XHJcblx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcclxuXHRcdFx0aXRlbS5zZXRUaXRsZShcIlJlbW92ZSBmcm9tIGdyb3VwXCIpLnNldEljb24oXCJ1c2VyLW1pbnVzXCIpO1xyXG5cdFx0XHRjb25zdCBzdWJtZW51ID0gKGl0ZW0gYXMgYW55KS5zZXRTdWJtZW51KCkgYXMgTWVudTtcclxuXHRcdFx0c3VibWVudS5hZGRJdGVtKChzdWJpdGVtKSA9PiB7XHJcblx0XHRcdFx0c3ViaXRlbVxyXG5cdFx0XHRcdFx0LnNldFRpdGxlKFwiQWxsIGdyb3Vwc1wiKVxyXG5cdFx0XHRcdFx0LnNldERpc2FibGVkKFxyXG5cdFx0XHRcdFx0XHRtYXRjaGluZ0l0ZW0uZ3JvdXBJbmZvLmdyb3VwSW5kaWNlcy5sZW5ndGggPT09IDBcclxuXHRcdFx0XHRcdClcclxuXHRcdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0bWF0Y2hpbmdJdGVtLmdyb3VwSW5mby5ncm91cEluZGljZXM7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHJtdkFsbEdyb3Vwc0Zyb21QbHVnaW4obW9kYWwsIG1hdGNoaW5nSXRlbSk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdGFkZFJlbW92ZUl0ZW1Hcm91cE1lbnVJdGVtcyhtb2RhbCwgc3VibWVudSwgcGx1Z2luLCBtYXRjaGluZ0l0ZW0pO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdG1lbnUuc2hvd0F0TW91c2VFdmVudChldnQpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RWxlbWVudEZyb21Nb3VzZVBvc2l0aW9uKFxyXG5cdGV2dDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQsXHJcblx0bW9kYWw6IFFQU01vZGFsIHwgQ1BNb2RhbFxyXG4pIHtcclxuXHRpZiAobW9kYWwubW91c2VQb3NpdGlvbikge1xyXG5cdFx0Y29uc3QgZWxlbWVudEZyb21Qb2ludCA9IGRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQoXHJcblx0XHRcdG1vZGFsLm1vdXNlUG9zaXRpb24ueCxcclxuXHRcdFx0bW9kYWwubW91c2VQb3NpdGlvbi55XHJcblx0XHQpO1xyXG5cdFx0cmV0dXJuIGVsZW1lbnRGcm9tUG9pbnQ7XHJcblx0fVxyXG5cdHJldHVybiBudWxsO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZ3JvdXBNZW51ID0gKFxyXG5cdGV2dDogTW91c2VFdmVudCxcclxuXHRtb2RhbDogUVBTTW9kYWwgfCBDUE1vZGFsLFxyXG5cdGdyb3VwTnVtYmVyOiBudW1iZXIsXHJcblx0c3Bhbj86IEhUTUxTcGFuRWxlbWVudFxyXG4pID0+IHtcclxuXHRpZiAobW9kYWwgaW5zdGFuY2VvZiBRUFNNb2RhbCAmJiBzcGFuKSB7XHJcblx0XHRncm91cE1lbnVRUFMoZXZ0LCBtb2RhbCwgZ3JvdXBOdW1iZXIsIHNwYW4pO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRncm91cE1lbnVDUE0oZXZ0LCBtb2RhbCBhcyBDUE1vZGFsLCBncm91cE51bWJlcik7XHJcblx0fVxyXG59O1xyXG5cclxuY29uc3QgZ3JvdXBNZW51UVBTID0gKFxyXG5cdGV2dDogTW91c2VFdmVudCxcclxuXHRtb2RhbDogUVBTTW9kYWwsXHJcblx0Z3JvdXBOdW1iZXI6IG51bWJlcixcclxuXHRzcGFuOiBIVE1MU3BhbkVsZW1lbnRcclxuKSA9PiB7XHJcblx0Y29uc3QgeyBwbHVnaW4gfSA9IG1vZGFsO1xyXG5cdGNvbnN0IHsgc2V0dGluZ3MgfSA9IHBsdWdpbjtcclxuXHRjb25zdCBpbkdyb3VwID0gZ2V0UGx1Z2luc0luR3JvdXAobW9kYWwsIGdyb3VwTnVtYmVyKSBhcyBQbHVnaW5JbmZvW107XHJcblx0Y29uc3QgbWVudSA9IG5ldyBNZW51KCk7XHJcblx0bWVudS5hZGRJdGVtKChpdGVtKSA9PlxyXG5cdFx0aXRlbS5zZXRUaXRsZShcIkRlbGF5IGdyb3VwXCIpLm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRjb25zdCBjdXJyZW50VmFsdWUgPSAoXHJcblx0XHRcdFx0c2V0dGluZ3MuZ3JvdXBzW2dyb3VwTnVtYmVyXS50aW1lIHx8IDBcclxuXHRcdFx0KS50b1N0cmluZygpO1xyXG5cdFx0XHRjb25zdCBpbnB1dCA9IGNyZWF0ZUlucHV0KHNwYW4sIGN1cnJlbnRWYWx1ZSk7XHJcblx0XHRcdGlmICghaW5wdXQpIHJldHVybjtcclxuXHJcblx0XHRcdGNvbnN0IGhhbmRsZUJsdXJPckVudGVyID0gKCkgPT4ge1xyXG5cdFx0XHRcdHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0aWYgKCFtb2RhbC5pc0RibENsaWNrKSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IHZhbHVlID0gcGFyc2VJbnQoaW5wdXQudmFsdWUpIHx8IDA7XHJcblx0XHRcdFx0XHRcdHNldHRpbmdzLmdyb3Vwc1tncm91cE51bWJlcl0udGltZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRzcGFuLnRleHRDb250ZW50ID0gYCR7dmFsdWV9YDtcclxuXHRcdFx0XHRcdFx0aWYgKG1vZGFsIGluc3RhbmNlb2YgQ1BNb2RhbCkge1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHJlT3Blbk1vZGFsKG1vZGFsKTtcclxuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChtb2RhbCBpbnN0YW5jZW9mIFFQU01vZGFsKSB7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgcmVPcGVuTW9kYWwobW9kYWwpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSwgMTAwKTtcclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsIGhhbmRsZUJsdXJPckVudGVyKTtcclxuXHRcdFx0aW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGV2ZW50KSA9PiB7XHJcblx0XHRcdFx0aWYgKGV2ZW50LmtleSA9PT0gXCJFbnRlclwiKSB7XHJcblx0XHRcdFx0XHRoYW5kbGVCbHVyT3JFbnRlcigpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9KVxyXG5cdCk7XHJcblxyXG5cdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cclxuXHRcdGl0ZW1cclxuXHRcdFx0LnNldFRpdGxlKFwiQXBwbHlcIilcclxuXHRcdFx0LnNldERpc2FibGVkKFxyXG5cdFx0XHRcdCFpbkdyb3VwLmxlbmd0aCB8fCBzZXR0aW5ncy5ncm91cHNbZ3JvdXBOdW1iZXJdLnRpbWUgPT09IDBcclxuXHRcdFx0KVxyXG5cdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0Zm9yIChjb25zdCBwbHVnaW4gb2YgaW5Hcm91cCkge1xyXG5cdFx0XHRcdFx0cGx1Z2luLnRpbWUgPSBzZXR0aW5ncy5ncm91cHNbZ3JvdXBOdW1iZXJdLnRpbWU7XHJcblx0XHRcdFx0XHRwbHVnaW4uZGVsYXllZCA9IHRydWU7XHJcblx0XHRcdFx0XHRzZXR0aW5ncy5ncm91cHNbZ3JvdXBOdW1iZXJdLmFwcGxpZWQgPSB0cnVlO1xyXG5cdFx0XHRcdFx0aWYgKHBsdWdpbi5lbmFibGVkKSB7XHJcblx0XHRcdFx0XHRcdGF3YWl0IChtb2RhbC5hcHAgYXMgYW55KS5wbHVnaW5zLmRpc2FibGVQbHVnaW5BbmRTYXZlKFxyXG5cdFx0XHRcdFx0XHRcdHBsdWdpbi5pZFxyXG5cdFx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCAobW9kYWwuYXBwIGFzIGFueSkucGx1Z2lucy5lbmFibGVQbHVnaW4oXHJcblx0XHRcdFx0XHRcdFx0cGx1Z2luLmlkXHJcblx0XHRcdFx0XHRcdCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRtb2RhbC5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRhd2FpdCByZU9wZW5Nb2RhbChtb2RhbCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KVxyXG5cdCk7XHJcblx0bWVudS5hZGRJdGVtKChpdGVtKSA9PlxyXG5cdFx0aXRlbVxyXG5cdFx0XHQuc2V0VGl0bGUoXCJSZXNldFwiKVxyXG5cdFx0XHQuc2V0RGlzYWJsZWQoXHJcblx0XHRcdFx0IWluR3JvdXAubGVuZ3RoIHx8IHNldHRpbmdzLmdyb3Vwc1tncm91cE51bWJlcl0udGltZSA9PT0gMFxyXG5cdFx0XHQpXHJcblx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRmb3IgKGNvbnN0IHBsdWdpbiBvZiBpbkdyb3VwKSB7XHJcblx0XHRcdFx0XHRwbHVnaW4udGltZSA9IDA7XHJcblx0XHRcdFx0XHRwbHVnaW4uZGVsYXllZCA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0c2V0dGluZ3MuZ3JvdXBzW2dyb3VwTnVtYmVyXS5hcHBsaWVkID0gZmFsc2U7XHJcblx0XHRcdFx0XHRpZiAocGx1Z2luLmVuYWJsZWQpIHtcclxuXHRcdFx0XHRcdFx0YXdhaXQgKG1vZGFsLmFwcCBhcyBhbnkpLnBsdWdpbnMuZW5hYmxlUGx1Z2luQW5kU2F2ZShcclxuXHRcdFx0XHRcdFx0XHRwbHVnaW4uaWRcclxuXHRcdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGF3YWl0IHJlT3Blbk1vZGFsKG1vZGFsKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHR9KVxyXG5cdCk7XHJcblx0bWVudS5hZGRTZXBhcmF0b3IoKTtcclxuXHRjb25zdCB0b0VuYWJsZSA9IGluR3JvdXAuZmlsdGVyKChpOiBQbHVnaW5JbmZvKSA9PiBpLmVuYWJsZWQgPT09IGZhbHNlKTtcclxuXHRtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XHJcblx0XHRpdGVtXHJcblx0XHRcdC5zZXRUaXRsZShcIkVuYWJsZSBhbGwgcGx1Z2lucyBpbiBncm91cFwiKVxyXG5cdFx0XHQuc2V0RGlzYWJsZWQoIWluR3JvdXAubGVuZ3RoIHx8ICF0b0VuYWJsZS5sZW5ndGgpXHJcblx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRpZiAodG9FbmFibGUpIHtcclxuXHRcdFx0XHRcdGF3YWl0IFByb21pc2UuYWxsKFxyXG5cdFx0XHRcdFx0XHR0b0VuYWJsZS5tYXAoYXN5bmMgKGk6IFBsdWdpbkluZm8pID0+IHtcclxuXHRcdFx0XHRcdFx0XHRjb25kaXRpb25hbEVuYWJsZShtb2RhbCwgaSk7XHJcblx0XHRcdFx0XHRcdFx0aS5lbmFibGVkID0gdHJ1ZTtcclxuXHRcdFx0XHRcdFx0XHRtb2RhbC5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0XHQpO1xyXG5cclxuXHRcdFx0XHRcdHBsdWdpbi5nZXRMZW5ndGgoKTtcclxuXHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJBbGwgcGx1Z2lucyBlbmFibGVkLlwiLCAyNTAwKTtcclxuXHRcdFx0XHRcdGF3YWl0IG1vZGFsLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdGF3YWl0IHJlT3Blbk1vZGFsKG1vZGFsKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pXHJcblx0KTtcclxuXHJcblx0Y29uc3QgdG9EaXNhYmxlID0gaW5Hcm91cC5maWx0ZXIoKGk6IFBsdWdpbkluZm8pID0+IGkuZW5hYmxlZCA9PT0gdHJ1ZSk7XHJcblx0bWVudS5hZGRJdGVtKChpdGVtKSA9PlxyXG5cdFx0aXRlbVxyXG5cdFx0XHQuc2V0VGl0bGUoXCJEaXNhYmxlIGFsbCBwbHVnaW5zIGluIGdyb3VwXCIpXHJcblx0XHRcdC5zZXREaXNhYmxlZCghaW5Hcm91cC5sZW5ndGggfHwgIXRvRGlzYWJsZS5sZW5ndGgpXHJcblx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRpZiAodG9EaXNhYmxlKSB7XHJcblx0XHRcdFx0XHRhd2FpdCBQcm9taXNlLmFsbChcclxuXHRcdFx0XHRcdFx0dG9EaXNhYmxlLm1hcChhc3luYyAoaTogUGx1Z2luSW5mbykgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdChtb2RhbC5hcHAgYXMgYW55KS5wbHVnaW5zLmRpc2FibGVQbHVnaW5BbmRTYXZlKFxyXG5cdFx0XHRcdFx0XHRcdFx0aS5pZFxyXG5cdFx0XHRcdFx0XHRcdCk7XHJcblx0XHRcdFx0XHRcdFx0aS5lbmFibGVkID0gZmFsc2U7XHJcblx0XHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0XHQpO1xyXG5cclxuXHRcdFx0XHRcdHBsdWdpbi5nZXRMZW5ndGgoKTtcclxuXHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJBbGwgcGx1Z2lucyBkaXNhYmxlZC5cIiwgMjUwMCk7XHJcblx0XHRcdFx0XHRhd2FpdCBtb2RhbC5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRhd2FpdCByZU9wZW5Nb2RhbChtb2RhbCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KVxyXG5cdCk7XHJcblx0bWVudS5hZGRTZXBhcmF0b3IoKTtcclxuXHRjcmVhdGVDbGVhckdyb3Vwc01lbnVJdGVtKG1vZGFsLCBtZW51LCBncm91cE51bWJlcik7XHJcblxyXG5cdG1lbnUuc2hvd0F0TW91c2VFdmVudChldnQpO1xyXG59O1xyXG5cclxuY29uc3QgZ3JvdXBNZW51Q1BNID0gKGV2dDogTW91c2VFdmVudCwgbW9kYWw6IENQTW9kYWwsIGdyb3VwTnVtYmVyOiBudW1iZXIpID0+IHtcclxuXHRjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcclxuXHRtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcclxuXHRcdGl0ZW0uc2V0VGl0bGUoXCJJbnN0YWxsICYgZW5hYmxlIGluIGdyb3VwXCIpO1xyXG5cdFx0aXRlbS5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuXHRcdFx0Y29uc3QgaW5Hcm91cCA9IGdldFBsdWdpbnNJbkdyb3VwKFxyXG5cdFx0XHRcdG1vZGFsLFxyXG5cdFx0XHRcdGdyb3VwTnVtYmVyXHJcblx0XHRcdCkgYXMgUGx1Z2luQ29tbUluZm9bXTtcclxuXHJcblx0XHRcdGlmICghaW5Hcm91cC5sZW5ndGgpIHJldHVybjtcclxuXHRcdFx0YXdhaXQgaW5zdGFsbEFsbFBsdWdpbnNJbkdyb3VwKG1vZGFsLCBpbkdyb3VwLCB0cnVlKTtcclxuXHRcdH0pO1xyXG5cdH0pO1xyXG5cdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xyXG5cdFx0aXRlbS5zZXRUaXRsZShcIkluc3RhbGwgcGx1Z2lucyBpbiBncm91cFwiKTtcclxuXHRcdGl0ZW0ub25DbGljayhhc3luYyAoKSA9PiB7XHJcblx0XHRcdGNvbnN0IGluR3JvdXAgPSBnZXRQbHVnaW5zSW5Hcm91cChcclxuXHRcdFx0XHRtb2RhbCxcclxuXHRcdFx0XHRncm91cE51bWJlclxyXG5cdFx0XHQpIGFzIFBsdWdpbkNvbW1JbmZvW107XHJcblxyXG5cdFx0XHRpZiAoIWluR3JvdXAubGVuZ3RoKSByZXR1cm47XHJcblx0XHRcdGF3YWl0IGluc3RhbGxBbGxQbHVnaW5zSW5Hcm91cChtb2RhbCwgaW5Hcm91cCk7XHJcblx0XHR9KTtcclxuXHR9KTtcclxuXHRtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcclxuXHRcdGl0ZW0uc2V0VGl0bGUoXCJVbmluc3RhbGwgcGx1Z2lucyBpbiBncm91cFwiKTtcclxuXHRcdGl0ZW0ub25DbGljayhhc3luYyAoKSA9PiB7XHJcblx0XHRcdGF3YWl0IHVuaW5zdGFsbEFsbFBsdWdpbnNJbkdyb3VwKG1vZGFsLCBncm91cE51bWJlcik7XHJcblx0XHR9KTtcclxuXHR9KTtcclxuXHRtZW51LmFkZFNlcGFyYXRvcigpO1xyXG5cdGNyZWF0ZUNsZWFyR3JvdXBzTWVudUl0ZW0obW9kYWwsIG1lbnUsIGdyb3VwTnVtYmVyKTtcclxuXHJcblx0bWVudS5zaG93QXRNb3VzZUV2ZW50KGV2dCk7XHJcbn07XHJcblxyXG5hc3luYyBmdW5jdGlvbiB1bmluc3RhbGxBbGxQbHVnaW5zSW5Hcm91cChtb2RhbDogQ1BNb2RhbCwgZ3JvdXBOdW1iZXI6IG51bWJlcikge1xyXG5cdGNvbnN0IGluR3JvdXAgPSBnZXRQbHVnaW5zSW5Hcm91cChtb2RhbCwgZ3JvdXBOdW1iZXIpO1xyXG5cclxuXHRpZiAoIWluR3JvdXAubGVuZ3RoKSByZXR1cm47XHJcblxyXG5cdGZvciAoY29uc3QgcGx1Z2luIG9mIGluR3JvdXApIHtcclxuXHRcdGlmICghaXNJbnN0YWxsZWQocGx1Z2luKSkgY29udGludWU7XHJcblx0XHRhd2FpdCB0aGlzLmFwcC5wbHVnaW5zLnVuaW5zdGFsbFBsdWdpbihwbHVnaW4uaWQpO1xyXG5cdFx0bmV3IE5vdGljZShgJHtwbHVnaW4ubmFtZX0gdW5pbnN0YWxsZWRgLCAyNTAwKTtcclxuXHR9XHJcblxyXG5cdGF3YWl0IHJlT3Blbk1vZGFsKG1vZGFsKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluc3RhbGxBbGxQbHVnaW5zSW5Hcm91cChcclxuXHRtb2RhbDogQ1BNb2RhbCxcclxuXHRwbHVnaW5MaXN0OiBQbHVnaW5Db21tSW5mb1tdLFxyXG5cdGVuYWJsZSA9IGZhbHNlXHJcbikge1xyXG5cdGZvciAoY29uc3QgcGx1Z2luIG9mIHBsdWdpbkxpc3QpIHtcclxuXHRcdGlmIChpc0luc3RhbGxlZChwbHVnaW4pKSB7XHJcblx0XHRcdG5ldyBOb3RpY2UoYCR7cGx1Z2luLm5hbWV9IGFscmVhZHkgaW5zdGFsbGVkYCwgMjUwMCk7XHJcblx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0fVxyXG5cdFx0YXdhaXQgaW5zdGFsbExhdGVzdFBsdWdpblZlcnNpb24obW9kYWwsIHBsdWdpbik7XHJcblx0XHRpZiAoZW5hYmxlKSB7XHJcblx0XHRcdGF3YWl0IChtb2RhbC5hcHAgYXMgYW55KS5wbHVnaW5zLmVuYWJsZVBsdWdpbkFuZFNhdmUocGx1Z2luLmlkKTtcclxuXHRcdFx0bmV3IE5vdGljZShgJHtwbHVnaW4ubmFtZX0gZW5hYmxlZGAsIDI1MDApO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRhd2FpdCByZU9wZW5Nb2RhbChtb2RhbCk7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBmaW5kTWF0Y2hpbmdJdGVtID0gKFxyXG5cdG1vZGFsOiBDUE1vZGFsIHwgUVBTTW9kYWwsXHJcblx0dGFyZ2V0QmxvY2s6IEhUTUxFbGVtZW50XHJcbikgPT4ge1xyXG5cdGlmIChtb2RhbCBpbnN0YW5jZW9mIFFQU01vZGFsKSB7XHJcblx0XHRsZXQgaXRlbU5hbWUgPSAodGFyZ2V0QmxvY2suY2hpbGRyZW5bMV0gYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XHJcblx0XHRpZiAoaXRlbU5hbWUuc3RhcnRzV2l0aChcIlx1MUQzMFwiKSkge1xyXG5cdFx0XHRpdGVtTmFtZSA9IGl0ZW1OYW1lLnN1YnN0cmluZygxKTtcclxuXHRcdH1cclxuXHRcdGNvbnN0IG1hdGNoaW5nSXRlbSA9IG1vZGFsLnBsdWdpbi5zZXR0aW5ncy5hbGxQbHVnaW5zTGlzdC5maW5kKFxyXG5cdFx0XHQoaXRlbSkgPT4gaXRlbS5uYW1lID09PSBpdGVtTmFtZVxyXG5cdFx0KTtcclxuXHJcblx0XHRyZXR1cm4gbWF0Y2hpbmdJdGVtO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRjb25zdCBpdGVtTmFtZSA9IHRhcmdldEJsb2NrLmZpcnN0Q2hpbGQ/LnRleHRDb250ZW50O1xyXG5cdFx0Y29uc3QgY2xlYW5JdGVtTmFtZSA9IGl0ZW1OYW1lPy5yZXBsYWNlKC9pbnN0YWxsZWQkLywgXCJcIikudHJpbSgpO1xyXG5cdFx0Y29uc3QgbWF0Y2hpbmdJdGVtID0gbW9kYWwucGx1Z2luLnNldHRpbmdzLmNvbW1QbHVnaW5zLmZpbmQoXHJcblx0XHRcdChpdGVtKSA9PiBpdGVtLm5hbWUgPT09IGNsZWFuSXRlbU5hbWVcclxuXHRcdCk7XHJcblx0XHRyZXR1cm4gbWF0Y2hpbmdJdGVtO1xyXG5cdH1cclxufTtcclxuXHJcbmNvbnN0IGNyZWF0ZUNsZWFyR3JvdXBzTWVudUl0ZW0gPSAoXHJcblx0bW9kYWw6IFFQU01vZGFsIHwgQ1BNb2RhbCxcclxuXHRtZW51OiBNZW51LFxyXG5cdGdyb3VwTnVtYmVyOiBudW1iZXJcclxuKSA9PiB7XHJcblx0bWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XHJcblx0XHRjb25zdCB7IHBsdWdpbiB9ID0gbW9kYWw7XHJcblx0XHRpdGVtLnNldFRpdGxlKFwiQ2xlYXIgZ3JvdXAocylcIikuc2V0SWNvbihcInVzZXItbWludXNcIik7XHJcblxyXG5cdFx0Y29uc3Qgc3VibWVudSA9IChpdGVtIGFzIGFueSkuc2V0U3VibWVudSgpIGFzIE1lbnU7XHJcblx0XHRhZGRSZW1vdmVHcm91cE1lbnVJdGVtcyhtb2RhbCwgc3VibWVudSwgZ3JvdXBOdW1iZXIpO1xyXG5cdFx0c3VibWVudS5hZGRTZXBhcmF0b3IoKTtcclxuXHRcdHN1Ym1lbnUuYWRkSXRlbSgoc3ViaXRlbSkgPT4ge1xyXG5cdFx0XHRzdWJpdGVtLnNldFRpdGxlKFwiQWxsIGdyb3Vwc1wiKS5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRjb25zdCBjb25maXJtUmVzZXQgPSBhd2FpdCBjb25maXJtKFxyXG5cdFx0XHRcdFx0XCJEZXRhY2ggYWxsIGdyb3VwcyBmcm9tIGFsbCBwbHVnaW5zP1wiLFxyXG5cdFx0XHRcdFx0MzAwXHJcblx0XHRcdFx0KTtcclxuXHRcdFx0XHRpZiAoY29uZmlybVJlc2V0KSB7XHJcblx0XHRcdFx0XHRpZiAobW9kYWwgaW5zdGFuY2VvZiBRUFNNb2RhbCkge1xyXG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IGkgb2YgcGx1Z2luLnNldHRpbmdzLmFsbFBsdWdpbnNMaXN0KSB7XHJcblx0XHRcdFx0XHRcdFx0aS5ncm91cEluZm8uZ3JvdXBJbmRpY2VzID0gW107XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0YXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCByZU9wZW5Nb2RhbChtb2RhbCk7XHJcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYEFsbCBncm91cHMgZW1wdHlgLCAyNTAwKTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IHsgc2V0dGluZ3MgfSA9IG1vZGFsLnBsdWdpbjtcclxuXHRcdFx0XHRcdFx0bGV0IHsgcGx1Z2luc1RhZ2dlZCwgY29tbVBsdWdpbnMgfSA9IHNldHRpbmdzO1xyXG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IGl0ZW0gb2YgY29tbVBsdWdpbnMpIHtcclxuXHRcdFx0XHRcdFx0XHRkZWxldGUgcGx1Z2luc1RhZ2dlZFtpdGVtLmlkXTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRhd2FpdCBtb2RhbC5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHJlT3Blbk1vZGFsKG1vZGFsKTtcclxuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShgQWxsIGdyb3VwcyBlbXB0eWAsIDI1MDApO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRuZXcgTm90aWNlKFwiT3BlcmF0aW9uIGNhbmNlbGxlZFwiLCAyNTAwKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblx0fSk7XHJcbn07XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5zdGFsbExhdGVzdFBsdWdpblZlcnNpb24oXHJcblx0bW9kYWw6IENQTW9kYWwsXHJcblx0cGx1Z2luOiBQbHVnaW5Db21tSW5mb1xyXG4pIHtcclxuXHRjb25zdCBwbHVnaW5JbmZvID0gbW9kYWwucGx1Z2luLnNldHRpbmdzLnBsdWdpblN0YXRzW3BsdWdpbi5pZF07XHJcblx0bGV0IGxhdGVzdFZlcnNpb24gPSBudWxsO1xyXG5cclxuXHRmb3IgKGNvbnN0IHZlcnNpb24gaW4gcGx1Z2luSW5mbykge1xyXG5cdFx0aWYgKC9eKHY/XFxkK1xcLlxcZCtcXC5cXGQrKSQvLnRlc3QodmVyc2lvbikpIHtcclxuXHRcdFx0aWYgKCFsYXRlc3RWZXJzaW9uIHx8IHZlcnNpb24gPiBsYXRlc3RWZXJzaW9uKSB7XHJcblx0XHRcdFx0bGF0ZXN0VmVyc2lvbiA9IHZlcnNpb247XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGlmICghbGF0ZXN0VmVyc2lvbikge1xyXG5cdFx0Y29uc29sZS5kZWJ1ZyhcIm5vIGxhc3QgdmVyc2lvbj9cIik7IC8vIHNob3VsZG4ndCBoYXBwZW5cclxuXHRcdHJldHVybjtcclxuXHR9XHJcblxyXG5cdGNvbnN0IG1hbmlmZXN0ID0gYXdhaXQgZ2V0TWFuaWZlc3QocGx1Z2luKTtcclxuXHRhd2FpdCB0aGlzLmFwcC5wbHVnaW5zLmluc3RhbGxQbHVnaW4ocGx1Z2luLnJlcG8sIGxhdGVzdFZlcnNpb24sIG1hbmlmZXN0KTtcclxufVxyXG4iLCAiLy9udW1iZXIgb2YgZ3JvdXBzIGZvciBjb21tdW5pdHlcclxuXHJcbmltcG9ydCB7IE5vdGljZSwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgUXVpY2tQbHVnaW5Td2l0Y2hlciBmcm9tIFwiLi9tYWluXCI7XHJcbmltcG9ydCB7IGNvbmZpcm0gfSBmcm9tIFwiLi9zZWNvbmRhcnlfbW9kYWxzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBRUFNTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcblx0Y29uc3RydWN0b3IoYXBwOiBhbnksIHB1YmxpYyBwbHVnaW46IFF1aWNrUGx1Z2luU3dpdGNoZXIpIHtcclxuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdH1cclxuXHJcblx0ZGlzcGxheSgpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XHJcblx0XHRjb25zdCB7IHBsdWdpbiB9ID0gdGhpcztcclxuXHRcdGNvbnN0IHsgc2V0dGluZ3MgfSA9IHBsdWdpbjtcclxuXHJcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoXCJoNFwiLCB7IHRleHQ6IFwiUXVpY2sgUGx1Z2luIFN3aXRjaGVyXCIgfSk7XHJcblxyXG5cdFx0bGV0IHNhdmVTZXR0aW5nc1RpbWVvdXQ6IFJldHVyblR5cGU8dHlwZW9mIHNldFRpbWVvdXQ+O1xyXG5cdFx0Y29uc3QgeyBudW1iZXJPZkdyb3VwcywgbnVtYmVyT2ZHcm91cHNDb21tIH0gPSBzZXR0aW5ncztcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZShcIk51bWJlciBvZiBwbHVnaW5zIGdyb3Vwc1wiKVxyXG5cdFx0XHQuc2V0RGVzYyhcIlRvIHRyZWF0IHBsdWdpbnMgYnkgZ3JvdXBzXCIpXHJcblx0XHRcdC5hZGRTbGlkZXIoKHNsaWRlcikgPT4ge1xyXG5cdFx0XHRcdHNsaWRlclxyXG5cdFx0XHRcdFx0LnNldExpbWl0cygxLCA2LCAxKVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKG51bWJlck9mR3JvdXBzKVxyXG5cdFx0XHRcdFx0LnNldER5bmFtaWNUb29sdGlwKClcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0aWYgKHZhbHVlIDwgbnVtYmVyT2ZHcm91cHMpIHtcclxuXHRcdFx0XHRcdFx0XHRjbGVhclRpbWVvdXQoc2F2ZVNldHRpbmdzVGltZW91dCk7XHJcblx0XHRcdFx0XHRcdFx0c2F2ZVNldHRpbmdzVGltZW91dCA9IHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgY29uZmlybVJlc2V0ID0gYXdhaXQgY29uZmlybShcclxuXHRcdFx0XHRcdFx0XHRcdFx0XCJyZWR1Y2luZyBudW1iZXIgb2YgZ3JvdXBzLCBoaWdoZXIgZ3JvdXBzIGluZm8gd2lsbCBiZSBsb3N0XCIsXHJcblx0XHRcdFx0XHRcdFx0XHRcdDM1MFxyXG5cdFx0XHRcdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdFx0XHRcdGlmIChjb25maXJtUmVzZXQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MuYWxsUGx1Z2luc0xpc3QuZm9yRWFjaChcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQocGx1Z2luKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRsZXQgaGFzVmFsdWVHcmVhdGVyVGhhblZhbHVlID1cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZmFsc2U7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRmb3IgKGNvbnN0IGdyb3VwSW5kZXggb2YgcGx1Z2luXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC5ncm91cEluZm8uZ3JvdXBJbmRpY2VzKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChncm91cEluZGV4ID4gdmFsdWUpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRoYXNWYWx1ZUdyZWF0ZXJUaGFuVmFsdWUgPVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dHJ1ZTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGhhc1ZhbHVlR3JlYXRlclRoYW5WYWx1ZSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRwbHVnaW4uZ3JvdXBJbmZvLmdyb3VwSW5kaWNlcyA9XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0W107XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5udW1iZXJPZkdyb3VwcyA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRzbGlkZXIuc2V0VmFsdWUobnVtYmVyT2ZHcm91cHMpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH0sIDcwMCk7XHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0Y2xlYXJUaW1lb3V0KHNhdmVTZXR0aW5nc1RpbWVvdXQpO1xyXG5cdFx0XHRcdFx0XHRcdHNldHRpbmdzLm51bWJlck9mR3JvdXBzID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKFwiTnVtYmVyIG9mIGNvbW11bml0eSBwbHVnaW5zIGdyb3Vwc1wiKVxyXG5cdFx0XHQuc2V0RGVzYyhcIlRvIHRyZWF0IHBsdWdpbnMgYnkgZ3JvdXBzXCIpXHJcblx0XHRcdC5hZGRTbGlkZXIoKHNsaWRlcikgPT4ge1xyXG5cdFx0XHRcdHNsaWRlclxyXG5cdFx0XHRcdFx0LnNldExpbWl0cygxLCA2LCAxKVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKG51bWJlck9mR3JvdXBzQ29tbSlcclxuXHRcdFx0XHRcdC5zZXREeW5hbWljVG9vbHRpcCgpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdGlmICh2YWx1ZSA8IG51bWJlck9mR3JvdXBzQ29tbSkge1xyXG5cdFx0XHRcdFx0XHRcdGNsZWFyVGltZW91dChzYXZlU2V0dGluZ3NUaW1lb3V0KTtcclxuXHRcdFx0XHRcdFx0XHRzYXZlU2V0dGluZ3NUaW1lb3V0ID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBjb25maXJtUmVzZXQgPSBhd2FpdCBjb25maXJtKFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcInJlZHVjaW5nIG51bWJlciBvZiBncm91cHMsIGhpZ2hlciBncm91cHMgaW5mbyB3aWxsIGJlIGxvc3RcIixcclxuXHRcdFx0XHRcdFx0XHRcdFx0MzUwXHJcblx0XHRcdFx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGNvbmZpcm1SZXNldCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCB7IGNvbW1QbHVnaW5zLCBwbHVnaW5zVGFnZ2VkIH0gPVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRcdFx0Y29tbVBsdWdpbnMuZm9yRWFjaCgocGx1Z2luKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0bGV0IGhhc1ZhbHVlR3JlYXRlclRoYW5WYWx1ZSA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IHRhZ2dlZEl0ZW0gPVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0cGx1Z2luc1RhZ2dlZFtwbHVnaW4uaWRdO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmICghdGFnZ2VkSXRlbSkgcmV0dXJuO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IHsgZ3JvdXBJbmZvIH0gPSB0YWdnZWRJdGVtO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGxldCB7IGdyb3VwSW5kaWNlcyB9ID0gZ3JvdXBJbmZvO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGZvciAoY29uc3QgZ3JvdXBJbmRleCBvZiBncm91cEluZGljZXMpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChncm91cEluZGV4ID4gdmFsdWUpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aGFzVmFsdWVHcmVhdGVyVGhhblZhbHVlID0gdHJ1ZTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChoYXNWYWx1ZUdyZWF0ZXJUaGFuVmFsdWUpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGdyb3VwSW5kaWNlcyA9IFtdO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLm51bWJlck9mR3JvdXBzQ29tbSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRzbGlkZXIuc2V0VmFsdWUobnVtYmVyT2ZHcm91cHNDb21tKTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9LCA3MDApO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdGNsZWFyVGltZW91dChzYXZlU2V0dGluZ3NUaW1lb3V0KTtcclxuXHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5udW1iZXJPZkdyb3Vwc0NvbW0gPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoXCJSZXNldCBhbGwgdmFsdWVzXCIpXHJcblx0XHRcdC5zZXREZXNjKFwiRG9uJ3QgZG8gdGhpcywgdW5sZXNzIHlvdSByZWFsbHkgbmVlZCB0b1wiKVxyXG5cdFx0XHQuYWRkQnV0dG9uKChidG4pID0+IHtcclxuXHRcdFx0XHRidG4uc2V0SWNvbihcImFsZXJ0LW9jdGFnb25cIilcclxuXHRcdFx0XHRcdC5zZXRUb29sdGlwKFwiUmVzZXQgYWxsIHZhbHVlc1wiKVxyXG5cdFx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBjb25maXJtUmVzZXQgPSBhd2FpdCBjb25maXJtKFxyXG5cdFx0XHRcdFx0XHRcdFwiRG8geW91IHdhbnQgdG8gcmVzZXQgYWxsIHZhbHVlcz9cIixcclxuXHRcdFx0XHRcdFx0XHQzMDBcclxuXHRcdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdFx0aWYgKGNvbmZpcm1SZXNldCkge1xyXG5cdFx0XHRcdFx0XHRcdGlmIChcclxuXHRcdFx0XHRcdFx0XHRcdHBsdWdpbi5zZXR0aW5ncy5oYXNPd25Qcm9wZXJ0eShcImFsbFBsdWdpbnNMaXN0XCIpXHJcblx0XHRcdFx0XHRcdFx0KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRwbHVnaW4uc2V0dGluZ3MuYWxsUGx1Z2luc0xpc3QgPSBbXTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0aWYgKHBsdWdpbi5zZXR0aW5ncy5oYXNPd25Qcm9wZXJ0eShcImdyb3Vwc1wiKSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0cGx1Z2luLnNldHRpbmdzLmdyb3VwcyA9IHt9O1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0bmV3IE5vdGljZShcIlJlc2V0IGRvbmVcIiwgMjUwMCk7XHJcblx0XHRcdFx0XHRcdFx0Ly8gKHRoaXMuYXBwIGFzIGFueSkuY29tbWFuZHMuZXhlY3V0ZUNvbW1hbmRCeUlkKCdhcHA6cmVsb2FkJylcclxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRuZXcgTm90aWNlKFwiT3BlcmF0aW9uIGNhbmNlbGxlZFwiLCAyNTAwKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZShcIlNob3cgaG90a2V5cyBsaW5lIHJlbWluZGVyXCIpXHJcblx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG5cdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dIb3RLZXlzKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93SG90S2V5cyA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHR9XHJcbn1cclxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7OztBQ0FPLFNBQVMsT0FBTyxLQUFLLFdBQVc7QUFDbkMsUUFBTSxXQUFXLE9BQU8sS0FBSyxTQUFTLEVBQUUsSUFBSSxTQUFPLFFBQVEsS0FBSyxLQUFLLFVBQVUsR0FBRyxDQUFDLENBQUM7QUFDcEYsU0FBTyxTQUFTLFdBQVcsSUFBSSxTQUFTLENBQUMsSUFBSSxXQUFZO0FBQUUsYUFBUyxRQUFRLE9BQUssRUFBRSxDQUFDO0FBQUEsRUFBRztBQUMzRjtBQUNBLFNBQVMsUUFBUSxLQUFLLFFBQVEsZUFBZTtBQUN6QyxRQUFNLFdBQVcsSUFBSSxNQUFNLEdBQUcsU0FBUyxJQUFJLGVBQWUsTUFBTTtBQUNoRSxNQUFJLFVBQVUsY0FBYyxRQUFRO0FBR3BDLE1BQUk7QUFDQSxXQUFPLGVBQWUsU0FBUyxRQUFRO0FBQzNDLFNBQU8sZUFBZSxTQUFTLE9BQU87QUFDdEMsTUFBSSxNQUFNLElBQUk7QUFFZCxTQUFPO0FBQ1AsV0FBUyxXQUFXLE1BQU07QUFFdEIsUUFBSSxZQUFZLFlBQVksSUFBSSxNQUFNLE1BQU07QUFDeEMsYUFBTztBQUNYLFdBQU8sUUFBUSxNQUFN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QU0sTUFBTSxNQUFNLEtBQUs7QUFDdkIsUUFBSSxRQUFRLE1BQU07QUFDakIsZUFBUyxlQUFlO0FBQ3hCLFlBQU0sTUFBTSxhQUFhO0FBQUEsSUFDMUIsT0FBTztBQUNOLGNBQVEsSUFBSSx1REFBdUQ7QUFBQSxJQUNwRTtBQUFBLEVBQ0QsT0FBTztBQUNOLFlBQVE7QUFBQSxNQUNQO0FBQUEsSUFDRDtBQUFBLEVBQ0Q7QUFDRDsiLAogICJuYW1lcyI6IFsiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgIkdyb3VwcyIsICJwbHVnaW4iLCAiYXBwIiwgImVsIiwgImNvbW1QbHVnaW5zIiwgImFwcCIsICJhcHAiLCAidHJhbnNsYXRpb24iLCAiaW1wb3J0X29ic2lkaWFuIiwgInBsdWdpbiIsICJjb21tUGx1Z2lucyIsICJpdGVtIiwgImFwcCIsICJoYW5kbGVLZXlEb3duIiwgImNpcmNsZUNTU01vZGlmIiwgImVsIiwgImFkZEdyb3VwQ2lyY2xlcyIsICJwbHVnaW4iLCAiaW5wdXQiLCAiaW1wb3J0X29ic2lkaWFuIiwgImFwcCIsICJwbHVnaW4iLCAiY29tbVBsdWdpbnMiLCAicGx1Z2luIl0KfQo=
